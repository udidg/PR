!function(){function e(){this._page={domain:window.location.host||"",href:window.location.href||"",path:window.location.pathname||"",protocol:window.location.protocol||"",referrer:document.referrer||"",search:window.location.search||"",title:document.title||"",url:window.location.protocol+"//"+window.location.host+window.location.pathname||""},this._campaignObj={medium:a("utm_medium")||"",name:a("utm_campaign")||"",source:a("utm_source")||""},this._analytics_key="yuH27H1QId6afXAojow6Tafi7Vw9v1spaLD5Yznw",this._MF="undefined"!=typeof MF?MF:{}}function t(e,t,n,i,r){var o=new XMLHttpRequest;n&&(o.onreadystatechange=function(){o.readyState==o.DONE&&n.apply(r,[o.response])}),o.open(e,t,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("x-api-key",r._analytics_key),o.send(i)}function n(e,n){e._trackingObj=n;for(var i=encodeURIComponent(e._page.href),r="",o="",a=0;a<n.length;a++)"campaign"===n[a].tracking&&(r=encodeURIComponent(n[a].name),o="https://www.myfinance.com/reporting/campaignresolution/?mf_referrer="+i+"&campaign="+r,t("GET",o,e.campaignResolutionHandler,void 0,e))}function i(e){var t;if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return t=new Date,t.setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;n++)t[n]=i(e[n]);return t}if(e instanceof Object){t={};for(var o in e)e.hasOwnProperty(o)&&(t[o]=i(e[o]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")}function r(e,t,n){var i;if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toGMTString()}else i="";document.cookie=e+"="+t+i+"; path=/"}function o(e,t,n,r){var o=n||{},s=r._adUnit,d=r._campaignObj,u=r._MF?l(i(r._MF),o):{},p=m(),g=r._page,f=r._posts,h=c(),_={anonymousId:h,context:{campaign:{medium:d.medium||"",name:d.name||"",source:d.source||""},ip:u.ip_address||"",page:{path:g.path,referrer:g.referrer,search:g.search,title:g.title,url:g.url},userAgent:u.user_agent||""},event:t,formatted:!0,messageId:p,properties:{browser_family:u.browser_family||"",browser_version_major:u.browser_version_major||"",browser_version_minor:u.browser_version_minor||"",campaign:u.campaign||"",campaign_id:u.campaign_id||"",campaign_reporting_id:u.campaign_reporting_id||"",city:u.city||"",country:u.country||"",device_brand:u.device_brand||"",device_family:u.device_family||"",device_model:u.device_model||"",domain:g.domain,initial_referrer:u.initial_referrer||"",ip_address:u.ip_address||"",landing_page:u.landing_page||"",mf_event_id:p,mktg_hline:a("mktg_hline")||u.mktg_hline,mktg_image:a("mktg_image")||u.mktg_image,num_pages_viewed:u.num_pages_viewed||1,os_family:u.os_family||"",os_version_major:u.os_version_major||"",os_version_minor:u.os_version_minor||"",placement_name:u.placement_name||"",postal_code:u.postal_code||"",protocol:g.protocol,referring_publisher:a("referring_publisher")||"",s1:a("s1")||"",s2:a("s2")||"",s3:a("s3")||"",screen_height:screen.height||"",screen_width:screen.width||"",state:u.state||"",tz_offset:(new Date).getTimezoneOffset(),user_agent:u.user_agent||"",utm_content:a("utm_content")||u.utm_content,value:u.value||"",widget_uuid:r._widget_id||""},timestamp:(new Date).toISOString(),type:e,userId:u.user_id||"",writeKey:r._key||""};if(f){_.properties.posts=[];var w;for(w=0;w<f.length;w++){var y=f[w];_.properties.posts.push({post_id:y.id,headline_id:y.headline_id,image_id:y.image_id})}}return s&&(_.properties.ad_unit=s.name,_.properties.ad_unit_id=s.id,_.properties.ad_unit_selector=s.selector,_.properties.ad_unit_updated_selector=s.updatedSelector||"",_.properties.campaign=s.campaign.name,_.properties.campaign_id=s.campaign.id,_.properties.campaign_reporting_id=s.campaign.reporting_id),_.properties=l(_.properties,u),_}function a(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=n.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function c(){var e=d("_mfuuid_");if(e)var t=e;else{var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});r("_mfuuid_",t,365)}return t}function s(e,t){var n=new RegExp("(?:^|\\s)"+t+"(?!\\S)");return!!e.className.match(n)}function l(e,t){if(t.constructor==Object)for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}function d(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}function u(e,n,i,r,a){a?a&&!a.formatted&&(a=o(e,n,i,r)):a=o(e,n,i,r),"function"==typeof z&&(r.hasOwnProperty("_adUnit")?z(a,r._adUnit):z(a)),r._noEvents||t("POST","https://analytics.myfinance.com/prod/record",null,JSON.stringify(a),r)}function m(){var e,t="";for(e=0;e<32;e+=1)switch(e){case 8:case 20:t+="-",t+=(16*Math.random()|0).toString(16);break;case 12:t+="-",t+="4";break;case 16:t+="-",t+=(4*Math.random()|8).toString(16);break;default:t+=(16*Math.random()|0).toString(16)}return t}function p(e){var t=document.createElement("div");t.className="myFinance-ad-unit",e.style_class_name&&(t.className+=" "+e.style_class_name),e.widget_uuid&&t.setAttribute("data-widget-id",e.widget_uuid),t.setAttribute("data-campaign",e.campaign.url_param);var n=null;return e.selector&&(n=document.querySelector(e.selector)),[t,n]}function g(e,t){return e.textContent.toLowerCase().includes(t.toLowerCase())}function f(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function h(e){return!!e&&({BLOCKQUOTE:!0,DL:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,OL:!0,P:!0,PRE:!0,UL:!0}[e.tagName]||!1)}function _(e){for(var t=h(e),n=e.nextElementSibling;t&&n;)t=!h(n),n=n.nextElementSibling;return t}function w(e,t){for(var n,i=4;i>=0;){if(!e)return W.log.log("%cRan out of elements looking for a valid target element.","font-weight: bold; color: #cf4931"),null;for(n=e.nextElementSibling;n&&!f(n);)n=n.nextElementSibling;if(W.isCNNMoney()&&"timestamp"===n.className)return W.log.log('%cOn CNN Money Page with next element containing class "timestamp.',"font-weight: bold; color: #cf4931"),null;if(h(e)&&h(n))return e;if(_(e))return e;if(t)return W.log.log("%cMultiple Ad Units and current target is not the last element and next element is not a text element.","font-weight: bold; color: #cf4931"),null;e=n,i--}return W.log.log("%cExceeded travel buffer while looking for a valid target element.","font-weight: bold; color: #cf4931"),null}function y(e,t){var n=e.search_phrase;if(n){var i=e.selector,r="p";if(i){var o=i.split(" ");r=o[o.length-1].split(":")[0].split(".")[0]}for(var a=document.getElementsByTagName(r),c=null,s=0;s<a.length;s++)if(g(a[s],n)&&(c=w(a[s],t)))return c;W.log.log("%cSearch Phrase %c"+n+" %cnot found searching %c<"+r+"> %celements","font-weight: bold; color: #cf4931","color: black","font-weight: bold; color: #cf4931","color: black","font-weight: bold; color: #cf4931")}else W.log.log("%cNo Search Phrase","font-weight: bold");return null}function v(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function b(e,t,n,i){var r=e.parentNode;n.insert_before?r.insertBefore(t,e):v(t,e);var o=new M(t,n,i);return o.trackPageView(),o}function k(e){for(var t=[];e.parentNode;){if(e.id){t.unshift("#"+e.id);break}if(e==e.ownerDocument.documentElement)t.unshift(e.tagName);else{for(var n=1,i=e;i.previousElementSibling;i=i.previousElementSibling,n++);t.unshift(e.tagName+":nth-child("+n+")")}e=e.parentNode}return t.join(" > ")}function x(e,t,n,i){var r,o=e[0],a=e[1];if(!a||t.search_phrase&&!g(a,t.search_phrase)){W.log.groupCollapsed("%cembed Issue","color: #cf4931"),r=y(t,n);var c,s={selector:t.selector?t.selector:""};r?(t.selector&&(t.updatedSelector=k(r)),s.message="Dynamically Placed",c=b(r,o,t,i)):(s.message="Failed to Embed",c=new M(null,t,i)),!t.selector&&r||(t.selector||(t.updatedSelector="DYNAMIC - placement not valid"),c.trackAdUnitEmbedError()),s.campaign=t.campaign,W.log.logEntry(s),W.log.groupEnd()}else b(a,o,t,i)}function E(e){var t=JSON.parse(e),n=t.ad_units,i=n.length>1,r=[];W.log.logGroup("adUnits",n);for(var o=0;o<n.length;o++)r.push(p(n[o]));for(o=0;o<r.length;o++)x(r[o],n[o],i,t.tracking)}function F(){(new M).trackScriptExecution()}function M(e,t,n){this._postsEndpoint="https://www.myfinance.com/api/promoted_pages",e&&(this._container=e,this._type=e.getAttribute("data-type")||"horizontal",this._style=e.getAttribute("data-style")||"images",this._campaign=e.getAttribute("data-campaign")||"other",this._placement=e.getAttribute("data-placement")||null,this._widget_id=e.getAttribute("data-widget-id")||null,this._visible=f(this._container),this._shouldWriteHTML="other"!==this._campaign,this._noEvents=e.getAttribute("data-no-events")||!1,this._foreignReferrer=e.getAttribute("data-foreign-referrer")||null),this._analytics_key="yuH27H1QId6afXAojow6Tafi7Vw9v1spaLD5Yznw",this._page={domain:window.location.host||"",href:window.location.href||"",path:window.location.pathname||"",protocol:window.location.protocol||"",referrer:document.referrer||"",search:window.location.search||"",title:document.title||"",url:window.location.protocol+"//"+window.location.host+window.location.pathname||""},this._campaignObj={medium:a("utm_medium")||"",name:a("utm_campaign")||"",source:a("utm_source")||""},t&&(this._adUnit=t,this._campaign=this._campaign||t.campaign.url_param,this._widget_id=this._widget_id||t.widget_uuid,this._htmlSnippet=t.html_snippet||null,this._MF=n),e&&(this._widget_id||this._htmlSnippet)?(this._shouldWriteHTML=!0,W.log.groupCollapsed("adPlacement"),t&&W.log.logGroup("campaign",t.campaign),this.writeHTML(),t||this.getTrackingData(),W.log.groupEnd()):e&&this.init()}function C(e){var t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,r=Math.max(t.top,0),o=Math.min(t.bottom,n),a=Math.max(t.left,0),c=Math.min(t.right,i),s=t.top>=0&&t.bottom<=n,l=o-r>=300,d=t.left>=0&&t.right<=i,u=c-a>=300;return(s||l)&&(d||u)}function R(){return window.location.href.split(/[?#]/)[0]}function I(){return"money.cnn.com"===window.location.hostname}function N(e){e.properties.campaign="",e.properties.campaign_id=null,e.properties.campaign_reporting_id=""}function O(){return{pageImpressionByCampaign:{}}}function S(){return a("mf_foreign_referrer")||document.referrer}function T(){var e=Array.prototype.slice.call(arguments);window.postMessage({type:"MY_FINANCE_Log",text:e.join("::")},"*")}function L(){var e=Array.prototype.slice.call(arguments);window.postMessage({type:"MY_FINANCE_GroupCollapsed",text:e.join("::")},"*")}function P(){window.postMessage({type:"MY_FINANCE_GroupEnd",text:""},"*")}function H(e){window.postMessage({type:"MY_FINANCE_Count",text:e},"*")}function z(e,t){L("%canalytics - "+e.event,"color: #3139f2"),e.properties.campaign_reporting_id&&H("reporting_id - "+e.properties.campaign_reporting_id);var n={mf_event_id:e.properties.mf_event_id,campaign:{name:e.properties.campaign,id:e.properties.campaign_id,reporting_id:e.properties.campaign_reporting_id,widget_uuid:e.properties.widget_uuid}};t&&(t.hasOwnProperty("updatedSelector")?n.selector=t.updatedSelector:n.selector=t.selector),e.properties.hasOwnProperty("click_target")&&(n.click_target=e.properties.click_target),U("event",n),P()}function A(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];"object"==typeof n?(L(t),A(n),P()):T("%c"+t+": ","font-weight: bold;",n)}}function U(e,t){L(e),A(t),P()}e.prototype.track=function(e,t){u("track",e,t,this)},e.prototype.campaignResolutionHandler=function(e){var t=this,n=JSON.parse(e).tracking;if(n?this._MF=n:console.log("Error parsing JSON response"),this._trackingObj)for(var i=0;i<this._trackingObj.length;i++)"event"===this._trackingObj[i].tracking&&u("track",this._trackingObj[i].name,null,t)};var j={};this.__createMFWidgets__=function(){var t=W.getPageURL(),i=t.includes&&t.includes("anthony-bourdain-obit");if(!j[t]&&!i){j[t]=W.pageEventsTemplate(),F();for(var r=document.body.querySelectorAll(".myFinance-widget"),o=W.getParameterByName("mf_ct_campaign"),a=0;a<r.length;a++){var c=r[a];o&&(c.setAttribute("data-campaign",o),c.setAttribute("data-no-events","true"),c.setAttribute("data-foreign-referrer",W.getReferrerURL()));new M(c).trackPageView()}var s=["tzo="+(new Date).getTimezoneOffset(),"w="+screen.width,"h="+screen.height,"mf_referrer="+encodeURIComponent(W.getPageURL()),"utm_medium=embed"],l="https://www.myfinance.com/api/ad_units?"+s.join("&");if(M.prototype.ajax("GET",l,E,null),window._mf_tracking){n(new e,window._mf_tracking)}}},M.prototype.getPromotedPagesURL=function(){var e=["utm_campaign="+this._campaign,"tzo="+(new Date).getTimezoneOffset(),"w="+screen.width,"h="+screen.height,"mf_referrer="+encodeURIComponent(W.getPageURL()),"utm_medium=CRU"];return this._postsEndpoint+"?"+e.join("&")},M.prototype.init=function(){var e=this.getPromotedPagesURL();this.ajax("GET",e,this.writeHTML,null)},M.prototype.getTrackingData=function(){var e=this.getPromotedPagesURL();this.ajax("GET",e,this.setTracking,null)},M.prototype.setTracking=function(e){if(e){var t=JSON.parse(e);this._MF=t.tracking}},M.prototype.writeHTML=function(e){function t(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}function n(e){e.preventDefault();var t=document.body.querySelector(".myFinance-widget__modal");t&&(t.style.display="block")}function i(e){if(!s(e.target,"myFinance-widget__modal-content")){document.body.querySelector(".myFinance-widget__modal").style.display="none"}}var r,o=["loan-type","zip","fico","product","purchase-price","percent","down-payment","property-value","current-loan-balance","sort","sort-direction","table-title","show-filters","terms","deposit-amount","per-page","per-page-mobile","min-deposit-amount","max-deposit-amount","show-deposit-error"],a=[],c=[],l={};if(e){var d=JSON.parse(e);a=d.posts,c=d.rendered_crus||[],r=d.nf||!1,this._posts=a,this._MF=d.tracking,l.campaign={id:this._MF.campaign_id,name:this._MF.campaign,url_param:this._MF.campaign_url_param,reporting_id:this._MF.campaign_reporting_id}}var u=null;if(this._shouldWriteHTML){var m=this._container;if(this._widget_id){this._adUnit&&this._adUnit.hasOwnProperty("selector")&&W.log.logEntry({selector:this._adUnit.selector}),l.widget_id=this._widget_id,W.log.logGroup("iframe",l);var p=document.createElement("iframe"),g=["utm_campaign="+this._campaign,"utm_medium=embed"];this._foreignReferrer&&g.push("foreign_referrer="+encodeURIComponent(this._foreignReferrer)),o.forEach(function(e){value=m.getAttribute("data-"+e)||null,value&&g.push(t(e)+"="+encodeURIComponent(value))}),p.src="https://www.myfinance.com/w/"+this._widget_id+"?"+g.join("&"),p.frameBorder=0,p.scrolling="no",p.className="myFinance-iframe";var f=this;p.onload=function(){iFrameResize({messageCallback:function(e){e.iframe==p&&"widgetClick"==e.message&&f.trackRecommendationClick()}},p)},m.appendChild(p)}else if(this._htmlSnippet)l.selector=this._adUnit.selector,l.htmlSnippet=this._htmlSnippet,W.log.logGroup("htmlSnippet",l),m.className="myFinance-custom-template-ad-unit",m.innerHTML=this._htmlSnippet,m.addEventListener("click",this.trackRecommendationClick.bind(this));else if(c.length>0){l.renderedCRU=c.length,W.log.logGroup("renderedCRU",l);var h,_;for(h=0;h<c.length;h++)if(_=c[h],m.id===_.identifier){m.innerHTML=_.rendered_cru,m.classList.remove("myFinance-widget"),m.addEventListener("click",this.trackRecommendationClick.bind(this));break}}else{l.posts=a.length,W.log.logGroup("generatedCRU",l),m.innerHTML='<h2 class="myFinance-widget__title">Recommended</h2>';var w=4;a.length%3==0&&"horizontal"===this._type&&(w=3,m.className+=" is-thirds");var y=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;y<=544&&"horizontal"===this._type&&(this._type="vertical"),m.className+=" is-"+this._type;var v=document.createElement("div");v.className="myFinance-widget__posts-container";var b,k,x,E,F,M;for(b=0;b<a.length;b+=w){for(x=a.slice(b,b+w),E=document.createElement("div"),E.className="myFinance-widget__posts-row",k=0;k<x.length;k++){switch(F=document.createElement("a"),this._type){case"vertical":M='<img class="myFinance-widget__post-image" data-pin-nopin="true" src="'+x[k].related_image_wide+'"/><div class="myFinance-widget__post-caption">'+x[k].headline+"</div>";break;case"horizontal":M='<img class="myFinance-widget__post-image" data-pin-nopin="true" src="'+x[k].related_image+'"/><div class="myFinance-widget__post-caption">'+x[k].headline+"</div>";break;case"text":M='<div class="myFinance-widget__post-caption">'+x[k].headline+"</div>"}F.innerHTML=M,F.className="myFinance-widget__post",F.href=x[k].url,F.setAttribute("target","_blank"),r&&F.setAttribute("rel","nofollow"),F.addEventListener("click",this.trackRecommendationClick.bind(this,x[k])),E.appendChild(F)}v.appendChild(E)}m.appendChild(v),u=function(e){var t=document.createElement("div"),i=document.createElement("a");return i.href="#",i.className="myFinance-widget__attribution-logo-link",i.innerHTML='<img src="https://www.myfinance.com/static/img/myfinance-logo-white.svg" class="myFinance-widget__attribution-logo"/>',i.addEventListener("click",n),t.innerHTML=e,t.className="myFinance-widget__attribution",t.appendChild(i),t}("Recommendations by ")}var C=function(){var e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div");return e.className="myFinance-widget__modal",e.style.position="fixed",e.style.top=0,e.style.left=0,e.style.right=0,e.style.bottom=0,e.style.width="100%",e.style.height="100%",e.style.background="transparent",e.style.zIndex="1000000000",e.style.display="none",t.className="myFinance-widget__modal-body",t.innerHTML='<div class="mfFinance-widget__modal-content"><h3 class="myFinance-widget__modal-heading">Powered by</h3><a href="https://www.myfinance.com" target="_blank"><img src="https://www.myfinance.com/static/img/myfinance-logo-white.svg" class="myFinance-widget__modal-logo"/></a><p class="myFinance-widget__modal-text">For partnership opportunities contact <a href="mailto:help@myfinance.com" target="_blank">help@myfinance.com</a></p><p class="myFinance-widget__modal-text">To view our privacy policy <a href="https://www.myfinance.com/p/privacy-policy/" target="_blank">click here</a></p></div>',n.className="myFinance-widget__modal-x",n.innerText="+",t.appendChild(n),e.appendChild(t),e.addEventListener("click",i),e}();u&&(m.appendChild(u),m.appendChild(C)),this.trackImpression()}},M.prototype.ajax=function(e,n,i,r){t(e,n,i,r,this)},M.prototype.trackImpression=function(){function e(){C(t._container)&&(window.clearInterval(n),u("track","widget-impression",null,t))}if(this._visible){var t=this,n=window.setInterval(e,1e3);e()}},M.prototype.trackPageView=function(){function e(){if(t._MF){window.clearInterval(n);var e;t._shouldWriteHTML&&u("track","widget-pageview",null,t);var i=j[W.getPageURL()],r=i&&i.pageImpressionByCampaign||{};e=o("track","page-level-impression",null,t),r[e.properties.campaign_reporting_id]||(t.trackPageImpression(void 0,void 0,void 0,t,e),r[e.properties.campaign_reporting_id]=!0),W.unsetCampaign(e),r[e.properties.campaign_reporting_id]||(t.trackPageImpression(void 0,void 0,void 0,t,e),r[e.properties.campaign_reporting_id]=!0)}}if(this._visible){var t=this,n=window.setInterval(e,1e3);e()}},M.prototype.trackPageImpression=function(e,t,n,i,r){u(e,t,n,i,r)},M.prototype.trackRecommendationClick=function(e){var t=this;if(t._MF){var n=o("track","widget-recommendation-click",null,t);e&&(n.properties.click_target={post_id:e.id,headline_id:e.headline_id,image_id:e.image_id}),u(void 0,void 0,void 0,t,n)}},M.prototype.trackAdUnitEmbedError=function(){u("track","ad-unit-embed-error",null,this)},M.prototype.trackScriptExecution=function(){u("track","embed-script-execution",null,this)};var W={getPageURL:R,isCNNMoney:I,unsetCampaign:N,pageEventsTemplate:O,getParameterByName:a,getReferrerURL:S,log:{log:T,logGroup:U,logEntry:A,groupCollapsed:L,groupEnd:P,count:H}};this._MFWidget=M,this._pageEventsByURL=j,this._mf_helpers=W}(),window.__createMFWidgets__(),function(e){"use strict";function t(t,n,i){"addEventListener"in e?t.addEventListener(n,i,!1):"attachEvent"in e&&t.attachEvent("on"+n,i)}function n(t,n,i){"removeEventListener"in e?t.removeEventListener(n,i,!1):"detachEvent"in e&&t.detachEvent("on"+n,i)}function i(){var t,n=["moz","webkit","o","ms"];for(t=0;t<n.length&&!z;t+=1)z=e[n[t]+"RequestAnimationFrame"];z||c("setup","RequestAnimationFrame not supported")}function r(t){var n="Host page: "+t;return e.top!==e.self&&(n=e.parentIFrame&&e.parentIFrame.getId?e.parentIFrame.getId()+": "+t:"Nested host page: "+t),n}function o(e){return L+"["+r(e)+"]"}function a(e){return U[e]?U[e].log:O}function c(e,t){d("log",e,t,a(e))}function s(e,t){d("info",e,t,a(e))}function l(e,t){d("warn",e,t,!0)}function d(t,n,i,r){!0===r&&"object"==typeof e.console&&console[t](o(n),i)}function u(i){function r(){function e(){w(z),f(A)}o("Height"),o("Width"),y(e,z,"init")}function o(e){var t=Number(U[A]["max"+e]),n=Number(U[A]["min"+e]),i=e.toLowerCase(),r=Number(z[i]);c(A,"Checking "+i+" is in range "+n+"-"+t),n>r&&(r=n,c(A,"Set "+i+" to min value")),r>t&&(r=t,c(A,"Set "+i+" to max value")),z[i]=""+r}function a(e){return S.substr(S.indexOf(":")+T+e)}function d(e){c(A,"MessageCallback passed: {iframe: "+z.iframe.id+", message: "+e+"}"),N("messageCallback",{iframe:z.iframe,message:JSON.parse(e)}),c(A,"--")}function u(){var t=document.body.getBoundingClientRect(),n=z.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:n.height,iframeWidth:n.width,clientHeight:Math.max(document.documentElement.clientHeight,e.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,e.innerWidth||0),offsetTop:parseInt(n.top-t.top,10),offsetLeft:parseInt(n.left-t.left,10),scrollTop:e.pageYOffset,scrollLeft:e.pageXOffset})}function k(e,t){function n(){v("Send Page Info","pageInfo:"+u(),e,t)}x(n,32)}function E(){function i(t,n){function i(){U[o]?k(U[o].iframe,o):r()}["scroll","resize"].forEach(function(r){c(o,t+r+" listener for sendPageInfo"),n(e,r,i)})}function r(){i("Remove ",n)}var o=A;(function(){i("Add ",t)})(),U[o].stopPageInfo=r}function F(){U[A]&&U[A].stopPageInfo&&(U[A].stopPageInfo(),delete U[A].stopPageInfo)}function M(e){var t=e.getBoundingClientRect();return g(A),{x:Math.floor(Number(t.left)+Number(H.x)),y:Math.floor(Number(t.top)+Number(H.y))}}function C(t){var n=t?M(z.iframe):{x:0,y:0},i=function(){return{x:Number(z.width)+n.x,y:Number(z.height)+n.y}}();c(A,"Reposition requested from iFrame (offset x:"+n.x+" y:"+n.y+")"),e.top!==e.self?function(){e.parentIFrame?e.parentIFrame["scrollTo"+(t?"Offset":"")](i.x,i.y):l(A,"Unable to scroll to requested position, window.parentIFrame not found")}():function(){H=i,R(),c(A,"--")}()}function R(){!1!==N("scrollCallback",H)?f(A):h()}function I(t){var n=t.split("#")[1]||"",i=decodeURIComponent(n),r=document.getElementById(i)||document.getElementsByName(i)[0];r?function(){var e=M(r);c(A,"Moving to in page link (#"+n+") at x: "+e.x+" y: "+e.y),H={x:e.x,y:e.y},R(),c(A,"--")}():e.top!==e.self?function(){e.parentIFrame?e.parentIFrame.moveToAnchor(n):c(A,"In page link #"+n+" not found and window.parentIFrame not found")}():c(A,"In page link #"+n+" not found")}function N(e,t){return m(A,e,t)}function O(){U[A].firstRun=!1}var S=i.data,z={},A=null;"[iFrameResizerChild]Ready"===S?function(){for(var e in U)v("iFrame requested init",b(e),document.getElementById(e),e)}():function(){return L===(""+S).substr(0,P)&&S.substr(P).split(":")[0]in U}()?(z=function(){var e=S.substr(P).split(":");return{iframe:U[e[0]].iframe,id:e[0],height:e[1],width:e[2],type:e[3]}}(),A=W=z.id,!function(){var e=z.type in{true:1,false:1,undefined:1};return e&&c(A,"Ignoring init message from meta parent page"),e}()&&function(e){var t=!0;return U[e]||(t=!1,l(z.type+" No settings for "+e+". Message was: "+S)),t}(A)&&(c(A,"Received: "+S),function(){var e=!0;return null===z.iframe&&(l(A,"IFrame ("+z.id+") not found"),e=!1),e}()&&function(){var e=i.origin,t=U[A].checkOrigin;if(t&&""+e!="null"&&!function(){return t.constructor===Array?function(){var n=0,i=!1;for(c(A,"Checking connection is from allowed list of origins: "+t);n<t.length;n++)if(t[n]===e){i=!0;break}return i}():function(){var t=U[A].remoteHost;return c(A,"Checking connection is from: "+t),e===t}()}())throw new Error("Unexpected message received from: "+e+" for "+z.iframe.id+". Message was: "+i.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(U[A].firstRun&&O(),z.type){case"close":p(z.iframe);break;case"message":d(a(6));break;case"scrollTo":C(!1);break;case"scrollToOffset":C(!0);break;case"pageInfo":k(U[A].iframe,A),E();break;case"pageInfoStop":F();break;case"inPageLink":I(a(9));break;case"reset":_(z);break;case"init":r(),N("initCallback",z.iframe),N("resizedCallback",z);break;default:r(),N("resizedCallback",z)}}())):s(A,"Ignored: "+S)}function m(e,t,n){var i=null,r=null;if(U[e]){if("function"!=typeof(i=U[e][t]))throw new TypeError(t+" on iFrame["+e+"] is not a function");r=i(n)}return r}function p(e){var t=e.id;c(t,"Removing iFrame: "+t),e.parentNode.removeChild(e),m(t,"closedCallback",t),c(t,"--"),delete U[t]}function g(t){null===H&&(H={x:void 0!==e.pageXOffset?e.pageXOffset:document.documentElement.scrollLeft,y:void 0!==e.pageYOffset?e.pageYOffset:document.documentElement.scrollTop},c(t,"Get page position: "+H.x+","+H.y))}function f(t){null!==H&&(e.scrollTo(H.x,H.y),c(t,"Set page position: "+H.x+","+H.y),h())}function h(){H=null}function _(e){function t(){w(e),v("reset","reset",e.iframe,e.id)}c(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),g(e.id),y(t,e,"reset")}function w(e){function t(t){e.iframe.style[t]=e[t]+"px",c(e.id,"IFrame ("+r+") "+t+" set to "+e[t]+"px")}function n(t){S||"0"!==e[t]||(S=!0,c(r,"Hidden iFrame detected, creating visibility listener"),E())}function i(e){t(e),n(e)}var r=e.iframe.id;U[r]&&(U[r].sizeHeight&&i("height"),U[r].sizeWidth&&i("width"))}function y(e,t,n){n!==t.type&&z?(c(t.id,"Requesting animation frame"),z(e)):e()}function v(e,t,n,i){function r(){var r=U[i].targetOrigin;c(i,"["+e+"] Sending msg to iframe["+i+"] ("+t+") targetOrigin: "+r),n.contentWindow.postMessage(L+t,r)}function o(){s(i,"["+e+"] IFrame("+i+") not found"),U[i]&&delete U[i]}i=i||n.id,U[i]&&function(){n&&"contentWindow"in n&&null!==n.contentWindow?r():o()}()}function b(e){return e+":"+U[e].bodyMarginV1+":"+U[e].sizeWidth+":"+U[e].log+":"+U[e].interval+":"+U[e].enablePublicMethods+":"+U[e].autoResize+":"+U[e].bodyMargin+":"+U[e].heightCalculationMethod+":"+U[e].bodyBackground+":"+U[e].bodyPadding+":"+U[e].tolerance+":"+U[e].inPageLinks+":"+U[e].resizeFrom+":"+U[e].widthCalculationMethod}function k(e,n){function i(){var e=n&&n.id||B.id+N++;return null!==document.getElementById(e)&&(e+=N++),e}function r(){var t=U[d].firstRun,n=U[d].heightCalculationMethod in A;!t&&n&&_({iframe:e,height:0,width:0,type:"init"})}function o(e){if("object"!=typeof e)throw new TypeError("Options is not an object")}function a(e){for(var t in B)B.hasOwnProperty(t)&&(U[d][t]=e.hasOwnProperty(t)?e[t]:B[t])}function s(e){return""===e||"file://"===e?"*":e}var d=function(t){return W=t,""===t&&(e.id=t=i(),O=(n||{}).log,W=t,c(t,"Added missing iframe ID: "+t+" ("+e.src+")")),t}(e.id);!function(){return d in U&&"iFrameResizer"in e}()?(function(t){t=t||{},U[d]={firstRun:!0,iframe:e,remoteHost:e.src.split("/").slice(0,3).join("/")},o(t),a(t),U[d].targetOrigin=!0===U[d].checkOrigin?s(U[d].remoteHost):"*"}(n),function(){c(d,"IFrame scrolling "+(U[d].scrolling?"enabled":"disabled")+" for "+d),e.style.overflow=!1===U[d].scrolling?"hidden":"auto",e.scrolling=!1===U[d].scrolling?"no":"yes"}(),function(){function t(t){1/0!==U[d][t]&&0!==U[d][t]&&(e.style[t]=U[d][t]+"px",c(d,"Set "+t+" = "+U[d][t]+"px"))}function n(e){if(U[d]["min"+e]>U[d]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}n("Height"),n("Width"),t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}(),function(){("number"==typeof U[d].bodyMargin||"0"===U[d].bodyMargin)&&(U[d].bodyMarginV1=U[d].bodyMargin,U[d].bodyMargin=U[d].bodyMargin+"px")}(),function(n){function i(){v("iFrame.onload",n,e),r()}t(e,"load",i),v("init",n,e)}(b(d)),function(){Function.prototype.bind&&(U[d].iframe.iFrameResizer={close:p.bind(null,U[d].iframe),resize:v.bind(null,"Window resize","resize",U[d].iframe),moveToAnchor:function(e){v("Move to anchor","inPageLink:"+e,U[d].iframe,d)},sendMessage:function(e){e=JSON.stringify(e),v("Send Message","message:"+e,U[d].iframe,d)}})}()):l(d,"Ignored iFrame, already setup.")}function x(e,t){null===j&&(j=setTimeout(function(){j=null,e()},t))}function E(){function t(){for(var e in U)!function(e){function t(t){return"0px"===U[e].iframe.style[t]}(function(e){return null!==e.offsetParent})(U[e].iframe)&&(t("height")||t("width"))&&v("Visibility change","resize",U[e].iframe,e)}(e)}function n(e){c("window","Mutation observed: "+e[0].target+" "+e[0].type),x(t,16)}var i=e.MutationObserver||e.WebKitMutationObserver;i&&function(){var e=document.querySelector("body"),t={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};new i(n).observe(e,t)}()}function F(e){function t(){C("Window "+e,"resize")}c("window","Trigger event: "+e),x(t,16)}function M(){function e(){C("Tab Visable","resize")}"hidden"!==document.visibilityState&&(c("document","Trigger event: Visiblity change"),x(e,16))}function C(e,t){for(var n in U)(function(e){return"parent"===U[e].resizeFrom&&U[e].autoResize&&!U[e].firstRun})(n)&&v(e,t,document.getElementById(n),n)}function R(){t(e,"message",u),t(e,"resize",function(){F("resize")}),t(document,"visibilitychange",M),t(document,"-webkit-visibilitychange",M),t(e,"focusin",function(){F("focus")}),t(e,"focus",function(){F("focus")})}function I(){function e(e,n){n&&(function(){if(!n.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==n.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+n.tagName+">")}(),k(n,e),t.push(n))}var t;return i(),R(),function(n,i){switch(t=[],typeof i){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(i||"iframe"),e.bind(void 0,n));break;case"object":e(n,i);break;default:throw new TypeError("Unexpected data type ("+typeof i+")")}return t}}var N=0,O=!1,S=!1,T="message".length,L="[iFrameSizer]",P=L.length,H=null,z=e.requestAnimationFrame,A={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},U={},j=null,W="Host Page",B={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){l("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};e.jQuery&&function(e){e.fn.iFrameResize=function(e){return this.filter("iframe").each(function(t,n){k(n,e)}).end()}}(jQuery),"function"==typeof define&&define.amd?define([],I):"object"==typeof module&&"object"==typeof module.exports?module.exports=I():e.iFrameResize=e.iFrameResize||I()}(window||{});
