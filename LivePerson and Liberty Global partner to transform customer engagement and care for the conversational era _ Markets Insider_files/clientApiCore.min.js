Date.prototype.getMonthOneBased=function(){return this.getMonth()+1};Date.prototype.getFormattedDay=function(){if(!!this.dateFormat===false){MDSnG.Utilities.Logger.log("cannot format day, property dateFormat has to be defined");return this.getDate()}var b="d";var d=new RegExp("["+b+"]+","gi");var c=this.dateFormat.match(d);var a=""+this.getDate();if(c!==null&&typeof c!=="undefined"){if(c.length>1){MDSnG.Utilities.Logger.log("cannot format day, too many occurrences in format string");return this.getFullYear()}if(c[0].length>a.length){while(c[0].length>a.length){a="0"+a}}else{if(c[0].length<a.length){a=a.substr(a.length-c[0].length)}}}return a};Date.prototype.getFormattedMonth=function(){if(!!this.dateFormat===false){MDSnG.Utilities.Logger.log("cannot format month, property dateFormat has to be defined");return this.getMonthOneBased()}var b="m";var d=new RegExp("["+b+"]+","gi");var c=this.dateFormat.match(d);var a=""+this.getMonthOneBased();if(c!==null&&typeof c!=="undefined"){if(c.length>1){MDSnG.Utilities.Logger.log("cannot format month, too many occurrences in format string");return this.getFullYear()}if(c[0].length>a.length){while(c[0].length>a.length){a="0"+a}}else{if(c[0].length<a.length){a=a.substr(a.length-c[0].length)}}}return a};Date.prototype.getFormattedYear=function(){if(!!this.dateFormat===false){MDSnG.Utilities.Logger.log("cannot format year, property dateFormat has to be defined");return this.getFullYear()}var b="y";var d=new RegExp("["+b+"]+","gi");var c=this.dateFormat.match(d);var a=""+this.getFullYear();if(c!==null&&typeof c!=="undefined"){if(c.length>1){MDSnG.Utilities.Logger.log("cannot format year, too many occurrences in format string");return this.getFullYear()}if(c[0].length>a.length){while(c[0].length>a.length){a="0"+a}}else{if(c[0].length<a.length){a=a.substr(a.length-c[0].length)}}}return a};Date.prototype.getFormattedDate=function(){if(!!this.dateFormat===false){MDSnG.Utilities.Logger.log("cannot format date, property dateFormat has to be defined");return[this.getDate(),this.getMonthOneBased(),this.getYear()].join(".")}return this.dateFormat.replace(/[d]+/gi,this.getFormattedDay()).replace(/[m]+/gi,this.getFormattedMonth()).replace(/[y]+/gi,this.getFormattedYear())};var MDSnG;(function(b){var a;(function(e){var d=b.ClientConfiguration.Configuration;var c=(function(){function f(){}f.getConfiguration=function(){return f.clientConfig};f.getConfigurationObject=function(g){var h=undefined;if(f.clientConfig!==undefined&&g in f.clientConfig){h=JSON.parse(JSON.stringify(f.clientConfig[g]))}return h};f.clientConfig=new d().getConfiguration();return f}());e.ConfigManager=c})(a=b.ConfigurationManager||(b.ConfigurationManager={}))})(MDSnG||(MDSnG={}));var MDSnG;(function(b){var a;(function(h){var c=b.ConfigurationManager.ConfigManager;var f;(function(k){k[k.roomID=0]="roomID";k[k.Ask=1]="Ask";k[k.AskSize=2]="AskSize";k[k.AskTimestamp=3]="AskTimestamp";k[k.Bid=4]="Bid";k[k.BidSize=5]="BidSize";k[k.BidTimestamp=6]="BidTimestamp";k[k.Timestamp=7]="Timestamp";k[k.Quotime=8]="Quotime";k[k.CurrencyRate=9]="CurrencyRate";k[k.CurrencyRateDate=10]="CurrencyRateDate";k[k.float1=11]="float1";k[k.float2=12]="float2";k[k.long1=13]="long1";k[k.long2=14]="long2";k[k.Mid=15]="Mid";k[k.MidSize=16]="MidSize";k[k.MidTimestamp=17]="MidTimestamp";k[k.ChangePer=18]="ChangePer";k[k.ChangeAbs=19]="ChangeAbs"})(f||(f={}));var j=(function(){function k(){this.style="decimal";this.currency="";this.curencyDisplay="";this.useGrouping=true;this.precision=2}return k}());h.NumberFormatterOptions=j;var g=(function(){function k(){}k.prototype.formatNumber=function(o,l,n){var m;return m};return k}());h.Formatter=g;var i=(function(){function k(l,m){this.userPageSettings=c.getConfigurationObject("PageSettings");this.enableDebugger=this.userPageSettings.debuggerAlerts||false;this.localeMatcher=!!m===false?l:m.localeMatcher;this.options=!!m!==false?m.options:b.Utilities.Generator.generateDefaultNumberFormatterOptions()}k.prototype.format=function(o,m){var n=o;if(!!o!==false){try{return n.toLocaleString(this.localeMatcher,this.options)}catch(l){if(!!this.enableDebugger&&this.enableDebugger){console.log(l)}return"-"}}else{return"_"}};k.prototype.setLocalMatcher=function(l){this.localeMatcher=l};return k}());h.NumberFormatter=i;var e=(function(){function k(){this.useTwelveHourFormat=false;this.displayDate=false;this.dateFormat="dd.MM.yyyy";this.utcToApplicationOffset=0}return k}());h.DateFormatterOptions=e;var d=(function(){function k(l,m){this.currentTimeZoneOffsetInHours=0;this.localeMatcher=!!m===false?l:m.localeMatcher;this.options=!!m!==false?m.options:b.Utilities.Generator.generateDefaultDateFormatterOptions();this.currentTimeZoneOffsetInHours=new Date().getTimezoneOffset()/60}k.prototype.format=function(m,l){return this.formatTimeStamp("",m,this.options)};k.prototype.formatTimeStamp=function(m,q,p){if(!!q===false){b.Utilities.Logger.log("invalid Date");return}var l=new Date(q);var n="";if(p.displayDate){n=this.formatDate(l,p.dateFormat)+" "}var o=this.formatTime(l,p.useTwelveHourFormat);return n+o};k.prototype.formatDate=function(l,m){l.dateFormat=m;return l.getFormattedDate()};k.prototype.formatTime=function(m,u){var l=this.options.utcToApplicationOffset;if(l!==0&&!!window.utcTimeOffsetToApplication){l=parseFloat(window.utcTimeOffsetToApplication)}var o=m.getHours()+this.currentTimeZoneOffsetInHours+l;var q=m.getMinutes();var s=m.getSeconds();var r="";if(u){r="AM";if(o==12){r="PM"}if(o<0){o=o+12;r="PM"}if(o>12){o=o-12;r="PM"}}else{if(o>23){o=o-24}if(o<0){o=o+24}}var p=q.toString().length<2?"0"+q.toString():q.toString();var t=s.toString().length<2?"0"+s.toString():s.toString();var n=o+":"+p+":"+t;if(o<10){n="0"+n}if(u){n=n+" "+r}return n};k.prototype.setLocalMatcher=function(l){this.localeMatcher=l};return k}());h.DateFormatter=d})(a=b.Formatter||(b.Formatter={}))})(MDSnG||(MDSnG={}));var __extends=(this&&this.__extends)||function(e,c){for(var f in c){if(c.hasOwnProperty(f)){e[f]=c[f]}}function a(){this.constructor=e}e.prototype=c===null?Object.create(c):(a.prototype=c.prototype,new a())};var MDSnG;(function(b){var a;(function(d){var k=b.Formatter.DateFormatter;var p=b.ConfigurationManager.ConfigManager;var v=b.Formatter.NumberFormatter;(function(B){B[B.PushTable=1]="PushTable";B[B.ScrollPushTable=2]="ScrollPushTable";B[B.HighChartsPushTable=3]="HighChartsPushTable";B[B.SnapshotHeadline=4]="SnapshotHeadline";B[B.BoerseOnlineHeaderMarketBox=5]="BoerseOnlineHeaderMarketBox"})(d.AnimationContextType||(d.AnimationContextType={}));var c=d.AnimationContextType;(function(B){B[B.background=0]="background";B[B.color=1]="color"})(d.AnimationType||(d.AnimationType={}));var f=d.AnimationType;(function(B){B[B.positive=0]="positive";B[B.negative=1]="negative";B[B.none=2]="none"})(d.ChangeDirection||(d.ChangeDirection={}));var i=d.ChangeDirection;(function(B){B[B.Number=0]="Number";B[B.Time=1]="Time";B[B.Percent=2]="Percent"})(d.FormatterTypes||(d.FormatterTypes={}));var o=d.FormatterTypes;var l;(function(B){B[B.roomID=0]="roomID";B[B.Ask=1]="Ask";B[B.AskSize=2]="AskSize";B[B.AskTimestamp=3]="AskTimestamp";B[B.Bid=4]="Bid";B[B.BidSize=5]="BidSize";B[B.BidTimestamp=6]="BidTimestamp";B[B.Timestamp=7]="Timestamp";B[B.Quotime=8]="Quotime";B[B.CurrencyRate=9]="CurrencyRate";B[B.CurrencyRateDate=10]="CurrencyRateDate";B[B.float1=11]="float1";B[B.float2=12]="float2";B[B.long1=13]="long1";B[B.long2=14]="long2";B[B.Mid=15]="Mid";B[B.MidSize=16]="MidSize";B[B.MidTimestamp=17]="MidTimestamp";B[B.ChangePer=18]="ChangePer";B[B.ChangeAbs=19]="ChangeAbs";B[B.Spread=20]="Spread";B[B.Trend=21]="Trend";B[B.Last=22]="Last";B[B.LastSize=23]="LastSize";B[B.LastTimestamp=24]="LastTimestamp";B[B.SpreadAbs=25]="SpreadAbs"})(l||(l={}));var x;(function(B){B[B.room=0]="room";B[B.field=1]="field";B[B.table=2]="table";B[B.source=3]="source";B[B.item=4]="item"})(x||(x={}));var r=["div","span"];var h;(function(B){B[B.positive=0]="positive";B[B.negative=1]="negative";B[B.neutral=2]="neutral"})(h||(h={}));var A="Timestamp";var t="$";var u="mdsng";var m=";";var s=["up","down"];var n=(function(){function B(){}B.createFormatter=function(C,F){var D;var E=p.getConfigurationObject("FormatterSettings");if(!!C!==false){switch(C.toLocaleLowerCase()){case l[l.Ask].toLocaleLowerCase():case l[l.AskSize].toLocaleLowerCase():case l[l.Bid].toLocaleLowerCase():case l[l.BidSize].toLocaleLowerCase():case l[l.float1].toLocaleLowerCase():case l[l.float2].toLocaleLowerCase():case l[l.Mid].toLocaleLowerCase():case l[l.ChangeAbs].toLocaleLowerCase():case l[l.Last].toLocaleLowerCase():case l[l.LastSize].toLocaleLowerCase():case l[l.SpreadAbs].toLocaleLowerCase():D=new v(E.NumberFormatter.localeMatcher,E.NumberFormatter);break;case l[l.ChangePer].toLocaleLowerCase():case l[l.Spread].toLocaleLowerCase():D=new v(E.PercentFormatter.localeMatcher,E.PercentFormatter);break;case l[l.AskTimestamp].toLocaleLowerCase():case l[l.BidTimestamp].toLocaleLowerCase():case l[l.MidTimestamp].toLocaleLowerCase():case l[l.LastTimestamp].toLocaleLowerCase():D=new k(E.DateTimeFormatter.localeMatcher,E.DateTimeFormatter);break;default:D=undefined;break}}return D};B.userFormatterSettings=p.getConfigurationObject("FormatterSettings");return B}());d.FormatterFactory=n;var e=(function(){function B(){}B.prototype.geTimeFormatter=function(C){};B.prototype.createDomElementTag=function(D,E){if(!!D===false){return undefined}var C=document.createElement(D);if(!!E!==false){C.innerHTML=E}return C};B.prototype.createTickRowFromPushItem=function(J,L,I){var M=J.cloneNode(true);var E=J.getElementsByTagName("div");for(var C=0,F=E;C<F.length;C++){var D=F[C];var G=D.getAttribute("data-field").toString();if(!!G!==false){var H=this.getRightFormatter(G,I);D.innerHTML=H.format(this.getPushedValue(L,G))}}var K=J.cloneNode(true);return K};B.prototype.isTimeFieldObserver=function(C){var D=false;if(!!C!==false){switch(C.toLocaleLowerCase()){case l[l.AskTimestamp].toLocaleLowerCase():case l[l.BidTimestamp].toLocaleLowerCase():case l[l.MidTimestamp].toLocaleLowerCase():case l[l.LastTimestamp].toLocaleLowerCase():D=true;break;default:D=false}}return D};B.prototype.getRightFormatter=function(F,G){if(!!F===false){return undefined}if(!!F!==false){switch(F.toLocaleLowerCase()){case l[l.Ask].toLocaleLowerCase():case l[l.AskSize].toLocaleLowerCase():case l[l.Bid].toLocaleLowerCase():case l[l.BidSize].toLocaleLowerCase():case l[l.float1].toLocaleLowerCase():case l[l.float2].toLocaleLowerCase():case l[l.ChangeAbs].toLocaleLowerCase():case l[l.Mid].toLocaleLowerCase():case l[l.MidSize].toLocaleLowerCase():case l[l.Last].toLocaleLowerCase():case l[l.LastSize].toLocaleLowerCase():case l[l.SpreadAbs].toLocaleLowerCase():for(var E=0,H=G;E<H.length;E++){var K=H[E];if(K[0]===o[o.Number]){return K[1]}}break;case l[l.AskTimestamp].toLocaleLowerCase():case l[l.BidTimestamp].toLocaleLowerCase():case l[l.MidTimestamp].toLocaleLowerCase():case l[l.LastTimestamp].toLocaleLowerCase():for(var C=0,I=G;C<I.length;C++){var K=I[C];if(K[0]===o[o.Time]){return K[1]}}break;case l[l.ChangePer].toLocaleLowerCase():case l[l.Spread].toLocaleLowerCase():for(var D=0,J=G;D<J.length;D++){var K=J[D];if(K[0]===o[o.Percent]){return K[1]}}break;default:break}}return undefined};B.prototype.getValueToUseForChange=function(G){if(!!G===false){return null}var H=null;var E=["Mid","Bid","Ask"];for(var C=0,F=E;C<F.length;C++){var D=F[C];H=this.getPushedValue(G,D);if(!!H===false){continue}return H}return H};B.prototype.getPushedValue=function(D,C){if(!!C===false){return undefined}switch(C.toLocaleLowerCase()){case l[l.Ask].toLocaleLowerCase():if(!!D.float1){return D[l[l.float1]]}return D[C];case l[l.Bid].toLocaleLowerCase():if(!!D.float2){return D[l[l.float2]]}return D[C];case l[l.Last].toLocaleLowerCase():return D[C];case l[l.Mid].toLocaleLowerCase():return D[C];case l[l.Spread].toLocaleLowerCase():return this.getSpreadValue(D);case l[l.SpreadAbs].toLocaleLowerCase():return this.getSpreadAbsValue(D);case l[l.AskTimestamp].toLocaleLowerCase():case l[l.BidTimestamp].toLocaleLowerCase():case l[l.MidTimestamp].toLocaleLowerCase():case l[l.LastTimestamp].toLocaleLowerCase():case l[l.BidSize].toLocaleLowerCase():case l[l.AskSize].toLocaleLowerCase():case l[l.MidSize].toLocaleLowerCase():case l[l.LastSize].toLocaleLowerCase():var E=D[C];if(!!E===false||E.toNumber()===0){return NaN}return E.toNumber();default:return undefined}};B.prototype.resetColor=function(D,C,E){switch(D){case"background":$(E).animate({backgroundColor:C.defaultBackground},"slow");break;case"color":$(E).animate({color:C.defaultColor},"slow");break;default:E.style.backgroundColor=C.defaultColor}return E};B.prototype.setColor=function(D,F,G,C,E){switch(D){case"background":if(!!F===false){F=C.defaultBackground}if(t in window){$(G).animate({backgroundColor:F},"slow")}else{G.style.backgroundColor=F}E(C.animationType,C,G);break;case"color":if(!!F===false){F=C.defaultColor}if(t in window){$(G).animate({color:F},"slow")}else{G.style.color=F}break;case"none":default:break}return G};B.prototype.componentToHex=function(C){var D=C.toString(16);return D.length===1?"0"+D:D};B.prototype.capitalize=function(C){if(!!C===false){return""}return C.charAt(0).toUpperCase()+C.slice(1)};B.prototype.setAttribute=function(E,C){for(var D in E){if(E.hasOwnProperty(D)){if(D in C){if(E[D].toLocaleString().toLocaleLowerCase()==="false"){C[D]=false;continue}if(E[D].toLocaleString().toLocaleLowerCase()==="true"){C[D]=true;continue}C[D]=E[D]}}}};B.prototype.setFormatterUserAttribute=function(E,C){if(!!C===false){return}if("options" in C){var D=C.options;this.setAttribute(E,D)}};B.prototype.setInlineAnimationAttributes=function(D,C){if(!!C===false){return}this.setAttribute(D,C)};B.prototype.getUserInlineConfiguration=function(L,D){var K={};if(L.length>0){for(var C=0,M=L;C<M.length;C++){var F=M[C];if(!!F===false){continue}var G=F.split(":");if(G.length<2){continue}var I=void 0;var J=G[0].split("-");I=J[0];if(J.length>1){for(var E=1;E<J.length;E++){I+=this.capitalize(J[E])}}var H=!!parseInt(G[1])!==false?parseInt(G[1]):G[1];K[I]=H}}return K};B.prototype.setInlineAnimationSettings=function(G,C){if(!!G===false){return}var F={};var E=G.split(m);var D=this.getUserInlineConfiguration(E,C);this.setInlineAnimationAttributes(D,C)};B.prototype.setUserFormatSettings=function(D,I){if(!!D===false){return}var N={};var G=D.split(m);if(G.length>0){for(var C=0,H=G;C<H.length;C++){var K=H[C];if(!!K===false){continue}var L=K.split(":");if(L.length<2){continue}var E=void 0;var F=L[0].split("-");E=F[0];if(F.length>1){for(var J=1;J<F.length;J++){E+=this.capitalize(F[J])}}var M=parseInt(L[1]);if(!!M!==false){N[E]=M}else{N[E]=L[1]}}this.setFormatterUserAttribute(N,I)}};B.prototype.deepCopy=function(D){try{return JSON.parse(JSON.stringify(D))}catch(C){}return D};B.prototype.isPositiveChange=function(E,G,D){var C=h.neutral;if(!!E===false||!!G===false){return C}var I=D.options.maximumFractionDigits||2;var F=this.deepCopy(E);F=parseFloat(E.toFixed(parseInt(I)));var H=this.deepCopy(G);H=parseFloat(G.toFixed(parseInt(I)));if(F>H){C=h.positive}else{if(F===H){C=h.neutral}else{C=h.negative}}return C};B.prototype.getSpreadValue=function(E){if(!!E===false){return 0}var F=0;var C=E[l[l.Ask]]||NaN;var D=E[l[l.Bid]]||NaN;if(!!C===false||!!D===false||parseInt(D.toLocaleString(),10)===0){return 0}F=(C-D)/D;return F};B.prototype.getSpreadAbsValue=function(E){if(!!E===false){return 0}var F=0;var C=E[l[l.Ask]]||NaN;var D=E[l[l.Bid]]||NaN;if(!!C===false||!!D===false||parseInt(D.toLocaleString(),10)===0){return 0}F=(C-D);return F};return B}());var w=(function(B){__extends(C,B);function C(){B.apply(this,arguments)}C.getInstance=function(){if(this.pushTableInstance===null||this.pushTableInstance===undefined){this.pushTableInstance=new C()}return this.pushTableInstance};C.prototype.updateTitleBar=function(D){$(document).ready(function(){$(document).attr("title",D)})};C.prototype.updateTitle=function(J,G,K,F){if(!!J===false&&!!G===false||!!K===false){return}var H="";var M=(G-K)/K;var E=G.toFixed(2);var D;if(!!F){var I=B.prototype.getRightFormatter.call(this,"Mid",F);if(!!I){E=I.format(G)}var L=B.prototype.getRightFormatter.call(this,"ChangePer",F);if(!!L){D=L.format(M)}else{D=M.toFixed(2)}}H+=J+" "+E+" ("+D+")";if(!!M){this.updateTitleBar(H)}};C.prototype.applyAnimation=function(aG){var M=[];for(var K=1;K<arguments.length;K++){M[K-1]=arguments[K]}this.div=aG;var aE=M[0].length>0?M[0][0]:undefined;var aJ=M[0].length>1?M[0][1]:undefined;var aF=M[0].length>2?M[0][2]:undefined;var aL=aF!==undefined?aF.roomSettings:undefined;this.settings=aL;var L=p.getConfigurationObject("AnimationSettings");var am=aF.settings.formatterSettings||undefined;var aK=aF.settings.pageSettings||undefined;var al=aF!==undefined?aF.formatters:undefined;var an=undefined;var aj=!!this.div?this.div.getAttribute("data-field"):undefined;var ag=!!this.div?this.div.getAttribute("data-animatetitle"):undefined;var aH=!!this.div?this.div.getAttribute("data-name"):undefined;var W="";var af,aa,ab,X,Y;var aC,aI,ay,aD;var av=false;var V;if(!!aj!==false){av=aj.toLocaleLowerCase()===l[l.ChangeAbs].toLocaleLowerCase()||aj.toLocaleLowerCase()===l[l.ChangePer].toLocaleLowerCase();an=B.prototype.getRightFormatter.call(this,aj,al);var aP=!!this.div!==false&&!!this.div.dataset.format!==false?this.div.dataset.format:undefined;if(!!aP!==false&&aP!==undefined){B.prototype.setUserFormatSettings.call(this,aP,an)}else{an=n.createFormatter(aj,am)}af=B.prototype.getPushedValue.call(this,aE,aj);if(av===false&&(af===0||isNaN(af)||!!af===false)){return}if(av&&!!af===false){af=B.prototype.getValueToUseForChange.call(this,aE);if(!!af===false){return}}else{if(this.isTimeFieldObserver(aj)){var S=aj.substr(0,aj.length-A.length);var aw=S.toLocaleLowerCase()===l[l.ChangeAbs].toLocaleLowerCase()||S.toLocaleLowerCase()===l[l.ChangePer].toLocaleLowerCase();if(aw===false){aC=aE!==undefined?B.prototype.getPushedValue.call(this,aE,S):undefined;aI=aJ!==undefined?B.prototype.getPushedValue.call(this,aJ,S):undefined}else{}}else{aC=aE!==undefined?B.prototype.getPushedValue.call(this,aE,aj):undefined;aI=aJ!==undefined?B.prototype.getPushedValue.call(this,aJ,aj):undefined}}this.pushValueSpans=this.div.getElementsByTagName("span");if(!!this.pushValueSpans===false||this.pushValueSpans.length<1){return false}for(var D=0,E=this.pushValueSpans;D<E.length;D++){var aM=E[D];an=B.prototype.getRightFormatter.call(this,aj,al);var ak=(!!aM!==false&&!!aM.dataset.format!==false)?aM.dataset.format:undefined;if(!!ak===false){an=n.createFormatter(aj,am)}else{B.prototype.setUserFormatSettings.call(this,ak,an)}if(!!an===false){return false}var aQ=(!!aM!==false&&!!aM.dataset.animation!==false)?aM.dataset.animation:undefined;if(!!aQ!==false){B.prototype.setInlineAnimationSettings.call(this,aQ,L)}if(av){var aO="";var ai="";var az=aM.dataset.jsvalue;if(!!az===false){continue}ay=parseFloat(az);if(aM.innerHTML.indexOf("(")===-1){aC=parseFloat(aM.innerHTML)}else{var aN=aM.innerHTML.indexOf("(");aO=aM.innerHTML.substring(aN,aN+1);var ah=aM.innerHTML.indexOf(")");ai=aM.innerHTML.substring(ah,ah+1);aC=aM.innerHTML.substring(aN+1,ah-1);aC=parseFloat(aC)}switch(aj.toLowerCase()){case"changeper":if(ay===0){return false}aC=(af-ay)/ay;W=aC!==undefined&&aC<0?L.negativeChangeColor:L.positiveChangeColor;aD=an.format(aC);break;case"changeabs":if(ay===0){return false}aC=af-ay;W=aC!==undefined&&aC<0?L.negativeChangeColor:L.positiveChangeColor;aD=an.format(aC);var O=false;var ax=false;var N="";if(aK.Constants.Jquery in window){for(var F=0,ap=r;F<ap.length;F++){var ao=ap[F];O=O||$(this.div).closest(ao).siblings(".arrow-holder").length>0;if(O){N=ao;break}}if(O&&!!N){var au=$(this.div).closest(N).siblings(".arrow-holder")[0];this.indicatorDiv=$(au).find(N+"."+L.indicatorDivClass)[0]}if(!O){O=$(this.div).closest("table").find("span."+L.indicatorDivClass).length>0;if(O){this.indicatorDiv=$(this.div).closest("table").find("span."+L.indicatorDivClass)[0]}}if(!ax){ax=$(this.div.parentElement).find("span.push-currency").length>0;if(ax){this.currencySpan=$(this.div.parentElement).find("span.push-currency")[0]}}if(!O){O=$(this.div.parentElement).find("span."+L.indicatorDivClass).length>0;if(O){this.indicatorDiv=$(this.div.parentElement).find("span."+L.indicatorDivClass)[0]}}if(!O){O=$(this.div).closest("div.row").find("span."+L.indicatorDivClass).length>0;if(O){this.indicatorDiv=$(this.div).closest("div.row").find("span."+L.indicatorDivClass)[0];O=!!this.indicatorDiv.dataset&&this.indicatorDiv.dataset.room===this.div.dataset.room}}}else{O=this.div.parentElement.getElementsByClassName(L.indicatorDivClass).length>0;this.indicatorDiv=this.div.parentElement.getElementsByClassName(L.indicatorDivClass)}if(!!this.indicatorDiv&&!!this.indicatorDiv.dataset&&this.indicatorDiv.dataset.room){O=!!this.indicatorDiv.dataset&&this.indicatorDiv.dataset.room===this.div.dataset.room}if(ax){if(!!this.currencySpan){X=this.currencySpan.className;Y=this.currencySpan.classList;if(!!Y&&Y.length>0){for(var G=0,Z=Y;G<Z.length;G++){var P=Z[G];var aB="";if(P==="currency"||P==="push-currency"){continue}this.currencySpan=B.prototype.setColor.call(this,L.animationType,W,this.currencySpan,L,B.prototype.resetColor)}}}}if(O){var at=undefined;if(L!==undefined){at=!!aC!==false&&aC<0?L.negChangeIndicator:L.posChangeIndicator}if(!!this.indicatorDiv!==false){aa=this.indicatorDiv.className;ab=this.indicatorDiv.classList;if(!!ab&&ab.length>0){for(var H=0,ac=ab;H<ac.length;H++){var P=ac[H];var aB="";if(P==="icon-set"){continue}if(P.indexOf("image_icon_price")!==-1){aB=!!aC&&aC<0?L.downPic:L.upPic}else{var ad="";for(var I=0,ar=s;I<ar.length;I++){var aq=ar[I];if(P.indexOf(aq)!==-1){ad=aq;break}}if(!!ad){aB=!!aC&&aC<0?P.replace(ad,L.negChangeIndicator):P.replace(ad,L.posChangeIndicator)}}if(!!aB&&aB!==P){ab.remove(P);ab.add(aB)}}}else{if(!!aa!==false){var Q=aa.split(" ");for(var J=0,R=Q;J<R.length;J++){var T=R[J];if(!!T!==false){var U=T.split("-");if(!!U&&U.length>1){if(U[0]==="arrow"&&s.indexOf(U[1])!==-1){var aA=T.replace(U[1],at);aa=aa.replace(T,aA);this.indicatorDiv.setAttribute("class",aa)}}}}}}}}break;default:break}aM.innerText=aO+aD+ai}else{if(!!aI){V=B.prototype.isPositiveChange.call(this,aC,aI,an);switch(V){case h.neutral:W="";break;case h.positive:W=L.positiveChangeColor;break;case h.negative:W=L.negativeChangeColor;break;default:return false}}if(!!af===false){return false}aM.innerText=an.format(af);if(ag==="true"){var ae=aM.dataset.jsvalue;if(!!ae){this.updateTitle(aH,af,ae,al)}}}aM=B.prototype.setColor.call(this,L.animationType,W,aM,L,B.prototype.resetColor)}}aG=this.div;return aG};return C}(e));d.PushTable=w;var y=(function(B){__extends(C,B);function C(){B.apply(this,arguments);this.isFirstRun=true;this.removeLastRow=false;this.tableRows=[];this.currentValues=[]}C.getInstance=function(){if(this.scrollTableInstance===null||this.scrollTableInstance===undefined){this.scrollTableInstance=new C()}return this.scrollTableInstance};C.prototype.createNewTableRow=function(G,F){var H,E,D;H=B.prototype.createDomElementTag.call(this,"div");H.setAttribute("data-field","BidTimestamp");return undefined};C.prototype.changeInitialRow=function(I){var E=this.initialRow.getElementsByTagName("div");for(var H=0;H<E.length;H++){var D=E[H];var F=D.getAttribute("data-field").toString();if(!!F!==false){if(F.toLocaleLowerCase()===l[l.Trend].toLocaleLowerCase()){$(D).removeClass(function(M,L){return(L.match(/\bimage_icon_price\S+/g)||[]).join(" ")});$(D).addClass(this.currentTrendClass)}var G=this.getRightFormatter(F,this.formatters);var J=!!D.dataset.format!==false?D.dataset.format:undefined;if(J!==undefined){B.prototype.setUserFormatSettings.call(this,J,G)}else{G=n.createFormatter(F,this.formatterSettings)}var K=this.getPushedValue(I,F);if(!!K!==false){D.innerHTML=G.format(K)}}}$(this.initialRow).animate({backgroundColor:this.animationSettings.flashColor},"slow");B.prototype.resetColor.call(this,"background",this.animationSettings,this.initialRow)};C.prototype.isValidValues=function(H){var E=this.initialRow.getElementsByTagName("div");var I=true;for(var G=0;G<E.length;G++){var D=E[G];var F=D.getAttribute("data-field").toString();I=I&&!!F!==false;if(F.toLocaleLowerCase()===l[l.Trend].toLocaleLowerCase()){continue}var J=this.getPushedValue(H,F);I=I&&!!J!==false}return I};C.prototype.createTicksFromPushItem=function(F){var G=[];if(t&&t in window){$(this.initialRow).parent().children().each(function(){if(!!$(this).attr("data-source")!==false&&$(this).attr("data-source")===u&&!!$(this).attr("data-table")!==false&&$(this).attr("data-table")===c.ScrollPushTable.toString()){G.push(this)}})}this.tableRows=G;if(this.removeLastRow||this.currentValues.length>=this.maxRow){var E=$(this.initialRow).parent().find("tr:last-child");$(E).remove()}if(this.isValidValues(F)){if(this.isFirstRun===false){$(this.initialRow).removeClass("displaynone");var D=$(this.initialRow).clone(false);B.prototype.resetColor.call(this,"background",this.animationSettings,D);this.changeInitialRow(F);$(this.initialRow).after(D)}else{this.changeInitialRow(F);$(this.initialRow).removeClass("displaynone")}return true}return false};C.prototype.applyAnimation=function(J){var E=[];for(var D=1;D<arguments.length;D++){E[D-1]=arguments[D]}this.divs=J.getElementsByTagName("div");this.initialRow=J;var H=E[0].length>0?E[0][0]:undefined;var L=E[0].length>1?E[0][1]:undefined;var I=E[0].length>2?E[0][2]:undefined;this.roomSettings=I!==undefined?I.roomSettings:undefined;this.pageSettings=I!==undefined?I.pageSettings:undefined;this.observerSettings=I!==undefined?I.settings:undefined;this.animationSettings=p.getConfigurationObject("AnimationSettings");this.formatterSettings=I.settings.formatterSettings||undefined;this.formatters=I.formatters;this.currentTrendClass=this.animationSettings.defaultPic;if(this.observerSettings!=undefined&&!!this.animationSettings!==false){var M=!!J!==false&&!!J.dataset.format!==false?J.dataset.format:undefined;if(!!M){B.prototype.setInlineAnimationSettings.call(this,M,this.animationSettings)}this.maxRow=this.animationSettings.maxRows||undefined;if(this.maxRow===undefined){return false}if(this.isValidValues(H)){this.isFirstRun=this.currentValues.length<1;if(this.isFirstRun===false){var K=L.Bid.toFixed(2);var G=H.Bid.toFixed(2);if(K===G){this.currentTrendClass=this.animationSettings.defaultPic}else{this.currentTrendClass=K<G?this.animationSettings.upPic:this.animationSettings.downPic}}if(this.currentValues.length>=this.maxRow){if(this.removeLastRow===false){this.removeLastRow=true}this.currentValues.pop()}var F=this.createTicksFromPushItem(H);if(F){this.currentValues.push(H)}}}return J};return C}(e));d.ScrollPushTable=y;var q=(function(B){__extends(C,B);function C(){B.apply(this,arguments);this.quotes={}}C.getInstance=function(){if(this.highChartsTableInstance===null||this.highChartsTableInstance===undefined){this.highChartsTableInstance=new C()}return this.highChartsTableInstance};C.prototype.animateHighChart=function(E,F,D){if(!!window.Highcharts!==false||!!D!==false){if(typeof(D)=="object"){if(typeof(D.series)=="object"){var G=false;$.each(D.series,function(R,Q){if(Q.type==="line"&&typeof(Q.pushOptions)==="object"&&typeof(Q.pushOptions.symbol)==="string"){if(!!E!==false&&Q.pushOptions.symbol.toLocaleLowerCase()===E.id.domIdentifier.toLocaleLowerCase()){var O=F!==undefined?F:undefined;var N=void 0,P=void 0;var L=E.settings.formatterSettings;var H=E.settings.animationSettings;if(!!H.useFIFOByAddPointOnChart){G=H.useFIFOByAddPointOnChart}var M=!!L!==false?L.DateTimeFormatter.options.utcToApplicationOffset:0;if(!!O.quotetime!==false&&O.quotetime.length>0){var J=new Date();var K=0;var I=O.quotetime.split(":");if(J.getFullYear()<1900){K=J.getFullYear()+1900}else{K=J.getFullYear()}P=O.quotetime;switch(Q.pushOptions.quoteField.toLowerCase()){case"bid":N=O.bid;break;case"ask":N=O.ask;break;case"last":N=O.last;break;case"reference":N=O.reference;break;case"mid":N=O.mid;break}P=new Date(Date.UTC(K,J.getMonth(),J.getDate(),parseFloat(I[0])+parseFloat(M),parseFloat(I[1]),parseFloat(I[2]))).getTime();if(!!N===false){return}if(!!N!==false){Q.addAnimatedPoint({id:"po_"+E.id.domIdentifier+"_"+P,x:P,y:parseFloat(N)},true,G,true)}else{if(Q.options.data.length>1){if(typeof(Q.options.data[Q.options.data.length-1][1])!="undefined"){Q.addAnimatedPoint({id:"po_"+E.id.domIdentifier+"_"+P,x:P,y:Q.options.data[Q.options.data.length-1][1]},true,G,true)}else{Q.addAnimatedPoint({id:"po_"+E.id.domIdentifier+"_"+P,x:P,y:Q.options.data[Q.options.data.length-1].y},true,G,true)}}}}}}})}}}};C.prototype.applyAnimation=function(Q){var E=[];for(var D=1;D<arguments.length;D++){E[D-1]=arguments[D]}this.div=Q;var O=E[0].length>0?E[0][0]:undefined;var S=E[0].length>1?E[0][1]:undefined;var P=E[0].length>2?E[0][2]:undefined;var T=P!==undefined?P.roomSettings:undefined;this.settings=T;var K=P!==undefined?P.formatters:undefined;var L=p.getConfigurationObject("FormatterSettings")||P.settings.formatterSettings;this.timeoffset=!!L.DateTimeFormatter!==false?L.DateTimeFormatter.options.utcToApplicationOffset:0;if(!!K[0]!==false&&!!K[0][1]!==false){K[0][1].setLocalMatcher("en-US")}var M=undefined;var J=!!this.div!==false?this.div.getAttribute("data-field"):undefined;var F=J.concat(A);var G="";var I;var H;var N,R;if(!!J!==false){M=B.prototype.getRightFormatter.call(this,J,K);if(!!this.timeFormatter===false){this.timeFormatter=B.prototype.getRightFormatter.call(this,l[l.BidTimestamp],K)}N=O!==undefined?B.prototype.getPushedValue.call(this,O,J):undefined;R=S!==undefined?B.prototype.getPushedValue.call(this,S,J):undefined;I=O!==undefined?B.prototype.getPushedValue.call(this,O,J):undefined;H=O!==undefined?B.prototype.getPushedValue.call(this,O,F):undefined;if(!!I===false||!!H===false){return false}G=R!==undefined&&R>N?T.negativeChangeColor:T.positiveChangeColor;this.quotes[J.toLowerCase()]=I;this.quotes.quotetime=this.timeFormatter.format(H);this.quotes.timestamp=H;if(this.div.id in window&&!!window[this.div.id]!==false){this.chart=window[this.div.id];this.animateHighChart(P,this.quotes,this.chart)}}return this.div};return C}(e));d.HighChartsPushTable=q;var z=(function(B){__extends(C,B);function C(){B.apply(this,arguments)}C.getInstance=function(){if(this.snapshotHeadline===null||this.snapshotHeadline===undefined){this.snapshotHeadline=new C()}return this.snapshotHeadline};C.prototype.applyAnimation=function(W){var H=[];for(var F=1;F<arguments.length;F++){H[F-1]=arguments[F]}this.div=W;var U=H[0].length>0?H[0][0]:undefined;var Y=H[0].length>1?H[0][1]:undefined;var V=H[0].length>2?H[0][2]:undefined;var aa=V!==undefined?V.roomSettings:undefined;this.settings=aa;var G=V.settings.animationSettings||undefined;var Q=V.settings.formatterSettings||undefined;var Z=V.settings.pageSettings||undefined;var P=V!==undefined?V.formatters:undefined;var R=undefined;var O=!!this.div!==false?this.div.getAttribute("data-field"):undefined;var J="";var L,K;var T,X,S;if(!!O!==false){R=B.prototype.getRightFormatter.call(this,O,P);var ae=!!this.div!==false&&!!this.div.dataset.format!==false?this.div.dataset.format:undefined;if(!!ae!==false&&ae!==undefined){B.prototype.setUserFormatSettings.call(this,ae,R)}else{R=n.createFormatter(O,Q)}L=B.prototype.getPushedValue.call(this,U,O);if(!!L===false){return false}if(this.isTimeFieldObserver(O)){var I=O.substr(0,O.length-A.length);T=U!==undefined?B.prototype.getPushedValue.call(this,U,I):undefined;X=Y!==undefined?B.prototype.getPushedValue.call(this,Y,I):undefined}else{T=U!==undefined?B.prototype.getPushedValue.call(this,U,O):undefined;X=Y!==undefined?B.prototype.getPushedValue.call(this,Y,O):undefined}J=X!==undefined&&X>T?G.negativeChangeColor:G.positiveChangeColor;this.pushValueSpans=W.getElementsByClassName(G.pushValueSpanClass);if(!!R!==false){if(this.pushValueSpans!==undefined&&this.pushValueSpans.length>0){this.pushValueSpans[0].innerText=R.format(L);this.pushValueSpans[0]=B.prototype.setColor.call(this,G.animationType,J,this.pushValueSpans[0],G,B.prototype.resetColor)}else{if(!!W.firstChild!==false){W.firstChild.nodeValue=R.format(L)}else{W.innerText=R.format(L);W=B.prototype.setColor.call(this,G.animationType,J,W,G,B.prototype.resetColor)}}}}else{this.pushValueSpans=W.getElementsByTagName("span");if(!!this.pushValueSpans===false||this.pushValueSpans.length<1){return false}this.indicatorDivs=(Z.Constants.Jquery in window)?$("div[class^='"+G.indicatorDivClass+"'"):document.getElementsByClassName(G.indicatorDivClass);for(var D=0,E=this.pushValueSpans;D<E.length;D++){var ab=E[D];O=ab.dataset.field;if(!!O!==false){var ad="";var N="";R=B.prototype.getRightFormatter.call(this,O,P);var ae=!!ab!==false&&!!ab.dataset.format!==false?ab.dataset.format:undefined;if(ae!==undefined){B.prototype.setUserFormatSettings.call(this,ae,R)}else{R=n.createFormatter(O,Q)}S=ab.dataset.jsvalue;if(!!S===false){continue}S=parseFloat(ab.dataset.jsvalue);if(ab.innerHTML.indexOf("(")===-1){T=parseFloat(ab.innerHTML)}else{var ac=ab.innerHTML.indexOf("(");ad=ab.innerHTML.substring(ac,ac+1);var M=ab.innerHTML.indexOf(")");N=ab.innerHTML.substring(M,M+1);T=ab.innerHTML.substring(ac+1,M-1);T=parseFloat(ab.innerHTML)}L=B.prototype.getPushedValue.call(this,U,"Mid");if(!!L!==false){switch(O.toLowerCase()){case"changeper":T=(L-S)/S;J=T!==undefined&&T<0?G.negativeChangeColor:G.positiveChangeColor;T=R.format(T);break;case"changeabs":T=L-S;J=T!==undefined&&T<0?G.negativeChangeColor:G.positiveChangeColor;if(G!==undefined){K=!!T!==false&&T<0?G.indicatorDivClass+" "+G.negChangeIndicator:G.indicatorDivClass+" "+G.posChangeIndicator}T=R.format(T);if(this.indicatorDivs!==undefined&&this.indicatorDivs.length>0){this.indicatorDivs[0].className=K}break;default:break}ab.innerText=ad+T+N;ab=B.prototype.setColor.call(this,G.animationType,J,ab,G,B.prototype.resetColor)}}}}W=this.div;return W};return C}(e));d.SnapshotHeadline=z;var g=(function(B){__extends(C,B);function C(){B.apply(this,arguments)}C.getInstance=function(){if(this._instance===null||this._instance===undefined){this._instance=new C()}return this._instance};C.prototype.applyAnimation=function(ac){var H=[];for(var F=1;F<arguments.length;F++){H[F-1]=arguments[F]}this.div=ac;var aa=H[0].length>0?H[0][0]:undefined;var ae=H[0].length>1?H[0][1]:undefined;var ab=H[0].length>2?H[0][2]:undefined;var ag=ab!==undefined?ab.roomSettings:undefined;this.settings=ag;var G=p.getConfigurationObject("AnimationSettings");var S=ab.settings.formatterSettings||undefined;var af=ab.settings.pageSettings||undefined;var R=ab!==undefined?ab.formatters:undefined;var T=undefined;var P=!!this.div!==false?this.div.getAttribute("data-field"):undefined;var K="";var M,L;var Y,ad,W,Z;var U=false;var J;if(!!P!==false){U=P.toLocaleLowerCase()===l[l.ChangePer].toLocaleLowerCase();T=B.prototype.getRightFormatter.call(this,P,R);var ak=!!this.div!==false&&!!this.div.dataset.format!==false?this.div.dataset.format:undefined;if(!!ak!==false&&ak!==undefined){B.prototype.setUserFormatSettings.call(this,ak,T)}else{T=n.createFormatter(P,S)}M=B.prototype.getPushedValue.call(this,aa,P);if(U===false&&(M===0||isNaN(M))){return false}if(U&&!!M===false){M=B.prototype.getPushedValue.call(this,aa,"Mid")}else{if(this.isTimeFieldObserver(P)){var I=P.substr(0,P.length-A.length);var V=I.toLocaleLowerCase()===l[l.ChangeAbs].toLocaleLowerCase()||I.toLocaleLowerCase()===l[l.ChangePer].toLocaleLowerCase();if(V===false){Y=aa!==undefined?B.prototype.getPushedValue.call(this,aa,I):undefined;ad=ae!==undefined?B.prototype.getPushedValue.call(this,ae,I):undefined}else{}}else{Y=aa!==undefined?B.prototype.getPushedValue.call(this,aa,P):undefined;ad=ae!==undefined?B.prototype.getPushedValue.call(this,ae,P):undefined}}this.pushValueSpans=this.div.getElementsByTagName("span");if(!!this.pushValueSpans===false||this.pushValueSpans.length<1){return false}for(var D=0,E=this.pushValueSpans;D<E.length;D++){var ah=E[D];T=B.prototype.getRightFormatter.call(this,P,R);var Q=(!!ah!==false&&!!ah.dataset.format!==false)?ah.dataset.format:undefined;if(!!Q===false){T=n.createFormatter(P,S)}else{B.prototype.setUserFormatSettings.call(this,Q,T)}if(!!T===false){return false}if(U){var aj="";var O="";var X=ah.dataset.jsvalue;if(!!X===false){continue}W=parseFloat(X);if(ah.innerHTML.indexOf("(")===-1){Y=parseFloat(ah.innerHTML)}else{var ai=ah.innerHTML.indexOf("(");aj=ah.innerHTML.substring(ai,ai+1);var N=ah.innerHTML.indexOf(")");O=ah.innerHTML.substring(N,N+1);Y=ah.innerHTML.substring(ai+1,N-1);Y=parseFloat(Y)}switch(P.toLowerCase()){case"changeper":if(W===0){return false}Y=(M-W)/W;K=Y!==undefined&&Y<0?"red":"green";Z=T.format(Y);break;default:break}ah.innerText=aj+Z+O}else{if(ad!==undefined){J=B.prototype.isPositiveChange.call(this,Y,ad,T);switch(J){case h.positive:K="green";break;case h.negative:K="red";break;default:return false}}if(!!M===false){return false}ah.innerText=T.format(M)}this.colorizeBorders(ah,K);this.colorizeChangeValueBackground(ah,K);if(U){this.colorizeChangeValue(ah,Y)}}}ac=this.div;return ac};C.prototype.colorizeBorders=function(F,D){var E=$(F).closest("li");E.removeClass("red").removeClass("green");E.addClass(D)};C.prototype.colorizeChangeValueBackground=function(F,E){var D=$(F).closest("li").find("div[data-field='changeper']");D.addClass("bg"+E);setTimeout(function(){D.removeClass("bg"+E)},1000)};C.prototype.colorizeChangeValue=function(D,E){$(D).removeClass("red").removeClass("green");if(E>0){$(D).addClass("green")}else{if(E==0){$(D).addClass("black")}else{$(D).addClass("red")}}};return C}(e));d.BoerseOnlineHeaderMarketBox=g;var j=(function(){function B(C){this.strategy=C}B.prototype.executeAnimation=function(F){var E=[];for(var C=1;C<arguments.length;C++){E[C-1]=arguments[C]}var D=this.strategy.applyAnimation(F,E);return D};return B}());d.Context=j})(a=b.AnimationManager||(b.AnimationManager={}))})(MDSnG||(MDSnG={}));var MDSnG;(function(a){var b;(function(r){var s=a.Formatter.NumberFormatter;var k=a.Formatter.DateFormatter;var d=a.AnimationManager.Context;var e=a.AnimationManager.AnimationContextType;var w=a.AnimationManager.PushTable;var E=a.AnimationManager.ScrollPushTable;var p=a.AnimationManager.HighChartsPushTable;var F=a.AnimationManager.SnapshotHeadline;var f=a.AnimationManager.AnimationType;var i=a.AnimationManager.ChangeDirection;var n=a.AnimationManager.FormatterTypes;var g=a.AnimationManager.BoerseOnlineHeaderMarketBox;(function(I){I[I.ISIN=0]="ISIN";I[I.Valor=1]="Valor";I[I.OrderbookId=2]="OrderbookId"})(r.IdentifierTypes||(r.IdentifierTypes={}));var q=r.IdentifierTypes;(function(I){I[I.ASK=0]="ASK";I[I.BID=1]="BID";I[I.ALL=2]="ALL";I[I.MID=3]="MID";I[I.CUSTOM=4]="CUSTOM"})(r.Templates||(r.Templates={}));var H=r.Templates;(function(I){I[I.roomID=0]="roomID";I[I.Ask=1]="Ask";I[I.AskSize=2]="AskSize";I[I.AskTimestamp=3]="AskTimestamp";I[I.Bid=4]="Bid";I[I.BidSize=5]="BidSize";I[I.BidTimestamp=6]="BidTimestamp";I[I.Timestamp=7]="Timestamp";I[I.Quotime=8]="Quotime";I[I.CurrencyRate=9]="CurrencyRate";I[I.CurrencyRateDate=10]="CurrencyRateDate";I[I.float1=11]="float1";I[I.float2=12]="float2";I[I.long1=13]="long1";I[I.long2=14]="long2";I[I.Mid=15]="Mid";I[I.MidSize=16]="MidSize";I[I.MidTimestamp=17]="MidTimestamp";I[I.ChangePer=18]="ChangePer";I[I.ChangeAbs=19]="ChangeAbs";I[I.Spread=20]="Spread";I[I.Trend=21]="Trend";I[I.Last=22]="Last";I[I.LastSize=23]="LastSize";I[I.LastTimestamp=24]="LastTimestamp"})(r.Fields||(r.Fields={}));var m=r.Fields;(function(I){I[I.json=0]="json";I[I.protocolbuffers=1]="protocolbuffers"})(r.Streams||(r.Streams={}));var G=r.Streams;(function(I){I[I.join=0]="join";I[I.leave=1]="leave"})(r.Action||(r.Action={}));var c=r.Action;(function(I){I[I.room=0]="room";I[I.field=1]="field";I[I.table=2]="table";I[I.source=3]="source";I[I.item=4]="item"})(r.RoomHtmlTagAttributes||(r.RoomHtmlTagAttributes={}));var z=r.RoomHtmlTagAttributes;var x="#d41414";var o="#279627";var j=(function(){function I(K,J,L){if(L===void 0){L=G[G.protocolbuffers]}this.serverUri=K;this.serverPort=J;this.stream=L}return I}());r.ConnectionOptions=j;var l=(function(){function I(){}return I}());r.Expression=l;var v=(function(){function I(){}return I}());r.PushRequestItempOptions=v;var t=(function(){function I(L,J,K){if(K===void 0){K=H.ALL}this.expressions=[];this.simulate=false;if(!!L!==false){this.type=L}if(!!J!==false){this.id=J}this.template=H[K]}I.prototype.isValidPaylod=function(){throw new Error("Not implemented")};I.prototype.getExchangeIdFrompushId=function(){var K=NaN;if(!!this.pushId!==false){var L=this.pushId.substring(5,8);var J=parseInt(L,16);K=J}return K};return I}());r.Payload=t;var u=(function(){function I(J){this.action=J.action;this.payload=J.payload}return I}());r.PushRequestItem=u;var h=(function(){function I(){this.changeDirection=i[i.none]}return I}());var B=(function(){function I(J){this.domIdentifier=J;this.setPropertyFields()}I.prototype.setPropertyFields=function(){var J=this.domIdentifier.split("-");this.searchIdType=J.length>0?J[0]:"";this.searchId=J.length>1?J[1]:"";this.providerCode=J.length>2?J[2]:"";this.exchangeCode=J.length>3?J[3]:"";this.currencyCode=J.length>4?J[4]:""};I.prototype.getSearchIdType=function(){return this.searchIdType};I.prototype.getSearchId=function(){return this.searchId};I.prototype.getExchange=function(){return this.exchangeCode};I.prototype.getCurrency=function(){return this.currencyCode};return I}());r.RoomObserverDomIdentifier=B;var C=(function(){function I(){}return I}());r.RoomObserverSettings=C;var A=(function(){function I(J,K){this.visible=true;this.changeDirection=i[i.none];this.currentColor=i[i.none];this.formatters=[];this.animationContextType=e[a.AnimationManager.AnimationContextType.PushTable];this.settings=new C();this.domElements=[];this.id=J;this.roomSettings=K}I.prototype.setAnimationContext=function(J){switch(J.toLocaleLowerCase()){case"pushtable":case"1":this.animationContextType=e[a.AnimationManager.AnimationContextType.PushTable];break;case"scrolltable":case"2":this.animationContextType=e[a.AnimationManager.AnimationContextType.ScrollPushTable];break;case"highstockchart":case"3":this.animationContextType=e[a.AnimationManager.AnimationContextType.HighChartsPushTable];break;case"snapshotHeadline":case"4":this.animationContextType=e[a.AnimationManager.AnimationContextType.SnapshotHeadline];break;case"boerseonlineheadermarketbox":case"5":this.animationContextType=e[a.AnimationManager.AnimationContextType.BoerseOnlineHeaderMarketBox];break;default:this.animationContextType=e[a.AnimationManager.AnimationContextType.PushTable]}this.animationContext=this.getAnimationContext()};I.prototype.getAnimationContextByContexteType=function(J){if(!!J===false){return undefined}switch(J.toLocaleLowerCase()){case"pushtable":case"1":return new d(w.getInstance());case"scrolltable":case"2":return new d(E.getInstance());case"highstockchart":case"3":return new d(p.getInstance());case"snapshotHeadline":case"4":return new d(F.getInstance());case"boerseonlineheadermarketbox":case"5":return new d(g.getInstance());default:return undefined}};I.prototype.getAnimationContext=function(){switch(this.animationContextType){case e[e.PushTable]:return new d(w.getInstance());case e[e.ScrollPushTable]:return new d(E.getInstance());case e[e.HighChartsPushTable]:return new d(p.getInstance());case e[e.SnapshotHeadline]:return new d(F.getInstance());case e[e.BoerseOnlineHeaderMarketBox]:return new d(g.getInstance());default:return new d(new w())}};I.prototype.mockDoUpdate=function(K,M,L){if(!!K!==false&&!!L!==false){var N=K.getAttribute("data-table");if(this.animationContext===undefined){this.animationContext=this.getAnimationContextByContexteType(N)}if(!!this.animationContext!==false){var J=this.animationContext.executeAnimation(K,L,M,this);return J}}return null};I.prototype.doUpdate=function(J,L,K){if(!!J!==false&&!!K!==false){var M=J.getAttribute("data-table");if(this.animationContext===undefined){this.animationContext=this.getAnimationContextByContexteType(M)}if(!!this.animationContext!==false){this.animationContext.executeAnimation(J,K,L,this)}}};I.prototype.mockObserverUpdate=function(N){this.oldValue=this.newValue;this.newValue=N;var O=[];for(var K=0,J=this.domElements;K<J.length;K++){var M=J[K];if(w.getInstance().isTimeFieldObserver(M.getAttribute("data-field"))){continue}var L=this.mockDoUpdate(M,this.oldValue,this.newValue);O[M.getAttribute("data-field").toLocaleLowerCase()]=L}return O};I.prototype.update=function(M){this.oldValue=this.newValue;this.newValue=M;for(var K=0,J=this.domElements;K<J.length;K++){var L=J[K];this.doUpdate(L,this.oldValue,this.newValue)}};I.prototype.isFormatterSetted=function(M){var N=false;for(var K=0,J=this.formatters;K<J.length;K++){var L=J[K];if(M===L[0]){N=true;break}}return N};I.prototype.setRoomElementFormatter=function(J){if(!!J!==false){switch(J.toLocaleLowerCase()){case m[m.Ask].toLocaleLowerCase():case m[m.AskSize].toLocaleLowerCase():case m[m.Bid].toLocaleLowerCase():case m[m.BidSize].toLocaleLowerCase():case m[m.float1].toLocaleLowerCase():case m[m.float2].toLocaleLowerCase():case m[m.Mid].toLocaleLowerCase():case m[m.ChangeAbs].toLocaleLowerCase():case m[m.Last].toLocaleLowerCase():case m[m.LastSize].toLocaleLowerCase():if(this.isFormatterSetted(n[n.Number])===false){this.formatters.push([n[n.Number],new s(this.roomSettings.locale,this.settings.formatterSettings.NumberFormatter)])}break;case m[m.ChangePer].toLocaleLowerCase():case m[m.Spread].toLocaleLowerCase():if(this.isFormatterSetted(n[n.Percent])===false){this.formatters.push([n[n.Percent],new s(this.roomSettings.locale,this.settings.formatterSettings.PercentFormatter)])}break;case m[m.AskTimestamp].toLocaleLowerCase():case m[m.BidTimestamp].toLocaleLowerCase():case m[m.MidTimestamp].toLocaleLowerCase():case m[m.LastTimestamp].toLocaleLowerCase():if(this.isFormatterSetted(n[n.Time])===false){this.formatters.push([n[n.Time],new k(this.roomSettings.locale,this.settings.formatterSettings.DateTimeFormatter)])}break;default:break}}};I.prototype.setFormatter=function(){for(var L=0,J=this.domElements;L<J.length;L++){var P=J[L];var Y=P.getAttribute("data-table");if(!!Y!==false){switch(Y){case e.PushTable.toString():case e.BoerseOnlineHeaderMarketBox.toString():var R=P.getAttribute("data-"+z[z.field]);if(!!R!==false){this.setRoomElementFormatter(R)}break;case e.SnapshotHeadline.toString():var W=P.getAttribute("data-"+z[z.field]);if(!!W!==false){this.setRoomElementFormatter(W)}else{var U=P.getElementsByTagName("span");if(!!U===false||U.length<1){break}for(var K=0,V=U;K<V.length;K++){var X=V[K];W=X.dataset.field;if(!!W!==false){this.setRoomElementFormatter(W)}}}break;case e.ScrollPushTable.toString():if("children" in P){var Q=P.children;if(!!Q!==false&&Q.length>0){for(var T=0;T<Q.length;T++){var N=Q[T];var O=void 0;if(!!N.getAttribute("data-"+z[z.field])===false&&N.nodeName==="TD"){O=N.getElementsByTagName("div");if(!!O!==false&&O.length>0){var S=O[0].getAttribute("data-"+z[z.field]);if(!!S!==false){this.setRoomElementFormatter(S)}}}}}}break;case e.HighChartsPushTable.toString():var M=P.getAttribute("data-"+z[z.field]);if(!!M!==false){this.setRoomElementFormatter(M)}this.formatters.push([n[n.Time],new k(this.roomSettings.locale)]);break;default:break}}}};I.prototype.setRoomElements=function(J){this.domElements=J};return I}());r.RoomObserver=A;var D=(function(){function I(){this.positiveChangeColor=o;this.negativeChangeColor=x;this.animationType=f[f.background]}I.prototype.setAnimationType=function(J){this.animationType=J};I.prototype.getAnimationType=function(){return this.animationType};return I}());r.RoomSettings=D;var y=(function(){function I(K,J){this.roomSettings=K||undefined;this.pushItem=J||undefined;this.observers=[];if(!!this.pushItem!==false&&!!this.roomSettings!==false){this.id=this.pushItem.payload.room;this.newValue=this.newValue}}I.prototype.mockRoomUpdate=function(J){this.oldValue=this.newValue;this.newValue=J;var K=this.mockNotifyObservers(this.newValue);return K};I.prototype.update=function(J){this.oldValue=this.newValue;this.newValue=J;this.notifyObservers(this.newValue)};I.prototype.addRoomObserver=function(J){if(!!J!==false){this.observers.push(J)}};I.prototype.removeRoomObser=function(J){this.observers.splice(this.observers.indexOf(J),1)};I.prototype.notifyObservers=function(J){this.observers.forEach(function(K){K.update(J)})};I.prototype.mockNotifyObservers=function(K){var J=[];this.observers.forEach(function(L){var M=L.mockObserverUpdate(K);J[K.Room]=M});return J};I.prototype.getObsevers=function(){return this.observers};return I}());r.Room=y})(b=a.Model||(a.Model={}))})(MDSnG||(MDSnG={}));var MDSnG;(function(a){var b;(function(A){var c=a.AnimationManager.AnimationContextType;var k=a.Model.Fields;var f=a.Formatter.DateFormatter;var x=a.Model.RoomObserver;var d=a.ConfigurationManager.ConfigManager;var t=a.Formatter.NumberFormatter;var u="#d41414";var p="#279627";var w="R";var h=location.hostname;var g=false;var r="Content/Scripts/MDSnG/libs/";var v=false;var j=600;var m=500;var l="#F7F6C2";var q="$";var n=(function(){function B(){}B.createFormatter=function(C,F){var D;var E=d.getConfigurationObject("FormatterSettings");if(!!C!==false){switch(C.toLocaleLowerCase()){case k[k.Ask].toLocaleLowerCase():case k[k.AskSize].toLocaleLowerCase():case k[k.Bid].toLocaleLowerCase():case k[k.BidSize].toLocaleLowerCase():case k[k.float1].toLocaleLowerCase():case k[k.float2].toLocaleLowerCase():case k[k.Mid].toLocaleLowerCase():case k[k.ChangeAbs].toLocaleLowerCase():D=new t(E.NumberFormatter.localeMatcher,E.NumberFormatter);break;case k[k.ChangePer].toLocaleLowerCase():D=new t(E.PercentFormatter.localeMatcher,E.PercentFormatter);break;case k[k.AskTimestamp].toLocaleLowerCase():case k[k.BidTimestamp].toLocaleLowerCase():D=new f(E.DateTimeFormatter.localeMatcher,E.DateTimeFormatter);break;default:D=undefined;break}}return D};B.userFormatterSettings=d.getConfigurationObject("FormatterSettings");return B}());A.FormatterFactory=n;var y=(function(){function B(){}B.createObserver=function(E,F,C,G){if(!!C===false){return undefined}var D=undefined;D=new x(E,F);D.setAnimationContext(C);switch(C){case c.ScrollPushTable.toString():D.settings=G;break;case c.HighChartsPushTable.toString():D.visible=false;D.settings=G;break;case c.SnapshotHeadline.toString():D.settings=G;break;case c.PushTable.toString():default:D.settings=G;break}return D};return B}());A.RoomObserverFactory=y;var s=(function(){function B(){}B.getParameterByName=function(C,F){if(!F){F=window.location.href}C=C.replace(/[\[\]]/g,"\\$&");var D=new RegExp("[?&]"+C+"(=([^&#]*)|&|#|$)"),E=D.exec(F);if(!E){return null}if(!E[2]){return""}return decodeURIComponent(E[2].replace(/\+/g," "))};B.getRoomIds=function(F){var E=[];if(!!F){var G=F.split(",");for(var C=0,H=G;C<H.length;C++){var D=H[C];if(D.indexOf("R")===0){E.push(D)}}}return E};B.enableLogByBypass=function(){var D=false;var C=B.getParameterByName("bypass");var E=B.getParameterByName("roomids");if(!!C&&C.toLocaleLowerCase()===B.userPageSettings.byPass.toLocaleLowerCase()){D=true}if(!!E){B.registeredRooms=B.getRoomIds(E)}return D};B.log=function(E,D){if(D===void 0){D=false}var C=B.enableLogByBypass()||false;B.isByPassAuthorization=C;if(D||this.enableDebugger||C){if(typeof window.console!=="undefined"){var F=E;switch(typeof(E)){case"string":window.console.log(F);break;case"object":window.console.log("%O",F);break;default:window.console.log(F)}}}};B.userPageSettings=d.getConfigurationObject("PageSettings");B.enableDebugger=B.userPageSettings.debuggerAlerts||false;B.registeredRooms=[];B.isByPassAuthorization=false;return B}());A.Logger=s;var o=(function(){function B(){}B.buildGuid=function(){var C=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};return C()+C()+"-"+C()+"-"+C()+"-"+C()+"-"+C()+C()+C()};B.generateDefaultRoomSettings=function(){var C={negativeChangeColor:u,positiveChangeColor:p,animationType:"background",locale:"de-DE"};return C};B.generateDefaultPageSettings=function(){var C={domain:h,debuggerAlerts:g,remoteAlerts:v,fadeTime:j,flashTime:m,librairiesPath:r,locale:"de-DE",flashColor:l,roomSettings:this.generateDefaultRoomSettings(),onServerError:function(){}};return C};B.generateDefaultNumberFormatterOptions=function(){return{localeMatcher:"en-US",options:{style:"decimal",precision:2,useGrouping:true}}};B.generateDefaultDateFormatterOptions=function(){return{useTwelveHourFormat:false,displayDate:false,dateFormat:"dd.MM.yyyy",utcToApplicationOffset:0}};return B}());A.Generator=o;var i=(function(){function B(){this.collectedRoomDivs=[];this.collectedDomElements=[]}B.prototype.setClientConfig=function(C){this.clientConfigurationObject=C};B.prototype.getRoomHtmlElemByRoomId=function(C){return document.getElementById(C)};B.prototype.getRoomDivsByRoomId=function(G){var E=[];if(!!G===false){s.log("request item not found")}for(var D=0,C=this.collectedRoomDivs;D<C.length;D++){var F=C[D];var H=$(F).attr("data-room");if(H===G){E.push(F)}}return E};B.prototype.getRoomElementsByRoomId=function(H){var F=[];if(!!H===false){s.log("request item not found")}for(var D=0,C=this.collectedDomElements;D<C.length;D++){var G=C[D];var E=G.getAttribute("data-room");if(E===H){F.push(G)}}return F};B.prototype.getRoomElementsByRoomIdAndAnimationType=function(J,E){var H=[];if(!!J===false){s.log("request item not found")}for(var D=0,C=this.collectedDomElements;D<C.length;D++){var I=C[D];var F=I.getAttribute("data-room");var G=I.getAttribute("data-table");if(F===J&&G===E){H.push(I)}}return H};B.prototype.collectRoomRequestDivs=function(){var C=[];if(q&&q in window){$("div[data-room*='R']").each(function(){C.push(this)})}this.collectedRoomDivs=C;return this.collectedRoomDivs};B.prototype.collectRoomElements=function(){var C=[];if(q&&q in window){$("div[data-table='"+c.HighChartsPushTable+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)});$("div[data-table='"+c.PushTable+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)});$("tr[data-table='"+c.ScrollPushTable+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)});$("div[data-table='"+c.SnapshotHeadline+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)});$("div[data-table='"+c.BoerseOnlineHeaderMarketBox+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)})}this.collectedDomElements=C;return this.collectedDomElements};B.prototype.getRoomDivAttributeValue=function(D,C){if(!!D===false||!!C===false){return undefined}return $(D).attr(C.toLowerCase())};B.prototype.getRoomElementAttributeValue=function(D,C){if(!!D===false){return undefined}return D.getAttribute(C.toLowerCase())};return B}());A.DomWatcher=i;var e=(function(){function B(){}B.builTemplate=function(){var E=[];for(var D=0;D<arguments.length;D++){E[D-0]=arguments[D]}var G="";for(var C=0,F=E;C<F.length;C++){var H=F[C];G+="${"+a.Model.Fields[H]+"}"}return G};return B}());A.CustomTemplateBuilder=e;var z=(function(){function B(){}B.getConfigurationObject=function(D,C){var E=undefined;if(D!==undefined&&C in D){E=JSON.parse(JSON.stringify(D[C]))}return E};return B}());A.UserConfigManager=z})(b=a.Utilities||(a.Utilities={}))})(MDSnG||(MDSnG={}));var MDSnG;(function(MDSnG){var ConnectionManager;(function(ConnectionManager_1){var Generator=MDSnG.Utilities.Generator;var Logger=MDSnG.Utilities.Logger;var ioConnectProtocolString="//";var JQUERY_NAMESPACE="$";var SOCKETIO_NAMESPACE="io";var ConnectionManager=(function(){function ConnectionManager(options,clientConfigObj){this.connectionOption=options;this.socket=undefined;if(!!clientConfigObj!==false){this.configObject=clientConfigObj}}ConnectionManager.prototype.mockConnect=function(){if(!!this.roomManager===false){this.roomManager=new MDSnG.RoomManager.RoomManager(this);Logger.log("connected successfully for testing ....");this.roomManager.registerRooms();Logger.log(this.roomManager)}};ConnectionManager.prototype.connect=function(){var _this=this;var socketIoNamespace=this.configObject!==undefined?this.configObject.PageSettings.Constants.SocketIo:SOCKETIO_NAMESPACE;var mdsngStarter=document.getElementById("mdsng_starter");if(!!mdsngStarter&&!!mdsngStarter.dataset.disable){this.configObject.PageSettings.disablePush=JSON.parse(mdsngStarter.dataset.disable)}if(!!socketIoNamespace!==false&&socketIoNamespace in window&&(this.configObject.PageSettings.disablePush==undefined||this.configObject.PageSettings.disablePush===false)){this.roomManager=new MDSnG.RoomManager.RoomManager(this);if(!!this.socket===false||!!this.socket.connected===false||(!!this.socket&&this.socket.connected===false)){this.socket=eval(socketIoNamespace);if(!!this.connectionOption.sessionGuid===false){this.connectionOption.sessionGuid=Generator.buildGuid()}var ioConnectUrl=ioConnectProtocolString+this.connectionOption.serverUri+((this.connectionOption.serverPort)?":"+this.connectionOption.serverPort:"");this.socket=io.connect(ioConnectUrl,{query:"stream="+this.connectionOption.stream+"&token="+this.getMD5(),forceNew:true});this.socket.on("connect",function(){Logger.log("socket connected successfull ....");_this.roomManager.registerRooms();for(var _i=0,_a=_this.roomManager.activeRequestMessages;_i<_a.length;_i++){var requestMessage=_a[_i];_this.sendRoomRequestObject(requestMessage)}});this.socket.on("q",function(message){_this.roomManager.onRoomUpdate(message,true)})}else{if(this.socket.connected===true){Logger.log("registering the items again on opening connection....");this.roomManager.registerRooms();for(var _i=0,_a=this.roomManager.activeRequestMessages;_i<_a.length;_i++){var requestMessage=_a[_i];this.sendRoomRequestObject(requestMessage)}}else{Logger.log("connecting the socket agin and registering the items....");if(!!this.connectionOption.sessionGuid===false){this.connectionOption.sessionGuid=Generator.buildGuid()}var ioConnectUrl=ioConnectProtocolString+this.connectionOption.serverUri+((this.connectionOption.serverPort)?":"+this.connectionOption.serverPort:"");this.socket=io.connect(ioConnectUrl,{query:"stream="+this.connectionOption.stream+"&token="+this.getMD5(),forceNew:true});this.roomManager.registerRooms();for(var _b=0,_c=this.roomManager.activeRequestMessages;_b<_c.length;_b++){var requestMessage=_c[_b];this.sendRoomRequestObject(requestMessage)}}}}};ConnectionManager.prototype.disconnect=function(socketObject){if(!!socketObject===false){this.leaveAll();this.socket.disconnect();return}if("disconnect" in socketObject){socketObject.disconnect()}};ConnectionManager.prototype.leaveAll=function(){if(!!this.socket){var jsonObject={action:"leaveAll"};this.socket.emit("leaveAll",jsonObject)}};ConnectionManager.prototype.reconnect=function(){this.leaveAll();this.connect()};ConnectionManager.prototype.getConnectionSocket=function(){return this.socket};ConnectionManager.prototype.addInstrument=function(requestItem){if(!!requestItem!==false){this.sendRoomRequestObject(requestItem)}};ConnectionManager.prototype.sendRoomRequestObject=function(requestItem){if(this.isSocketConnected()){this.socket.emit("join",requestItem)}};ConnectionManager.prototype.isSocketConnected=function(){return this.socket.connected};ConnectionManager.prototype.sentResetRequest=function(){this.socket.emit("reset",{action:"reset"})};ConnectionManager.prototype.getDateFromResponseHeaders=function(){var req=new XMLHttpRequest();req.open("GET",document.location,false);req.send(null);return req.getResponseHeader("date")};ConnectionManager.prototype.getMD5=function(){var year=new Date().getUTCFullYear();var month=new Date().getUTCMonth().toString().length>1||new Date().getUTCMonth()===9?parseInt((new Date().getUTCMonth()+1).toString()):"0"+parseInt((new Date().getUTCMonth()+1).toString());var date=new Date().getUTCDate().toString().length>1?parseInt(new Date().getUTCDate().toString()):"0"+parseInt(new Date().getUTCDate().toString());var hour=new Date().getUTCHours().toString().length>1?parseInt(new Date().getUTCHours().toString()):"0"+parseInt(new Date().getUTCHours().toString());var currentDataTime=""+year+month+date+hour;return md5("fInAnzEn_"+currentDataTime)};return ConnectionManager}());ConnectionManager_1.ConnectionManager=ConnectionManager})(ConnectionManager=MDSnG.ConnectionManager||(MDSnG.ConnectionManager={}))})(MDSnG||(MDSnG={}));var MDSnG;(function(MDSnG){var RoomManager;(function(RoomManager_1){var Logger=MDSnG.Utilities.Logger;var UserConfigManager=MDSnG.ConfigurationManager.ConfigManager;var Room=MDSnG.Model.Room;var RoomObserverSettings=MDSnG.Model.RoomObserverSettings;var RoomSettings=MDSnG.Model.RoomSettings;var Fields=MDSnG.Model.Fields;var Generator=MDSnG.Utilities.Generator;var DomWatcher=MDSnG.Utilities.DomWatcher;var RoomObserverDomIdentifier=MDSnG.Model.RoomObserverDomIdentifier;var AnimationType=MDSnG.AnimationManager.AnimationType;var Templates=MDSnG.Model.Templates;var Payload=MDSnG.Model.Payload;var Expression=MDSnG.Model.Expression;var PROTOBUF_NAMESPACE="dcodeIO";var RoomManager=(function(){function RoomManager(connectionManager){this.roomSettings=new RoomSettings();this.activeRooms=[];this.activeRequestMessages=[];if("configObject" in connectionManager){this.clientConfigurationObject=UserConfigManager.getConfiguration()}this.pageSettings=UserConfigManager.getConfigurationObject("PageSettings")!==undefined?UserConfigManager.getConfigurationObject("PageSettings"):Generator.generateDefaultPageSettings();this.roomSettings.locale=this.pageSettings.locale;this.roomSettings.animationType=this.pageSettings.animationType!==undefined?this.pageSettings.animationType:AnimationType[AnimationType.background];this.domWatcher=new DomWatcher();this.domWatcher.setClientConfig(this.clientConfigurationObject);this.connectionManager=connectionManager;var decodeIoNamespace=this.domWatcher.clientConfigurationObject.PageSettings!==undefined?this.domWatcher.clientConfigurationObject.PageSettings.Constants.ProtoBuffer:PROTOBUF_NAMESPACE;if(!!decodeIoNamespace!==false&&decodeIoNamespace in window){dcodeIO=eval(dcodeIO);this.protoBuffer=dcodeIO.ProtoBuf;this.protoMessage=this.protoBuffer.loadProtoFile({root:this.pageSettings.librairiesPath,file:"rtPush.txt"}).build("RtPush")}}RoomManager.prototype.setClientConfig=function(configObject){this.clientConfigurationObject=configObject};RoomManager.prototype.mockOnRoomUpdate=function(jsonResultItem){var updatedObject=null;if(!!jsonResultItem){updatedObject=this.getRoomItemByRoomId(jsonResultItem.Room).mockRoomUpdate(jsonResultItem)}return updatedObject};RoomManager.prototype.onRoomUpdate=function(message,delay){var jsonResultItem=null;if(!!message){if(this.connectionManager.connectionOption.stream===MDSnG.Model.Streams[MDSnG.Model.Streams.protocolbuffers]){try{jsonResultItem=this.protoMessage.decode(message);if(!!this.getRoomItemByRoomId(jsonResultItem.Room)===false){this.roomItem=new Room(this.roomSettings,jsonResultItem);this.activeRooms.push(this.roomItem)}else{this.getRoomItemByRoomId(jsonResultItem.Room).update(jsonResultItem)}var randomnumber=Math.floor(Math.random()*3);if(randomnumber%2===1){if(Logger.isByPassAuthorization){if(Logger.registeredRooms.indexOf(jsonResultItem.Room)!==-1){var updateObj={};updateObj.RoomId=jsonResultItem.Room;updateObj.NewValue=jsonResultItem;Logger.log(updateObj)}else{if(Logger.registeredRooms.length===0){Logger.log(this)}}}else{Logger.log(this)}}}catch(e){}}}return jsonResultItem};RoomManager.prototype.createPushRequestItem=function(identifierType,id,currency,exchangeCode){var options=new MDSnG.Model.PushRequestItempOptions();options.action=MDSnG.Model.Action[MDSnG.Model.Action.join];var payload=new MDSnG.Model.Payload(identifierType,id);payload.currency=currency;payload.exchange=exchangeCode;payload.simulate=this.pageSettings.simulate;payload.room="test";options.payload=payload;return new MDSnG.Model.PushRequestItem(options)};RoomManager.prototype.getTemplateByTemplateAttribute=function(templateData){var template;switch(templateData.toLocaleLowerCase()){case Templates[Templates.ALL].toLocaleLowerCase():template=Templates.ALL;break;case Templates[Templates.ASK].toLocaleLowerCase():template=Templates.ASK;break;case Templates[Templates.BID].toLocaleLowerCase():template=Templates.BID;break;case Templates[Templates.MID].toLocaleLowerCase():template=Templates.MID;break;case Templates[Templates.CUSTOM].toLocaleLowerCase():template=Templates.CUSTOM;break;default:template=Templates.ALL;break}return template};RoomManager.prototype.createRequestMessageFromDomElement=function(roomElement,exchangeSwap){var options=new MDSnG.Model.PushRequestItempOptions();options.action=MDSnG.Model.Action[MDSnG.Model.Action.join];var roomId=roomElement.getAttribute("data-room");var field=roomElement.getAttribute("data-field");var exchangeMarketSwap=null;if(!!exchangeSwap){exchangeMarketSwap=this.getExchangeSwapByRoomId(exchangeSwap,roomId)}var payloadId=roomElement.getAttribute("data-item");var template=Templates.ALL;var templateData=undefined;var payload;if("dataset" in roomElement){if(!!roomElement.dataset.template!==false){templateData=roomElement.dataset.template}}else{templateData=roomElement.getAttribute("data-template")}if(!!templateData!==false){template=this.getTemplateByTemplateAttribute(templateData)}if(!!payloadId!==false){if(template===Templates.CUSTOM){}var payloadParts=[];if(payloadId.toLocaleLowerCase().indexOf("y")===0){payloadParts=payloadId.split("-");payload=new Payload();payload.exchangeSwap=exchangeMarketSwap;payload.pushId=payloadParts.length>0?payloadParts[0]:null;if(payloadParts.length>1){payload.currency=payloadParts[1]}}else{payloadParts=payloadId.split("-");var identifierType=payloadParts.length>0?payloadParts[0]:undefined;var identifier=payloadParts.length>1?payloadParts[1]:undefined;payload=new MDSnG.Model.Payload(identifierType,identifier,template);payload.provider=payloadParts.length>2?payloadParts[2]:null;payload.exchange=payloadParts.length>3?payloadParts[3]:null;payload.currency=payloadParts.length>4?payloadParts[4]:null;payload.exchangeSwap=exchangeMarketSwap}payload.simulate=this.pageSettings.simulate;payload.room=roomId;options.payload=payload;return new MDSnG.Model.PushRequestItem(options)}return undefined};RoomManager.prototype.getRoomItemByRoomId=function(roomId){var found=undefined;if(!!roomId===false){Logger.log("request item not found")}for(var _i=0,_a=this.activeRooms;_i<_a.length;_i++){var requestItem=_a[_i];if("id" in requestItem&&requestItem.id===roomId){found=requestItem;break}}return found};RoomManager.prototype.isObserverAlreadySetted=function(observerId,room,animationType){var result=false;if(room.getObsevers().length<1){return false}if(!!room!==false&&!!observerId!==false){for(var _i=0,_a=room.getObsevers();_i<_a.length;_i++){var observ=_a[_i];if("id" in observ&&observ.id.searchIdType===observerId.searchIdType&&MDSnG.AnimationManager.AnimationContextType[observ.animationContextType].toString()===animationType){result=true;break}}}return result};RoomManager.prototype.isRequestItemAlreadySetted=function(requestItem){for(var _i=0,_a=this.activeRequestMessages;_i<_a.length;_i++){var item=_a[_i];if(!!item){if(item.payload.pushId===requestItem.payload.pushId){return true}}}return false};RoomManager.prototype.getExchangeSwap=function(){var exchangeSwapDiv=document.getElementById("exchangeSwap");var exchageSwap=[];var room,days,start,exchangeId;if(!exchangeSwapDiv){return undefined}var spans=Array.prototype.slice.call(exchangeSwapDiv.getElementsByTagName("span"));for(var _i=0,spans_1=spans;_i<spans_1.length;_i++){var span=spans_1[_i];room=span.dataset.room;days=this.buildSwapDaysArray(span.dataset.days);start=span.dataset.from;exchangeId=span.dataset.exchange;if(room&&days&&start&&exchangeId){var swapItem={days:days,timeFrom:start,exchangeId:exchangeId,roomId:room};exchageSwap.push(swapItem)}}return exchageSwap};RoomManager.prototype.getExchangeSwapByRoomId=function(exchangeSwapItems,roomId){var exchangeSwap=[];if(!!roomId){for(var _i=0,exchangeSwapItems_1=exchangeSwapItems;_i<exchangeSwapItems_1.length;_i++){var exchangeSwapItem=exchangeSwapItems_1[_i];if(exchangeSwapItem.roomId===roomId){var item={};item.days=exchangeSwapItem.days;item.timeFrom=exchangeSwapItem.timeFrom;item.exchangeId=exchangeSwapItem.exchangeId;exchangeSwap.push(item)}}}return exchangeSwap};RoomManager.prototype.buildSwapDaysArray=function(daysString){var daysArray=[];var days=daysString.split(",");for(var _i=0,days_1=days;_i<days_1.length;_i++){var day=days_1[_i];daysArray.push(parseInt(day))}return daysArray};RoomManager.prototype.isChangeField=function(field){return field.toLocaleLowerCase()===Fields[Fields.ChangeAbs].toLocaleLowerCase()||field.toLocaleLowerCase()===Fields[Fields.ChangePer].toLocaleLowerCase()};RoomManager.prototype.isTimeField=function(field){var result=false;if(!!field!==false){switch(field.toLocaleLowerCase()){case Fields[Fields.AskTimestamp].toLocaleLowerCase():case Fields[Fields.BidTimestamp].toLocaleLowerCase():case Fields[Fields.MidTimestamp].toLocaleLowerCase():case Fields[Fields.LastTimestamp].toLocaleLowerCase():result=true;break;default:result=false}}return result};RoomManager.prototype.registerRooms=function(){var elements=this.domWatcher.collectRoomElements();var exchageSwap=this.getExchangeSwap();for(var _i=0,elements_1=elements;_i<elements_1.length;_i++){var domElement=elements_1[_i];var roomId=domElement.getAttribute("data-room");if(this.getRoomItemByRoomId(roomId)===undefined){var requestItem=this.createRequestMessageFromDomElement(domElement,exchageSwap);if(requestItem!==undefined){this.activeRequestMessages.push(requestItem);var newRoom=new Room(this.roomSettings,requestItem);var concernedRoomElements=this.domWatcher.getRoomElementsByRoomId(newRoom.pushItem.payload.room);for(var _a=0,concernedRoomElements_1=concernedRoomElements;_a<concernedRoomElements_1.length;_a++){var roomElement=concernedRoomElements_1[_a];var field=this.domWatcher.getRoomElementAttributeValue(roomElement,"data-field");var factor=parseFloat("1");var factorString=this.domWatcher.getRoomElementAttributeValue(roomElement,"data-factor");if(!!factorString!==false){factor=parseFloat(factorString)}if(factor!==1){var expression=new Expression();expression.target=Fields[Fields.float1];expression.fn="${"+field.toLocaleLowerCase()+"}*"+factorString;requestItem.payload.expressions.push(expression)}var paylodId=this.domWatcher.getRoomElementAttributeValue(roomElement,"data-item");var maxRows=this.domWatcher.getRoomElementAttributeValue(roomElement,"data-maxrows");var animationType=this.domWatcher.getRoomElementAttributeValue(roomElement,"data-table");if(!!paylodId===false){continue}var observerId=new RoomObserverDomIdentifier(paylodId);if(!!observerId!==false&&this.isObserverAlreadySetted(observerId,newRoom,animationType)===false){var settings=new RoomObserverSettings();settings.animationSettings=UserConfigManager.getConfigurationObject("AnimationSettings");settings.formatterSettings=UserConfigManager.getConfigurationObject("FormatterSettings");settings.pageSettings=UserConfigManager.getConfigurationObject("PageSettings");if(!!maxRows!==false){settings.maxRows=parseInt(maxRows);settings.flashColor=this.pageSettings.flashColor||undefined;settings.flashTime=this.pageSettings.flashTime||undefined;settings.fadeTime=this.pageSettings.fadeTime||undefined}var observer=MDSnG.Utilities.RoomObserverFactory.createObserver(observerId,this.roomSettings,animationType,settings);observer.setRoomElements(this.domWatcher.getRoomElementsByRoomIdAndAnimationType(roomId,animationType));observer.setFormatter();newRoom.addRoomObserver(observer)}}this.activeRooms.push(newRoom)}}}};return RoomManager}());RoomManager_1.RoomManager=RoomManager})(RoomManager=MDSnG.RoomManager||(MDSnG.RoomManager={}))})(MDSnG||(MDSnG={}));/*
 * @license  Version 2.0.0 (02-03-2018)
 */
var MDSnG;(function(b){var a;(function(d){var g=b.Utilities.Logger;var j=b.Utilities.UserConfigManager;var f=b.Model.ConnectionOptions;var e=b.ConfigurationManager.ConfigManager;var i="mdsng-api01.cloud1.finanzennet.de";var h=9000;var c=(function(){function k(n,m){this.isRealtimePage=false;this.configurationManager=new e();this.configObject=e.getConfiguration();if(j.getConfigurationObject(this.configObject,"ConnectionOptions")!==undefined){var l=j.getConfigurationObject(this.configObject,"ConnectionOptions");this.connectionOptions=new f(l.serverUri,l.serverPort,l.stream)}else{this.connectionOptions=new f(i,h)}}k.prototype.connect=function(){if(!!this.connectionOptions!==false){this.connectionManager=new b.ConnectionManager.ConnectionManager(this.connectionOptions,this.configObject);this.connectionManager.connect()}else{g.log("the connection failed ....")}};k.prototype.disconnect=function(l){this.connectionManager.disconnect()};k.prototype.addInstrument=function(l){this.connectionManager.socket.emit("join",l)};k.prototype.createPushRequestItem=function(o,n,l,m){return this.connectionManager.roomManager.createPushRequestItem(o,n,l,m)};k.prototype.removeInstrument=function(l){};k.prototype.getConnectionSocket=function(){};k.prototype.leaveAll=function(){this.connectionManager.leaveAll()};k.prototype.reconnect=function(){this.connectionManager.reconnect()};k.prototype.mockConnect=function(){if(!!this.connectionOptions!==false){this.connectionManager=new b.ConnectionManager.ConnectionManager(this.connectionOptions,this.configObject);this.connectionManager.mockConnect()}else{g.log("mockConnction failed ....")}};return k}());d.ClientApi=c})(a=b.ClientApi||(b.ClientApi={}))})(MDSnG||(MDSnG={}));