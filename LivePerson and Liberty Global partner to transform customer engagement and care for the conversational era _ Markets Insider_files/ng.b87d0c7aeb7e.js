!function(){"use strict";angular.module("app",["ngAnimate","ngResource","ngSanitize","ngCookies","ngRoute","ui.bootstrap","google.places","app.ui","app.utils","app.api","app.autoLoan","app.brokerage","app.carInsurance","app.cds","app.creditCard","app.mortgage","app.personalLoan","app.savings","app.studentLoan"])}(),function(){"use strict";angular.module("app.api",[])}(),function(){"use strict";angular.module("app.utils",[])}(),function(){"use strict";angular.module("app.ui",["app.ui.svgMap","app.ui.utils"])}(),function(){"use strict";angular.module("app.ui.svgMap",[])}(),function(){"use strict";angular.module("app.ui.utils",[])}(),function(){"use strict";angular.module("app.autoLoan",["app.api","app.utils","app.ui"])}(),function(){"use strict";angular.module("app.carInsurance",["app.api","app.utils","app.ui"])}(),function(){"use strict";angular.module("app.brokerage",["app.api","app.utils","app.ui"])}(),function(){"use strict";angular.module("app.cds",["ui.bootstrap","app.api","app.ui","app.utils"])}(),function(){"use strict";angular.module("app.creditCard",["app.api","app.utils","app.ui"])}(),function(){"use strict";angular.module("app.mortgage",["app.api","app.utils","app.ui"])}(),function(){"use strict";angular.module("app.personalLoan",["app.api","app.utils","app.ui"])}(),function(){"use strict";angular.module("app.savings",["ui.bootstrap","app.api","app.ui","app.utils"])}(),function(){"use strict";angular.module("app.studentLoan",["app.api","app.utils","app.ui"])}(),function(){"use strict";function e(e,t,n,r){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.defaults.xsrfCookieName="csrftoken",e.defaults.xsrfHeaderName="X-CSRFToken",e.defaults.headers.common["x-api-key"]="yuH27H1QId6afXAojow6Tafi7Vw9v1spaLD5Yznw",t.when("/mortgage/learn-more",{templateUrl:"/static/mortgages/ng/mortgage-takeover/mortgage-takeover.html",controller:"MortgageTakeoverController"}).when("/mortgage/search",{templateUrl:"/static/mortgages/ng/mortgage-takeover/mortgage-search.html",controller:"MortgageTakeoverController"}),n.debugInfoEnabled(!1),"function"==typeof history.pushState&&r.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:!1})}angular.module("app").config(e),e.$inject=["$httpProvider","$routeProvider","$compileProvider","$locationProvider"]}(),function(){"use strict";function e(e){function t(t){var n={};return angular.copy(t.results,n),delete n.password,angular.forEach(n,function(e,t){"user__"==t.substring(0,6)&&delete n[t]}),mf.track("submit-flow",n),e.post("/api/flows/submission",t)}function n(t,n){var r="/api/flows/submission/"+t;return e.put(r,n)}return{create:t,update:n}}angular.module("app.api").factory("submissionService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t){return{api:e("/api/mortgages/:type/:term?zipcode=:zipcode&loan_amount=:loan_amount&points=:points&fico_score=:fico_score&loan_to_value_ratio=:loan_to_value_ratio&placement=:placement&foreign_referrer=:referrer",{referrer:t.getURLEncodedForeignReferrer}),options:{terms:{fixed:[{id:"30yr_fixed",label:"30 Year Fixed",term:30},{id:"20yr_fixed",label:"20 Year Fixed",term:20},{id:"15yr_fixed",label:"15 Year Fixed",term:15},{id:"va_30yr",label:"VA 30 Year",term:30}],arm:[{id:"3-1yr_arm",label:"3-1 Year ARM",term:30},{id:"5-1yr_arm",label:"5-1 Year ARM",term:30},{id:"7-1yr_arm",label:"7-1 Year ARM",term:30}]},ficos:[{id:"650",label:"Fair - 650"},{id:"700",label:"Good - 700"},{id:"800",label:"Excellent - 800"}],points:[{id:"0",label:"0"},{id:"1",label:"1"},{id:"2",label:"2"},{id:"3",label:"All"}]}}}angular.module("app.api").factory("mortgageService",e),e.$inject=["$resource","foreignReferrerService"]}(),function(){"use strict";function e(e,t){function n(e,n){function r(e){return e.data}function o(t){console.log(e+"getProductListFailed: "+t.data)}return n||(n="unknown"),t.get(a+e+"?placement="+n).then(r).catch(o)}function r(e){function n(e){return e.data}function r(e){console.log("getProductFailed: "+e)}return t.get(a+"products/"+e).then(n).catch(r)}var a="/api/";return{getProductList:n,getProduct:r}}angular.module("app.api").factory("productsService",e),e.$inject=["$injector","$http"]}(),function(){"use strict";function e(e){return e("/api/content_groups/:id",{})}angular.module("app.api").factory("contentGroupService",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){function t(t,n,r){if(!n)return!1;n.campaign,n.campaign_reporting_id,n.city,n.state,n.postal_code,n.landing_page,n.num_pages_viewed;return e.post("/api/accounts/email-capture",{email:t})}return{capture:t}}angular.module("app.api").factory("emailCaptureService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t){return e("/api/products/:id?foreign_referrer=:referrer",{referrer:t.getURLEncodedForeignReferrer})}angular.module("app.api").factory("productService",e),e.$inject=["$resource","foreignReferrerService"]}(),function(){"use strict";function e(e,t){function n(n,r){function a(e){return e.data}function o(e){console.log(n+"getFeedFailed: "+e.data)}r||(r="unknown");var i=t.getURLEncodedForeignReferrer();return e.get(n+"&placement="+r+"&foreign_referrer="+i).then(a).catch(o)}return{get:n}}angular.module("app.api").factory("productFeedService",e),e.$inject=["$http","foreignReferrerService"]}(),function(){"use strict";function e(e){return e("/api/flows/:slug")}angular.module("app.api").factory("flowService",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e,t){function n(){return{protocol:window.location.protocol,domain:window.location.host,screen_width:screen.width||"",screen_height:screen.height||"",tz_offset:(new Date).getTimezoneOffset()}}return{elements:{},obj:{},trackStandard:function(e,t,n){this.trackClick(e,t,n),this.trackImpression(e,t,n),this.obj[n]=t},trackClick:function(e,n,r){this.elements[r]={click:!1};var a=this;e.bind("click",function(){a.elements[r].click?a.elements[r].click&&mf.track("second-click",n):(t.$emit("experiment:linkClick",n),mf.track("click",n),a.elements[r].click=!0)})},trackHover:function(e,t){var n;e.bind("mouseenter",function(e){clearTimeout(n),n=setTimeout(function(){mf.track("hover",t)},1e3)}),e.bind("mouseleave",function(){clearTimeout(n)})},trackImpression:function(t,n,r){this.elements[r]={impression:!1};var a,o=this,i=angular.element(t).offset().top;angular.element(e).bind("scroll",function(){clearTimeout(a),a=setTimeout(function(){if(!o.elements[r].impression){var t=angular.element(e).scrollTop(),a=angular.element(e).height(),l=t+a;if(t<i&&i<l){n.recent_rpm,n.product_name;mf.track("impression",n),o.elements[r].impression=!0}}},200)})},trackCustom:function(e,t,n){e.bind(n,function(){mf.track(n,t)})},createImpression:function(e,t){this.elements[t]&&this.elements[t].impression||(mf.track("impression",e),this.elements[t]={impression:!0})},trackWidgetPageView:function(e,t){mf.track("widget-pageview",angular.merge({},t,n()))},trackWidgetImpression:function(t,r,a){function o(){clearTimeout(i),i=setTimeout(function(){if(!l.elements[a].widgetImpression){var t=angular.element(e).scrollTop(),i=angular.element(e).height(),u=t+i;t<c&&c<u&&(mf.track("widget-impression",angular.merge({},MF,r,n())),l.elements[a].widgetImpression=!0,angular.element(e).off("scroll",o))}},200)}this.elements[a]={widgetImpression:!1};var i,l=this,c=angular.element(t).offset().top;angular.element(e).on("scroll",o)},trackWidgetRecommendationClick:function(e,t){e.bind("click",function(){mf.track("widget-recommendation-click",angular.merge({},t,n()))})}}}angular.module("app.utils").factory("analyticsService",e),e.$inject=["$window","$rootScope"]}(),function(){"use strict";function e(){return{slugify:function(e){return e?(e=e.replace(/[^\w\s-]/g,"").trim().toLowerCase(),e.replace(/[-\s]+/g,"-")):""}}}angular.module("app.utils").factory("slugService",e)}(),function(){"use strict";function e(e){return function(t,n){var r=n||55;return t.length>r?e("limitTo")(t,r-1)+"...":t}}angular.module("app.utils").filter("truncate",e),e.$inject=["$filter"]}(),function(){"use strict";function e(e){return function(t){return e.slugify(t)}}angular.module("app.utils").filter("slugify",e),e.$inject=["slugService"]}(),function(){"use strict";function e(e){return{convertClick:function(t,n){e({url:"/experiments/convert",method:"GET",params:{experiment:t,product:n}})}}}angular.module("app.utils").factory("experimentConversion",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function t(e){return!!/(^\d{5}$)/.test(e)}function n(t){return e({method:"GET",url:"http://ziptasticapi.com/"+t,headers:{"Content-Type":"text/plain","X-Requested-With":void 0}})}return{validate:t,getLocation:n}}angular.module("app.utils").factory("zipcodeService",e),e.$inject=["$http"]}(),function(){"use strict";function e(){function e(e){var t=[],n=new Date,r=n.getFullYear();e&&(r-=18);for(var a=r;a>r-101;a--)t.push({id:a,label:a});return t}function t(){return[{id:1,label:"January"},{id:2,label:"February"},{id:3,label:"March"},{id:4,label:"April"},{id:5,label:"May"},{id:6,label:"June"},{id:7,label:"July"},{id:8,label:"August"},{id:9,label:"September"},{id:10,label:"October"},{id:11,label:"November"},{id:12,label:"December"}]}function n(){for(var e=[],t=1;t<32;t++)e.push({id:t,label:t});return e}function r(e,t,n){var r=new Date(e,t-1,n);return r&&r.getMonth()+1==t&&r.getDate()==Number(n)}return{years:e,months:t,days:n,valid:r}}angular.module("app.utils").factory("dateService",e)}(),function(){"use strict";function e(e,t,n){function r(){t.$apply(function(){a.resolve(window.d3)})}var a=n.defer(),o=e[0].createElement("script");return o.type="text/javascript",o.async=!0,o.src="/static/bower_components/d3/d3.min.js",o.onreadystatechange=function(){"complete"===this.readyState&&r()},o.onload=r,e[0].getElementsByTagName("body")[0].appendChild(o),{d3:function(){return a.promise}}}angular.module("app.utils").factory("d3Service",e),e.$inject=["$document","$rootScope","$q"]}(),function(){"use strict";function e(e){return function(t,n){return e("number")(t,n)+"%"}}angular.module("app.utils").filter("percentage",e),e.$inject=["$filter"]}(),function(){"use strict";function e(e){function t(){var t=n("foreign_referrer");return t||(t=encodeURIComponent(e.prop("referrer"))),t}function n(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=n.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}return{getURLEncodedForeignReferrer:t}}angular.module("app.utils").factory("foreignReferrerService",e),e.$inject=["$document"]}(),function(){"use strict";function e(e){return!0}angular.module("app.utils").factory("sortBy",e),e.$inject=["$filter"]}(),function(){"use strict";function e(e){return function(t){var n=e("currency")(t,"$",0);return t>=1e8?n=e("currency")(t/1e6,"$",0)+"M":t>=1e6?n=e("currency")(t/1e6,"$",2)+"M":t>=1e5&&(n=e("currency")(t/1e3,"$",0)+"k"),n}}angular.module("app.utils").filter("abbreviateCurrency",e),e.$inject=["$filter"]}(),function(){"use strict";function e(e,t){return{restrict:"EA",scope:{product:"=?",analytics:"@?"},link:function(n,r,a){var o=a.placement||"unknown",i={page:window.location.pathname.toLowerCase(),placement_name:o},l=!1;"product"in a&&!l?(isNaN(n.product)||t.get({id:n.product},function(e){n.product=e}),n.$watch("product",function(){n.product&&n.product.name&&(i.product_name=n.product.name,i.product_id=n.product.id||null,i.value=i.product_name+" - "+o,e.trackStandard(r,i,n.$id),l=!0)})):l||(i.value=o,e.trackStandard(r,i,n.$id),l=!0)}}}angular.module("app.ui").directive("analytics",e),e.$inject=["analyticsService","productService"]}(),function(){"use strict";function e(e){function t(){var e,t="";for(e=0;e<32;e+=1)switch(e){case 8:case 20:t+="-",t+=(16*Math.random()|0).toString(16);break;case 12:t+="-",t+="4";break;case 16:t+="-",t+=(4*Math.random()|8).toString(16);break;default:t+=(16*Math.random()|0).toString(16)}return t}return{restrict:"EA",scope:{analytics:"@?"},link:function(n,r,a){var o=a.placement||"unknown",i={page:window.location.pathname.toLowerCase(),placement_name:o,mf_event_id:t()};i.value=o;var l=r.find("a[data-headline-id]"),c=[];angular.forEach(l,function(t,r){var a={post_id:t.getAttribute("data-post-id")||"",headline_id:t.getAttribute("data-headline-id")||"",image_id:t.getAttribute("data-photo-id")||""};c.push(a);var o=angular.merge({},i,{click_target:a});e.trackWidgetRecommendationClick($(t),o,n.$id)});var u=angular.merge({},i,{posts:c});e.trackWidgetPageView(r,u,n.$id),e.trackWidgetImpression(r,i,n.$id)}}}angular.module("app.ui").directive("widgetAnalytics",e),e.$inject=["analyticsService"]}(),function(){"use strict";function e(){return{restrict:"EA",scope:{wordsConnector:"=",twoWordsConnector:"=",lastWordConnector:"=",items:"=",property:"@"},link:function(e,t,n){e.$watch("items",function(n){var r,a=e.wordsConnector||", ",o=e.twoWordsConnector||" and ",i=e.lastWordConnector||", and ",l=e.items||[],c=e.property||"name",u=l.length;1==u?r=l[0][c]:2==u?r=l[0][c]+o+l[1][c]:u>2&&(r=l.slice(0,-1).map(function(e){return e[c]}).join(a)+i+l[u-1][c]),t.text(r||"")})}}}angular.module("app.ui").directive("wordList",e)}(),function(){"use strict";function e(){function e(e,t,n){var r=e/100/12;return n*r*Math.pow(1+r,t)/(Math.pow(1+r,t)-1)}return{updateSavings:function(t){var n=e(t.offerAPR,t.offerTerm,t.currentDebt),r=n*t.offerTerm-t.currentDebt,a=e(t.currentAPR,t.offerTerm,t.currentDebt),o=a*t.offerTerm-t.currentDebt;return t.interestSaved=o-r,t.monthlySavings=a-n,t}}}angular.module("app.utils").factory("loanCalculationService",e)}(),function(){"use strict";function e(){function e(e,t,n,r){var a=n/12;return e*Math.pow(1+a,t)+r*(Math.pow(1+a,t)-1)/a}return{updateBalances:function(t){var n=t,r=n.principal,a=12*n.termInYears,o=n.offerAnnualRate/100,i=n.monthlyContribution||0,l=n.averageAnnualRate/100;return n.offerEndBalance=e(r,a,o,i),n.averageEndBalance=e(r,a,l,i),n.differenceOverAverage=n.offerEndBalance-n.averageEndBalance,n}}}angular.module("app.utils").factory("compoundInterestCalculationService",e)}(),function(){"use strict";function e(){function e(e){this.message=e,this.name="MfCalculatorEventsServiceException"}var t=function(t){if(!t)throw new e('must pass calculatorType into constructor (e.g. "investment")');this.calculatorType=t};return t.prototype.calculatorViewed=function(){dataLayer.push({event:"calculatorViewed",calculator:this.calculatorType})},t.prototype.sliderChange=function(t){if(!t)throw new e("must pass sliderType into sliderChange function");dataLayer.push({event:"calculatorSliderInteraction",calculator:this.calculatorType,eventType:t})},t.prototype.ctaClicked=function(e,t){var n={event:"calculatorClick",calculator:this.calculatorType,productId:e};isNaN(e)&&(n.productId=e.id,n.productName=e.display_name);for(var r in t)n[r]=t[r];dataLayer.push(n)},t}angular.module("app.utils").factory("MfCalculatorEventsService",e)}(),function(){"use strict";function e(e){function t(t,n,r){var a;e(function(){if(void 0!==r.attach){var e=angular.element("#"+r.attach);if(!e)return;a=e.offset().top,n.prev(".o-mf-affix__spacer").height(a-n.offset().top),a=n.offset().top}else a=n.offset().top;void 0===t.coordinates&&(t.coordinates=[]);var o=!0;void 0!==r.fixed&&(o="True"===r.fixed),t.coordinates.push([a,n,r.id,o])},4e3)}return{restrict:"A",scope:!1,link:t}}angular.module("app.ui").directive("mfAffixChild",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,t,n){function r(e,t,r){void 0===e.coordinates&&(e.coordinates=[]);var a=angular.element(".o-mf-affix__child").length,o=n(function(){e.coordinates.length==a&&(e.coordinates.sort(function(e,t){return e[0]>t[0]?1:-1}),e.init(),n.cancel(o))},100);e.init=function(){angular.element(document).ready(function(){e.scrollMagicController||(e.scrollMagicController=new ScrollMagic.Controller);for(var t=0;t<e.coordinates.length;t++)if(e.coordinates[t][3]){var n,r="#"+e.coordinates[t][2];n=t+1!==e.coordinates.length?e.coordinates[t+1][0]-e.coordinates[t][0]-e.coordinates[t][1].height()-10:0;new ScrollMagic.Scene({triggerElement:r,triggerHook:"onLeave",duration:n}).setPin(r,{pushFollowers:!1}).addTo(e.scrollMagicController)}})}}return{restrict:"A",scope:!0,link:r}}angular.module("app.ui").directive("mfAffix",e),e.$inject=["$window","$timeout","$interval"]}(),function(){"use strict";function e(){function e(e,t){new TimelineLite({onComplete:t}).add(TweenLite.to(e,.2,{height:"35rem"}))}function t(e,t){new TimelineLite({onComplete:t}).add(TweenLite.to(e,.2,{height:0}))}return{enter:e,leave:t}}angular.module("app.ui").animation(".o-mf-slide-in",e)}(),function(){"use strict";function e(e,t){var n=this;n.show=!1,(e.openOnClick||e.openOnEvent)&&(e.openOnClick&&angular.element(e.openOnClick).bind("click",function(e){n.show=!0}),e.openOnEvent&&t.on(e.openOnEvent,function(e){n.show=!0}))}angular.module("app.ui").controller("MfSlideInController",e),e.$inject=["$attrs","$document"]}(),function(){"use strict";function e(){return{restrict:"E",transclude:!0,controller:"MfSlideInController",controllerAs:"vm",scope:{openOnClick:"@",openOnEvent:"@"},templateUrl:"/static/app/ng/ui/mf-slide-in/mf-slide-in.html"}}angular.module("app.ui").directive("mfSlideIn",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"MfSegmentController",controllerAs:"vm",scope:{linkedModel:"=",segments:"="},templateUrl:function(){return"/static/app/ng/ui/mf-segment-control/mf-segment-control.html"}}}angular.module("app.ui").directive("mfSegmentControl",e)}(),function(){"use strict";function e(e){function t(t){e.linkedModel=t}this.setSelected=t}angular.module("app.ui").controller("MfSegmentController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(){return{restrict:"A",scope:{config:"=config",amount:"=model",change:"&?",watch:"@"},link:function(e,t,n){var r=t.get()[0];noUiSlider.create(r,{start:e.config.start,connect:e.config.connect,range:e.config.range,step:e.config.step,snap:void 0!==e.config.snap&&e.config.snap}),r.noUiSlider.on("slide",function(t,n){var r=t[0];e.$apply(function(){e.amount=r})}),n.watch&&e.$watch("amount",function(e){e!==r.noUiSlider.get()&&r.noUiSlider.set(e)}),n.change&&r.noUiSlider.on("change",function(t,n){e.change(t,n)})}}}angular.module("app.ui").directive("mfSlider",e)}(),function(){"use strict";function e(e,t,n){function r(){if(a.email){var r=window.location.pathname.toLowerCase();n.capture(a.email,MF,r).then(function(n){MF.user_email=a.email,e.putObject("mfEmailCaptured","true"),t.$emit("emailCaptured")})}}var a=this;a.captureEmail=r}angular.module("app.ui").controller("EmailCaptureController",e),e.$inject=["$cookies","$scope","emailCaptureService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"/static/app/ng/ui/email-capture/email-capture.html",controller:"EmailCaptureController",controllerAs:"vm",scope:{ctaText:"@",subheading:"@",heading:"@"}}}angular.module("app.ui").directive("emailCapture",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"MfTooltipController",transclude:!0,scope:{text:"@"},templateUrl:"/static/app/ng/ui/mf-tooltip/mf-tooltip.html"}}angular.module("app.ui").directive("mfTooltip",e)}(),function(){"use strict";function e(e,t){e.show=!1,t.$observe("text",function(t){e.text=t})}angular.module("app.ui").controller("MfTooltipController",e),e.$inject=["$scope","$attrs"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:!1,replace:!0,templateUrl:"/static/app/ng/ui/svg-map/us_map.svg",link:function(t,n,r){var a=n[0].querySelectorAll(".state-label-wrapper,.state");angular.forEach(a,function(n,r){var a=angular.element(n);a.attr("current-state","currentState"),a.attr("state-data","stateData"),a.attr("product","product"),a.attr("state",""),e(a)(t)})}}}angular.module("app.ui.svgMap").directive("svgMap",e),e.$inject=["$compile"]}(),function(){"use strict";function e(e){return{restrict:"EA",scope:{currentState:"=",stateData:"=",product:"="},link:function(t,n,r,a){t.stateId=n.attr("state-id"),t.stateClick=function(){if(t.$parent.vm&&t.$parent.vm.bankrate)window.location.hash="#/mortgage/learn-more";else{var e=$("#"+t.$parent.product.id+"-map-button").attr("href");window.open(e,"_blank")}},t.stateMouseOver=function(){t.currentState=t.stateId},t.stateMouseLeave=function(){t.currentState=""},n.attr("ng-class","{active: currentState == '"+t.stateId+"'}"),n.attr("ng-click","stateClick()"),n.attr("ng-mouseover","stateMouseOver()"),n.attr("ng-mouseleave","stateMouseLeave()"),n.on("touchend",function(){t.stateClick()}),n.removeAttr("state"),e(n)(t)}}}angular.module("app.ui.svgMap").directive("state",e),e.$inject=["$compile"]}(),function(){"use strict";function e(e,t,n,r,a){if(n.get("/static/app/ng/ui/svg-map/states.json").then(function(t){e.stateData=t.data}),t.productFeed){a.get(t.productFeed,"product-feed-map-unit").then(function(t){e.product=t.results[0]})}else isNaN(e.product)||r.get({id:e.product,placement:"map-unit"},function(t){e.product=t});e.currentState=""}angular.module("app.ui.svgMap").controller("MapUnitController",e),e.$inject=["$scope","$attrs","$http","productService","productFeedService"]}(),function(){"use strict";function e(){return{scope:{ctaText:"@",mapText:"@",product:"=?",vm:"="},controller:"MapUnitController",restrict:"EA",templateUrl:"/static/app/ng/ui/svg-map/map-unit.html"}}angular.module("app.ui.svgMap").directive("mapUnit",e)}(),function(){"use strict";function e(e,t,n,r){function a(){function r(e,t,n,r){var a;return a=n?e*Math.pow(1+n,r)-t*(Math.pow(1+n,r)-1)/n:e-t*r,a<0?0:a}function a(e,t,n){console.log([e,t,n]);for(var r=0,a=0,o=0;e>0;){var i=e*t;if(r+=i,o+=1,i>n)return!1;e+=i,e-=n,a+=n,e<0&&(a+=e)}return{total:a,interest:r,payments:o}}var i,l;i=o.oldInterest?o.oldInterest/100/12:0,l=o.newInterest?o.newInterest/12:0;var c=+o.balance,u=+o.payment,s=+o.months;o.chartData.payment=u;var d,p,m=[];d=l?-Math.log(1-c*l/u)/Math.log(1+l):c/u,p=i?-Math.log(1-c*i/u)/Math.log(1+i):c/u;for(var f=0;f<=s;f++){var g=r(c,u,i,f),v=r(c,u,l,f);if(Math.floor(d)<f&&(v=0),Math.floor(p)<f&&(g=0),0!==f?m.push({period:f,a:g,b:v}):m.push({period:0,a:c,b:c}),Math.floor(d)===f&&Math.floor(p)===f){var h=r(c,u,i,d),b=r(c,u,l,d),y={period:d,a:h,b:b},w=r(c,u,i,p),C=r(c,u,l,p),S={period:p,a:w,b:C};d<p?(m.push(y),m.push(S)):(m.push(S),m.push(y))}else Math.floor(d)===f&&(g=r(c,u,i,d),v=r(c,u,l,d),m.push({period:d,a:g,b:v})),Math.floor(p)===f&&(g=r(c,u,i,p),v=r(c,u,l,p),m.push({period:p,a:g,b:v}))}var A=m[m.length-1],T=a(c,i,u),_=a(c,l,u);console.log([T,_]);var P,x,k,$=T.interest-_.interest;if(T&&_&&(P=T.payments-_.payments),A.b>0){var M=A.a-A.b;M>0?(M=e("currency")(M,"$",2),x="You could pay off an extra <strong>"+M+"</strong> over the next "+s.toFixed(0)+" "+o.chartData.periodName+"s",$>0?($=e("currency")($,"$",2),x+=" and save a total of <strong>"+$+"</strong> in interest over the "+_.payments+" month repayment period.",P&&T&&_&&(k=P>1?"months":"month",x+=" In addition, you would pay off the loan "+P+" "+k+" sooner.")):x+="."):x=""}else $>0?($=e("currency")($,"$",2),x="You could save a total of <strong>"+$+"</strong> in interest over the course of your "+_.payments+" month repayment period.",P&&T&&_&&(k=P>1?"months":"month",x+=" In addition, you would pay off the loan "+P+" "+k+" sooner.")):x="";n(function(){o.message=x}),o.chartData.dataPoints=m,t.$broadcast("redrawChart","true")}var o=this;o.redrawChart=a,function(){o.title="Debt Calculator",o.oldInterest=18,o.newInterest=0,o.balance=1e4,o.payment=1e3,o.months=12,o.balanceConfig={start:o.balance,connect:"lower",range:{min:5e3,max:35e3},step:1e3},o.oldInterestConfig={start:o.oldInterest,connect:"lower",range:{min:100*o.newInterest,max:30},step:.25},o.paymentConfig={start:o.payment,connect:"lower",range:{min:100,max:3e3},step:100},o.monthsConfig={start:o.months,connect:"lower",range:{min:12,max:72},step:12},o.chartData={payment:0,periodName:"Month",aLegendText:"No Transfer",bLegendText:"Transfer"},o.creditCard&&r.getProduct(o.creditCard).then(function(e){o.newInterest=(+e.apr/100).toFixed(4),o.product=e,a()}).catch(function(e){console.log(e)}),a()}()}angular.module("app.ui").controller("MfDebtCalculatorController",e),e.$inject=["$filter","$scope","$timeout","productsService"]}(),function(){"use strict";function e(){return{restrict:"E",controllerAs:"dc",controller:"MfDebtCalculatorController",bindToController:{creditCard:"@",flow:"@"},scope:!0,replace:!0,templateUrl:"/static/app/ng/ui/mf-debt-calculator/mf-debt-calculator.html"}}angular.module("app.ui").directive("mfDebtCalculator",e)}(),function(){"use strict";function e(e,t){var n=this,r=t.get();n.placement=function(e,t,n){return n[e]?n[e]:t}("placement","cds-rate-table",e),r.activate(n,e).then(function(t){e.paid=t.ac.featuredAccounts,e.free=t.ac.allUnpaidAccounts,e.attribution=t.ac.attribution,e.disclaimer=t.ac.disclaimer}),n.showTakeover=function(){e.$broadcast("takeover")}}angular.module("app.ui").controller("MfCdsRateTableController",e),e.$inject=["$scope","CDSAccountsService"]}(),function(){"use strict";function e(){return{restrict:"E",controller:"MfCdsRateTableController",controllerAs:"vm",scope:{tableTitle:"@?",productFeed:"@?"},templateUrl:"/static/app/ng/ui/mf-savings-rate-table/mf-savings-rate-table.html"}}angular.module("app.ui").directive("mfCdsRateTable",e)}(),function(){"use strict";function e(){return{restrict:"A",controller:"MfExperimentController",transclude:!0,template:"<div ng-transclude></div>",scope:{experimentId:"@",fallbackVariationId:"@"},link:function(e,t,n){e.$broadcast("variationSelected",e.selectedVariationId)}}}angular.module("app.ui").directive("mfExperiment",e)}(),function(){"use strict";function e(e,t,n,r){var a,o=function(e){return"email-collect"!=e.placement_name},i=e.experimentId,l="_experiment_"+i,c=t.get(l);if(c)try{a=JSON.parse(c).selected_variation}catch(e){console.log(e.message)}a?(e.selectedVariationId=a,n.$on("experiment:linkClick",function(e,t){if(o(t)){var n=t.product_display_name;r.convertClick(i,n)}})):e.selectedVariationId=e.fallbackVariationId}angular.module("app.ui").controller("MfExperimentController",e),e.$inject=["$scope","$cookies","$rootScope","experimentConversion"]}(),function(){"use strict";function e(e){return{restrict:"E",controller:"MfPopoverController",controllerAs:"vm",transclude:!0,scope:{content:"=",display:"@",linkClass:"@",modifier:"@?"},templateUrl:"/static/app/ng/ui/mf-popover/mf-popover.html"}}angular.module("app.ui").directive("mfPopover",e),e.$inject=["$compile"]}(),function(){"use strict";function e(e,t){function n(){if(r.show=!r.show,r.show&&(r.height>300||"filter-table"==t.modifier)){var n=e.parents(".js-popover-parent"),a=e.find(".o-mf-popover__content"),o=n.width(),i=0;"filter-table"==t.modifier&&(o+=12,i-=12),a.css({left:"auto",right:i,width:o,transform:"none"}),a.addClass("is-wide")}}var r=this,a=e.find(".o-mf-popover__trigger");r.show=!1,r.toggle=n,t.$watch("content",function(e){if(e){var n=angular.element('<div class="u-height-calc" style="width:30rem">'+t.content+"</div>");angular.element("body").append(n),r.height=n.height()}}),a.blur(function(){r.show=!1,t.$apply()})}angular.module("app.ui").controller("MfPopoverController",e),e.$inject=["$element","$scope"]}(),function(){"use strict";function e(e,t,n,r,a){if(!isNaN(e.contentGroup)){var o=e.placement||"unknown";r.get({id:e.contentGroup,placement:o},function(t){if(e.contentGroup=t,e.contentGroup.contentGroupMemberLists=[],"double"===e.columns){var n=e.contentGroup.content_group_members.length;e.contentGroup.contentGroupMemberLists.push(e.contentGroup.content_group_members.slice(0,n/2)),e.contentGroup.contentGroupMemberLists.push(e.contentGroup.content_group_members.slice(n/2,n))}else e.contentGroup.contentGroupMemberLists.push(e.contentGroup.content_group_members)})}e.contentTypes={product:83,verticalExtension:123},e.rowPartial="/static/app/ng/ui/mf-keyword-block/mf-keyword-block-icon-row-partial.html"}angular.module("app.ui").controller("MfKeywordBlockController",e),e.$inject=["$scope","$attrs","$element","contentGroupService","productService"]}(),function(){"use strict";function e(){return{restrict:"AE",transclude:!0,replace:!0,scope:{contentGroup:"@",blockTitle:"@",floatPosition:"@",columns:"@",placement:"@",design:"@",headerDisplay:"@",borderDisplay:"@"},controller:"MfKeywordBlockController",templateUrl:function(e,t){var n="/static/app/ng/ui/mf-keyword-block/mf-keyword-block-icon-design.html",r="/static/app/ng/ui/mf-keyword-block/mf-keyword-block.html";return"icons"===t.design?n:"text"===t.design?r:_.sample([n,r])}}}angular.module("app.ui").directive("mfKeywordBlock",e)}(),function(){"use strict";function e(e){function t(t,n,r){e.d3().then(function(e){function r(){m=t.data.dataPoints,f=m[m.length-1],g=e.max(m,function(e){return e.a>e.b?e.a:e.b}),v=t.data.periodName,h=Math.round(t.data.payment),b=t.data.aLegendText,y=t.data.bLegendText}function a(){k.transition().call(S),$.transition().call(A),R.transition().attr("d",P(m)),F.transition().attr("d",_(m)),M.datum(m).transition().attr("d",T),L.text("Number of "+v+"s Paying $"+h),o(f)}function o(e){var t,n;O.transition().attr("transform","translate("+w(e.period)+","+C(e.b)+")").duration(250).ease("exp-out"),j.transition().attr("transform","translate("+w(e.period)+","+C(e.a)+")").duration(250).ease("exp-out"),E.transition().attr("x",w(e.period)-.5).duration(250).ease("exp-out"),t=w(e.period)<D.width+10?w(e.period)+10:w(e.period)-(D.width+10),n=C(e.a)+D.height+10>d?d-(D.height+10):C(e.a)+10,B.transition().attr("transform","translate("+t+","+n+")").duration(1e3).ease("exp-out"),z.text(l(e.a,!1)),V.text(l(e.b,!1)),e.period?U.text("Balance at "+v+" "+Math.round(e.period)):U.text("Starting Balance")}function i(){w.domain([0,e.max(m,function(e){return e.period})]),C.domain([e.min(m,function(e){return e.b<e.a?e.b:e.a}),e.max(m,function(e){return e.b>e.a?e.b:e.a})])}function l(t,n){return n?(n=e.formatPrefix(t),"$"+n.scale(t)+n.symbol):"$"+e.format(",.0f")(t)}function c(){var t=w.invert(e.mouse(this)[0]),n=e.bisector(function(e){return e.period}).left,r=n(m,t,1),a=m[r-1],i=m[r];if(a&&i){var l=t-a.period>i.period-t?i:a;l.period%1!=0&&(l=m[r-1]),o(l)}}var u={top:30,right:20,bottom:65,left:90},s=n[0].offsetWidth-u.left-u.right,d=350-u.top-u.bottom,p=12;s<300&&(p=6);var m,f,g,v,h,b,y;r();var w=e.scale.linear().range([0,s]),C=e.scale.linear().range([d,0]);i();var S=e.svg.axis().tickPadding(10).scale(w).orient("bottom").ticks(p),A=e.svg.axis().tickPadding(10).scale(C).orient("left").ticks(5).innerTickSize(-s).outerTickSize(0).tickFormat(function(e){return g/5>1e4?l(e,!0):l(e,!1)}),T=e.svg.area().x(function(e){return w(e.period)}).y0(function(e){return C(e.a)}).y1(function(e){return C(e.b)}),_=e.svg.line().x(function(e){return w(e.period)}).y(function(e){return C(e.a)}),P=e.svg.line().x(function(e){return w(e.period)}).y(function(e){return C(e.b)}),x=e.select(n[0]).append("svg").attr("width",s+u.left+u.right).attr("height",d+u.top+u.bottom).append("g").attr("transform","translate("+u.left+","+u.top+")"),k=x.append("g").attr("class","c-mf-line-chart__axis").attr("transform","translate(0,"+d+")").call(S),$=x.append("g").attr("class","c-mf-line-chart__axis").call(A),M=x.append("path").datum(m).attr("class","c-mf-line-chart__area").attr("d",T),F=x.append("path").attr("class","c-mf-line-chart__line").attr("d",_(m)),R=x.append("path").attr("class","c-mf-line-chart__line is-new").attr("d",P(m)),L=x.append("text").attr("x",s/2).attr("y",d+(u.bottom-10)).attr("class","c-mf-line-chart__axis-label").style("text-anchor","middle").text("Number of "+v+"s Paying $"+h);x.append("text").attr("transform","rotate(-90)").attr("y",0-u.left).attr("x",0-d/2).attr("dy","1em").attr("class","c-mf-line-chart__axis-label").style("text-anchor","middle").text("Balance");var E=x.append("rect").attr("class","c-mf-line-chart__focus-line").attr("height",d).attr("width",1).attr("x",w(f.period)-.5).attr("y",0),j=x.append("g").attr("class","c-mf-line-chart__focus").attr("transform","translate("+w(f.period)+","+C(f.a)+")");j.append("circle").attr("r",4.5)
;var O=x.append("g").attr("class","c-mf-line-chart__focus is-new").attr("transform","translate("+w(f.period)+","+C(f.b)+")");O.append("circle").attr("r",4.5);var N,I,D={width:170,height:65};N=w(f.period)<D.width+10?w(f.period)+10:w(f.period)-(D.width+10),I=C(f.a)+D.height+10>d?d-(D.height+10):C(f.a)+10;var B=x.append("g").attr("transform","translate("+N+","+I+")");B.append("rect").attr("class","c-mf-line-chart__focus-legend").attr("width",D.width).attr("height",D.height);var U=B.append("text").style("text-anchor","middle").attr("x",D.width/2).attr("y",15).attr("class","c-mf-line-chart__focus-legend-heading").text("Balance at "+v+" "+Math.round(f.period));B.append("rect").attr("x",5).attr("y",25).attr("width",15).attr("height",15).attr("class","c-mf-line-chart__focus-legend-color"),B.append("rect").attr("x",5).attr("y",45).attr("width",15).attr("height",15).attr("class","c-mf-line-chart__focus-legend-color is-new"),B.append("text").attr("x",25).attr("y",37).attr("class","c-mf-line-chart__focus-legend-text").text(b+":"),B.append("text").attr("x",25).attr("y",57).attr("class","c-mf-line-chart__focus-legend-text").text(y+":");var z=B.append("text").attr("x",D.width-5).attr("y",37).attr("class","c-mf-line-chart__focus-legend-value").style("text-anchor","end").text(l(f.a,!1)),V=B.append("text").attr("x",D.width-5).attr("y",57).attr("class","c-mf-line-chart__focus-legend-value").style("text-anchor","end").text(l(f.b,!1));x.append("rect").attr("class","overlay").attr("width",s).attr("height",d).on("mousemove",c);t.$on("redrawChart",function(e,t){r(),i(),a()})})}return{restrict:"E",scope:{data:"="},link:t,template:'<div class="c-mf-line-chart"></div>',replace:!0}}angular.module("app.ui").directive("mfLineChart",e),e.$inject=["d3Service"]}(),function(){"use strict";function e(e,t,n){function r(e){return e?{opacity:0,left:"-500px"}:{opacity:1,left:0,ease:Expo.easeOut,onComplete:function(){angular.element(i.stagger).removeClass("is-animating")}}}function a(){var t=e[0];if(angular.element(t).hasClass("o-mf-takeover")){var n,r,a,o=t.querySelector(".o-mf-takeover__container"),l=t.querySelector(".o-mf-takeover__header");n=i.parent?t.parentNode.querySelector(i.parent):t.parentNode;var c=n.offsetWidth,u=n.offsetHeight,s=n.getBoundingClientRect(),d={display:"block",position:"fixed",top:s.top,left:s.left,width:c,height:u,opacity:0,"z-index":1e8},p=new TimelineLite;p.add(TweenLite.to(t,.001,d)),p.add(TweenLite.to(o,.001,{opacity:0})),p.add(TweenLite.to(l,.001,{height:"46px"})),i.stagger&&(i.staggerType||(i.staggerType="staggerLeft"),a=t.querySelectorAll(i.stagger),angular.element(i.stagger).addClass("is-animating"),p.add(TweenLite.to(a,.001,i.standard[i.staggerType](!0)))),i.heading&&(r=t.querySelector(i.heading),p.add(TweenLite.to(r,.001,{opacity:0,top:"-200px",position:"relative"}))),p.add(TweenLite.to(t,.17,{opacity:1})),p.add(TweenLite.to(t,.2,{left:0,width:"100vw",ease:Expo.easeOut})),p.add([TweenLite.to(t,.25,{top:0,bottom:0,height:"100%",ease:Expo.easeOut}),TweenLite.to(o,.17,{opacity:1})],"+=0","normal",0),i.heading&&p.add(TweenLite.to(r,.4,{opacity:1,top:0,ease:Expo.easeOut})),i.stagger&&p.staggerTo(a,.5,i.standard[i.staggerType](),.1,"-=.25");var m=document.querySelector("body");m.style.overflowY="hidden",m.style.overflowX="hidden"}}function o(){var t,n=e[0],r=n.querySelector(".o-mf-takeover__container"),a=n.querySelector(".o-mf-takeover__header");t=i.parent?n.parentNode.querySelector(i.parent):n.parentNode;var o=t.offsetWidth,l=t.offsetHeight,c=t.getBoundingClientRect(),u=new TimelineLite;if(u.add([TweenLite.to(a,.25,{height:0,ease:Expo.easeOut}),TweenLite.to(n,.25,{top:c.top,bottom:c.bottom,height:l,ease:Expo.easeOut}),TweenLite.to(r,.17,{opacity:0})],"+=0","normal",0),u.add(TweenLite.to(n,.2,{width:o,left:c.left,ease:Expo.easeOut})),u.add(TweenLite.to(n,.17,{opacity:0,display:"none"})),i.stagger){var s=n.querySelectorAll(i.stagger);$(s).css({opacity:0,left:"-500px"})}var d=document.querySelector("body");d.style.overflowY="auto",d.style.overflowX="auto"}var i=this;i.name=t.name,i.parent=t.parent,i.animation=t.animation,i.heading=t.heading,i.stagger=t.stagger,i.staggerType=t.staggerType,i.standard={},i.standard.staggerLeft=r,i.standard.show=a,i.standard.hide=o,i.animation||(i.animation="standard"),n.$on("takeover",function(e,t){i.name===t&&i[i.animation].show()}),n.$on("hideTakeover",function(e,t){i.name===t&&i.hide()}),i.hide=i[i.animation].hide}angular.module("app.ui").controller("MfTakeoverController",e),e.$inject=["$element","$attrs","$scope"]}(),function(){"use strict";function e(){return{templateUrl:"/static/app/ng/ui/mf-takeover/mf-takeover.html",restrict:"E",controller:"MfTakeoverController",controllerAs:"vm",transclude:!0,scope:{}}}angular.module("app.ui").directive("mfTakeover",e)}(),function(){"use strict";function e(e,t,n,r,a){function o(e){e&&!angular.element(e.target).hasClass("o-mf-modal")||(angular.element("body").css("overflow-y","auto"),l.show=!1)}function i(){angular.element("body").css("overflow-y","hidden"),l.show=!0,a.$apply()}var l=this;if(l.show=!1,l.hideModal=o,l.showModal=i,"placement"in t){l.analytics=!0;var c=t.placement||"unknown";l.obj={page:window.location.pathname.toLowerCase(),placement_name:c},e.trackClick(r,l.obj),e.trackHover(r,l.obj)}(t.openOnClick||t.openOnEvent)&&(t.openOnClick&&angular.element(t.openOnClick).bind("click",function(t){l.showModal(),l.analytics&&e.createImpression(l.obj,a.$id)}),t.openOnEvent&&n.on(t.openOnEvent,function(t){l.showModal(),l.analytics&&e.createImpression(l.obj,a.$id)}))}angular.module("app.ui").controller("MfModalController",e),e.$inject=["analyticsService","$attrs","$document","$element","$scope"]}(),function(){"use strict";function e(){return{restrict:"E",controller:"MfModalController",controllerAs:"vm",transclude:!0,scope:{heading:"@",openOnClick:"@",openOnEvent:"@"},templateUrl:"/static/app/ng/ui/mf-modal/mf-modal.html"}}angular.module("app.ui").directive("mfModal",e)}(),function(){"use strict";function e(){function e(e,n){var r,a=e.children(".o-mf-modal__content"),o=new TimelineLite({onComplete:n});r=t()?"800px":"50%",o.add(TweenLite.to(e,.2,{opacity:1})),o.add(TweenLite.to(a,.3,{top:r,ease:Elastic.easeOut.config(1,1)}))}function n(e,t){var n=e.children(".o-mf-modal__content"),r=new TimelineLite({onComplete:t});r.add(TweenLite.to(n,.3,{top:"-50%",ease:Elastic.easeIn.config(1,1)})),r.add(TweenLite.to(e,.2,{opacity:0}))}return{enter:e,leave:n}}function t(){try{return window.self!==window.top}catch(e){return!0}}angular.module("app.ui").animation(".o-mf-modal",e)}(),function(){"use strict";function e(e){this.min=3}angular.module("app.ui").controller("AtAGlanceController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(){return{restrict:"E",controllerAs:"vm",transclude:!0,bindToController:!0,scope:{title:"@"},templateUrl:"/static/app/ng/ui/at-a-glance/at-a-glance.html",controller:"AtAGlanceController"}}angular.module("app.ui").directive("atAGlance",e)}(),function(){"use strict";function e(e,t){return{restrict:"E",transclude:!0,scope:{product:"=",cta:"@",placement:"@",heading:"@"},link:function(n,r,a){var o={placement:a.placement||"unknown"};isNaN(n.product)||t.get({id:n.product},function(e){n.product=e}),n.$watch("product",function(){n.product&&n.product.name&&(o.productName=n.product.name,e.trackStandard(r,o,n.$id))})},templateUrl:function(){return"/static/app/ng/ui/easy-well/easy-well.html"}}}angular.module("app.ui").directive("easyWell",e),e.$inject=["analyticsService","productService"]}(),function(){"use strict";function e(){function e(e,t){var n=new TimelineLite({onComplete:t}),r=e.children().height()+20;n.add(TweenLite.to(e,.4,{height:r,ease:Elastic.easeOut.config(1,.8)}))}function t(e,t){new TimelineLite({onComplete:t}).add(TweenLite.to(e,.35,{height:"0",ease:Elastic.easeIn.config(1,1)}))}return{enter:e,leave:t}}angular.module("app.ui").animation(".o-mf-collapse",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"MfCollapseController",controllerAs:"vm",template:'<div class="o-mf-collapse" ng-if="!vm.collapsed"><div ng-transclude></div></div>',transclude:!0,scope:{toggle:"@"}}}function t(){return{require:"^^mfCollapse",restrict:"A",link:function(e,t,n,r){t.bind("click",function(e){r.toggleCollapse()})}}}angular.module("app.ui").directive("mfCollapse",e).directive("mfCollapseClose",t)}(),function(){"use strict";function e(e){var t=this;t.collapsed=!0,e.toggle&&(angular.element(e.toggle).click(function(){t.collapsed=!t.collapsed,e.$apply()}),t.toggleCollapse=function(){t.collapsed=!t.collapsed,e.$apply()})}angular.module("app.ui").controller("MfCollapseController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(){function e(e,t,n){function r(){e.stars=[];for(var t=1;t<=e.max;t++)e.stars.push({filled:t<=e.ratingValue,halfFilled:t>e.ratingValue&&t<e.ratingValue+1})}void 0===e.max&&(e.max=5),e.toggle=function(t){void 0!==e.readOnly&&!1!==e.readOnly||(e.ratingValue=t+1,e.onRatingSelect({rating:t+1}))},e.$watch("ratingValue",function(e,t){t&&r()})}return{restrict:"EA",templateUrl:"/static/app/ng/ui/star-rating/star-rating.html",scope:{ratingValue:"=ngModel",max:"=?",onRatingSelect:"&?",readOnly:"=?"},link:e}}angular.module("app.ui").directive("starRating",e)}(),function(){"use strict";function e(e,t,n,r){function a(e){switch(e){case"10-1yr_arm":return"10/1 Arm";case"1yr_arm":return"1 Year Arm";case"fha_30yr":return"30 Year FHA";case"va_30yr":return"30 Year VA";case"7-1yr_arm":return"7/1 Arm";case"5-1yr_arm":return"5/1 Arm";case"3-1yr_arm":return"3/1 Arm";case"10yr_fixed":return"10 Year Fixed";case"15yr_fixed":return"15 Year Fixed";case"20yr_fixed":return"20 Year Fixed";case"40yr_fixed":return"40 Year Fixed";default:return"30 Year Fixed"}}function o(e){var t=("purchase"===g.loanType?"Purchase":"Refinance")+" | ";return t+=a("purchase"===g.loanType?g.loanTerm:g.refiLoanTerm),e&&("purchase"===g.loanType&&(t+=" | "+g.downPaymentPercentage+"% down"),t+=" | "+g.ficoScore+("740"===g.ficoScore?"+":"")+" credit"),t}function i(e,t){g[t]=r.cleanNumber(g[t+"Text"]),g[t+"Text"]=r.numberWithComma(g[t])}function l(){g.zip=r.cleanNumber(g.zip),g.zip.length>5&&(g.zip=g.zip.substr(0,5)),f()}function c(){g.hideFilters=!g.hideFilters,g.hideFilters?(document.getElementById("table-filters").classList.add("is-hidden--lg-down"),document.getElementById(g.resultsTable).classList.remove("is-hidden--sm-down")):(document.getElementById("table-filters").classList.remove("is-hidden--lg-down"),document.getElementById(g.resultsTable).classList.add("is-hidden--sm-down"))}function u(){var t=e.productFeed,n=t.split("?"),a="?points=0&";n.length>1&&(a+=n[1]),g.zip&&5===g.zip.length&&(a+="&zipcode="+g.zip);var o=g.loanTerm;if("purchase"===g.loanType){var i=g.purchasePrice?g.purchasePrice:r.cleanNumber(g.purchasePricePlaceholder),l=g.downPaymentAmount?g.downPaymentAmount:r.cleanNumber(g.downPaymentAmountPlaceholder);a+="&loan_to_value_ratio="+(100-(g.downPaymentPercentage?g.downPaymentPercentage:r.cleanNumber(g.downPaymentPercentagePlaceholder))),a+="&loan_amount="+(i-l)}else{if(g.currentLoanBalance&&g.propertyValue){a+="&loan_to_value_ratio="+Math.floor(g.currentLoanBalance/g.propertyValue*100),a+="&loan_amount="+g.currentLoanBalance}o=g.refiLoanTerm}return g.ficoScore&&(a+="&fico_score="+g.ficoScore),g.debug&&(a+="&debug=true"),t="/api/mortgages/"+g.loanType+"/"+o+a}function s(e){g.hideFilters||e||(c(),r.scrollTop()),g.loading=!0;var n=u();t.get(n,"mortgage-filter-table").then(function(e){if(g.debug){console.groupCollapsed("API RESPONSE");var t=JSON.parse(e.raw);angular.equals({},t)?console.log("Not Debug Data Received."):(console.log(t.url),t.error?console.log(t.error):console.dir(JSON.parse(t.response))),console.groupEnd()}g.products=e.results,g.products.forEach(function(e){e.display_name||(e.display_name=e.company.name)}),g.filteredProducts=g.products,r.paginateAndSort(),r.calcDisplayedResults(),g.loading=!1})}function d(e){"price"===e?g.purchasePrice?g.downPaymentAmount?g.downPaymentPercentageText=g.downPaymentPercentage=m(g.purchasePrice,g.downPaymentAmount):(g.downPaymentAmount=p(g.purchasePrice,g.downPaymentPercentage),g.downPaymentAmountText=r.numberWithComma(g.downPaymentAmount),g.downPaymentPercentageText=g.downPaymentPercentage):(g.downPaymentAmount=g.downPaymentAmountText="",g.downPaymentPercentage=g.downPaymentPercentagePlaceholder,g.downPaymentPercentageText=""):"amount"===e?(g.downPaymentAmount=r.cleanNumber(g.downPaymentAmountText),g.downPaymentAmountText=r.numberWithComma(g.downPaymentAmount),g.downPaymentPercentageText=g.downPyamentPercentage=m(g.purchasePrice,g.downPaymentAmount)):(g.downPaymentPercentage=g.downPaymentPercentageText=r.cleanNumber(g.downPaymentPercentageText),g.downPaymentAmount=p(g.purchasePrice,g.downPaymentPercentage),g.downPaymentAmountText=r.numberWithComma(g.downPaymentAmount))}function p(e,t){return r.cleanNumber(e)*r.cleanNumber(t)/100}function m(e,t){return Math.floor(r.cleanNumber(t)/r.cleanNumber(e)*100).toString()}function f(){var e=document.getElementById(g.resultsTable);"none"!==window.getComputedStyle(e).display&&s(!0)}var g=this;r.setController(g),g.getProducts=s,g.calculateDownPayment=d,g.toggleFilters=c,g.commaFormat=i,g.zipFormat=l,g.autoUpdate=f,g.sort=r.sort,g.range=r.range,g.changePage=r.changePage,g.summaryText=o,e.formatNMLS=r.cleanNumber,e.logoURL=r.logoURL,g.desktop={pagination:+e.pagination||10,currentPage:1,totalPages:0,products:[],currentPageProducts:[],displayResults:{min:0,max:0}},g.mobile={pagination:+e.paginationMobile||3,currentPage:1,totalPages:0,products:[],currentPageProducts:[],displayResults:{min:0,max:0}},g.breakpoints=[g.mobile,g.desktop],g.sortFields={name:{dir:"+",primary:"company.name"},apr:{dir:"+",primary:"apr",number:!0},rate:{dir:"+",primary:"rate",number:!0},payment:{dir:"+",primary:"estimated_payment",secondary:"fees",number:!0}},g.sortField="",g.headline="Mortgage Rates for "+r.formatDate(new Date,"MMM d"),g.segments=[{label:"Purchase",value:"purchase"},{label:"Refinance",value:"refi"}],g.cta=e.cta||"Learn More",g.loanType="purchase",g.loanTerm="30yr_fixed",g.refiLoanTerm="30yr_fixed",g.zip="90210",g.zipPlaceholder="",g.purchasePrice="165000",g.purchasePricePlaceholder="",g.purchasePriceText="",g.propertyValue="165000",g.propertyValuePlaceholder="",g.propertyValueText="",g.downPaymentPercentage="20",g.downPaymentPercentagePlaceholder="",g.downPaymentPercentageText="",g.downPaymentAmount="33000",g.downPaymentAmountPlaceholder="",g.downPaymentAmountText="",g.currentLoanBalance="132000",g.currentLoanBalancePlaceholder="",g.currentLoanBalanceText="",g.ficoScore="740",g.hideFilters=!0,g.resultsTable="c-mortgage-filter-table__body",g.productRowTemplateDesktop="/static/app/ng/ui/mf-mortgage-filter-table/product-row-template-desktop.html",g.productRowTemplateMobile="/static/app/ng/ui/mf-mortgage-filter-table/product-row-template-mobile.html",r.setDebug(),function(){var e=n.search();if(e.tableTitle&&(g.headline=e.tableTitle),e.loanType&&(g.loanType="refi"===e.loanType?"refi":"purchase"),e.zip?g.zip=r.cleanNumber(e.zip):MF&&MF.postal_code&&(g.zip=MF.postal_code),g.zipPlaceholder=g.zip,e.fico){var t=parseInt(r.cleanNumber(e.fico));g.ficoScore=t>=740?"740":t>=720?"720":t>=700?"700":t>=680?"680":"660"}if(e.product)switch(e.product.toLowerCase()){case"40 year fixed":g.loanTerm="40yr_fixed",g.refiLoanTerm="30yr_fixed";break;case"10/1 arm":g.loanTerm=g.refiLoanTerm="10-1yr_arm";break;case"1 year arm":g.loanTerm=g.refiLoanTerm="1yr_arm";break;case"30 year fha":g.loanTerm=g.refiLoanTerm="fha_30yr";break;case"30 year va":g.loanTerm=g.refiLoanTerm="va_30yr";break;case"7/1 arm":g.loanTerm=g.refiLoanTerm="7-1yr_arm";break;case"5/1 arm":g.loanTerm=g.refiLoanTerm="5-1yr_arm";break;case"3/1 arm":g.loanTerm=g.refiLoanTerm="3-1yr_arm";break;case"10 year fixed":g.loanTerm=g.refiLoanTerm="10yr_fixed";break;case"15 year fixed":g.loanTerm=g.refiLoanTerm="15yr_fixed";break;case"20 year fixed":g.loanTerm=g.refiLoanTerm="20yr_fixed";break;default:g.loanTerm=g.refiLoanTerm="30yr_fixed"}if(e.purchasePrice&&(g.purchasePrice=r.cleanNumber(e.purchasePrice)),e.percent&&(g.downPaymentPercentage=r.cleanNumber(e.percent),g.downPaymentAmount=p(g.purchasePrice,g.downPaymentPercentage)),e.downPayment&&(g.downPaymentAmount=r.cleanNumber(e.downPayment),g.downPaymentPercentage=m(g.purchasePrice,g.downPaymentAmount)),g.purchasePricePlaceholder=g.purchasePriceText=r.numberWithComma(g.purchasePrice),g.downPaymentAmountPlaceholder=g.downPaymentAmountText=r.numberWithComma(g.downPaymentAmount),g.downPaymentPercentagePlaceholder=g.downPaymentPercentageText=g.downPaymentPercentage,e.propertyValue&&(g.propertyValue=r.cleanNumber(e.propertyValue)),g.propertyValuePlaceholder=g.propertyValueText=r.numberWithComma(g.propertyValue),e.currentLoanBalance&&(g.currentLoanBalance=r.cleanNumber(e.currentLoanBalance)),g.currentLoanBalancePlaceholder=g.currentLoanBalanceText=r.numberWithComma(g.currentLoanBalance),e.sort)switch(e.sort.toLowerCase()){case"name":g.sortField="name";break;case"rate":g.sortField="rate";break;case"payment":g.sortField="payment";break;default:g.sortField="apr"}e.sortDirection&&("desc"===e.sortDirection.toLowerCase()?g.sortFields[g.sortField].dir="-":g.sortFields[g.sortField].dir="+"),e.showFilters&&"true"===e.showFilters.toLowerCase()&&c(),e.perPage&&(g.desktop.pagination=parseInt(e.perPage)||g.desktop.pagination),e.perPageMobile&&(g.mobile.pagination=parseInt(e.perPageMobile)||g.mobile.pagination)}(),s(!0)}angular.module("app.ui").controller("MfMortgageFilterTableController",e),e.$inject=["$scope","productFeedService","$location","mfFilterTableService"]}(),function(){"use strict";function e(){return{restrict:"E",controller:"MfMortgageFilterTableController",controllerAs:"vm",scope:{headline:"@",description:"@",productFeed:"@",disclosure:"@",pagination:"@",paginationMobile:"@",cta:"@",placement:"@"},templateUrl:"/static/app/ng/ui/mf-mortgage-filter-table/mf-mortgage-filter-table.html"}}angular.module("app.ui").directive("mfMortgageFilterTable",e)}(),function(){"use strict";function e(e,t,n,r){t.product?n.get({id:t.product,placement:t.placement}).$promise.then(function(n){n.title=t.rowTitle||n.title,n.subtitle=t.rowSubtitle||n.subtitle,n.cta=t.cta||n.cta,e.products=[n]}):t.productFeed&&r.get(t.productFeed,t.placement).then(function(n){var r=n.results.slice(0,parseInt(t.numProducts));_.each(r,function(e){e.cta=t.cta||e.cta}),e.products=r})}angular.module("app.ui").controller("MfProductRowController",e),e.$inject=["$scope","$attrs","productService","productFeedService"]}(),function(){"use strict";function e(){return{restrict:"AE",scope:{placement:"@"},controller:"MfProductRowController",templateUrl:"/static/app/ng/ui/mf-product-row/mf-product-row.html"}}angular.module("app.ui").directive("mfProductRow",e)}(),function(){"use strict";function e(e,t,n,r,a){function o(){function e(){c.document.addEventListener("mouseleave",o),c.document.addEventListener("mouseenter",i)}function a(){c.document.removeEventListener("mouseleave",o),c.document.removeEventListener("mouseenter",i)}function o(e){e.clientY>0||(s=r(l,u.delay))}function i(){c.delayTimer&&(r.cancel(s),s=null)}function l(){if(t.getObject("mfEmailCaptured"))return void a();angular.element(".js-modal-active").length||(n.trigger("mfOptinLeaveOpen"),t.putObject("mfOptinModal","true",{expires:c.expiration}),a())}if(!t.getObject("mfOptinModal")){var u={timer:1e3,delay:0},s=null;r(e,u.timer)}}function i(){function e(){a.addEventListener("scroll",i)}function o(){a.removeEventListener("scroll",i)}function i(e){u&&(r.cancel(u),u=null),u=r(function(){var e=angular.element(".c-blog-post"),t=0;t=e.length>0?e.height():n[0].body.clientHeight,a.scrollY/t>.5&&l()},200)}function l(){if(t.getObject("mfEmailCaptured"))return void o();n.trigger("mfOptinSlideInOpen"),t.putObject("mfOptinScroll","true",{expires:c.expiration}),o()}if(!t.getObject("mfOptinScroll")){var u=null;r(function(){e()},1e3)}}function l(){function e(){"hidden"in document?document.removeEventListener("visibilitychange",r):"mozHidden"in document?document.removeEventListener("mozvisibilitychange",r):"webkitHidden"in document?document.removeEventListener("webkitvisibilitychange",r):"msHidden"in document?document.removeEventListener("msvisibilitychange",r):"onfocusin"in document&&(document.onfocusin=document.onfocusout=null)}function r(){if(t.getObject("mfEmailCaptured"))return void e();angular.element(".js-modal-active").length||(n.trigger("mfOptinReturnOpen"),t.putObject("mfOptinModal","true",{expires:c.expiration}),e())}t.getObject("mfOptinModal")||function(){"hidden"in document?document.addEventListener("visibilitychange",r):"mozHidden"in document?document.addEventListener("mozvisibilitychange",r):"webkitHidden"in document?document.addEventListener("webkitvisibilitychange",r):"msHidden"in document?document.addEventListener("msvisibilitychange",r):"onfocusin"in document&&(document.onfocusin=document.onfocusout=r)}()}var c=this;if(c.document=n[0].documentElement,c.expiration=new Date,c.expiration.setDate(c.expiration.getDate()+15),c.expiration=c.expiration.toUTCString(),("None"==MF.user_email||null===MF.user_email)&&e.actions&&""!==e.actions){c.actionNames=e.actions.split(","),c.actions={leave:o,scroll:i,returnToPage:l};for(var u=0;u<c.actionNames.length;u++)c.actions[c.actionNames[u]]()}}angular.module("app.ui").controller("MfOptinController",e),e.$inject=["$attrs","$cookies","$document","$timeout","$window"]}(),function(){"use strict";function e(){return{restrict:"E",controller:"MfOptinController",controllerAs:"vm",scope:{actions:"@"},transclude:!0,templateUrl:"/static/app/ng/ui/mf-optin/mf-optin.html"}}angular.module("app.ui").directive("mfOptin",e)}(),function(){"use strict";function e(e,t,n,r){function a(){i.loading=!0;var n=e.productFeed;i.zip&&5==i.zip.length&&(n+="&zipcode_override="+i.zip),t.get(n,"savings-filter-table").then(function(e){i.products=e.results,i.filteredProducts=i.products,r.filterDeposit(),i.loading=!1})}function o(e){return e.min_balance_open<=i.depositAmountNumber}var i=this;r.setController(i),i.getProducts=a,i.filterFunction=o,i.filterDeposit=r.filterDeposit,i.filterZip=r.filterZip,i.sort=r.sort,i.range=r.range,i.changePage=r.changePage,i.desktop={pagination:+e.pagination||10,currentPage:1,totalPages:0,products:[],currentPageProducts:[],displayResults:{min:0,max:0}},i.mobile={pagination:+e.paginationMobile||3,currentPage:1,totalPages:0,products:[],currentPageProducts:[],displayResults:{min:0,max:0}},i.breakpoints=[i.mobile,i.desktop],i.sortFields={name:{dir:"+",primary:"name"},apy:{dir:"-",primary:"apy",number:!0},minDeposit:{dir:"+",primary:"min_balance_open",number:!0}},i.sortField="apy",i.minDepositAmount=100,i.maxDepositAmount=1e6,i.showDepositError=!1,i.cta=e.cta||"Next",i.selectSort="default",i.depositAmountNumber=e.depositAmount||5e3,i.depositAmountText=r.numberWithComma(i.depositAmountNumber),i.invalidAmount=!1,i.depositAmountContent="<p>The amount of money you plan to deposit in the Savings Account at opening.</p>",i.productRowTemplateDesktop="/static/app/ng/ui/mf-savings-filter-table/product-row-template-desktop.html",i.productRowTemplateMobile="/static/app/ng/ui/mf-savings-filter-table/product-row-template-mobile.html",function(){var e=n.search();e.zip?i.zip=r.cleanNumber(e.zip):MF&&MF.postal_code&&(i.zip=MF.postal_code),i.zipPlaceholder=i.zip,e.depositAmount&&(i.depositAmountNumber=r.cleanNumber(e.depositAmount)),i.depositAmountText=r.numberWithComma(i.depositAmountNumber),e.perPage&&(i.desktop.pagination=parseInt(e.perPage)||i.desktop.pagination),e.perPageMobile&&(i.mobile.pagination=parseInt(e.perPageMobile)||i.mobile.pagination),e.minDepositAmount&&(i.minDepositAmount=parseInt(e.minDepositAmount)),e.maxDepositAmount&&(i.maxDepositAmount=parseInt(e.maxDepositAmount)),e.showDepositError&&"true"===e.showDepositError.toLowerCase()&&(i.showDepositError=!0)}(),a()}angular.module("app.ui").controller("MfSavingsFilterTableController",e),e.$inject=["$scope","productFeedService","$location","mfFilterTableService"]}(),function(){"use strict";function e(){return{restrict:"E",controller:"MfSavingsFilterTableController",controllerAs:"vm",scope:{headline:"@",description:"@",productFeed:"@",disclosure:"@",depositAmount:"@",pagination:"@",paginationMobile:"@",cta:"@",placement:"@"},templateUrl:"/static/app/ng/ui/mf-savings-filter-table/mf-savings-filter-table.html"}}angular.module("app.ui").directive("mfSavingsFilterTable",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"MfCdsFilterTableController",controllerAs:"vm",scope:{headline:"@",description:"@",productFeed:"@",disclosure:"@",depositAmount:"@",pagination:"@",paginationMobile:"@",cta:"@",placement:"@"},templateUrl:"/static/app/ng/ui/mf-cds-filter-table/mf-cds-filter-table.html"}}angular.module("app.ui").directive("mfCdsFilterTable",e)}(),function(){"use strict";function e(e,t,n,r){function a(){r.paginateAndSort(),r.calcDisplayedResults()}function o(){l.loading=!0;var n=e.productFeed;l.zip&&5==l.zip.length&&(n+="&zipcode_override="+l.zip),t.get(n,"cds-filter-table").then(function(e){l.products=[];for(var t=0;t<e.results.length;t++)for(var n=0;n<e.results[t].cd_account_rates.length;n++){var a=e.results[t].cd_account_rates[n],o=JSON.parse(JSON.stringify(e.results[t]));o.id=l.products.length+1,o.deposit_term=a.deposit_term,o.deposit_term_display=a.deposit_term_display,o.apy=a.apy,l.products.push(o)}l.filteredProducts=l.products,r.filterDeposit(),l.loading=!1})}function i(e){return e.minimum_deposit<=l.depositAmountNumber&&e.deposit_term<=+l.maxTerm}var l=this;r.setController(l),l.changeTerm=a,l.getProducts=o,l.filterFunction=i,l.filterDeposit=r.filterDeposit,l.filterZip=r.filterZip,l.sort=r.sort,l.range=r.range,l.changePage=r.changePage,l.desktop={pagination:+e.pagination||10,currentPage:1,totalPages:0,products:[],currentPageProducts:[],displayResults:{min:0,max:0}},l.mobile={pagination:+e.paginationMobile||3,currentPage:1,totalPages:0,products:[],currentPageProducts:[],displayResults:{min:0,max:0}},l.breakpoints=[l.mobile,l.desktop],l.sortFields={name:{dir:"+",primary:"company.name"},apy:{dir:"-",primary:"apy",number:!0},term:{dir:"+",primary:"deposit_term",number:!0},minDeposit:{dir:"+",primary:"minimum_deposit",number:!0}},l.sortField="apy",l.minDepositAmount=100,l.maxDepositAmount=1e6,l.showDepositError=!1,l.cta=e.cta||"Next",l.selectSort="default",l.depositAmountNumber=e.depositAmount||5e3,l.depositAmountText=r.numberWithComma(l.depositAmountNumber),l.invalidAmount=!1,l.maxTerm="72",l.depositAmountContent="<p>The amount of money you plan to deposit in the CD at opening.</p>",l.productRowTemplateDesktop="/static/app/ng/ui/mf-cds-filter-table/product-row-template-desktop.html",l.productRowTemplateMobile="/static/app/ng/ui/mf-cds-filter-table/product-row-template-mobile.html",function(){var e=n.search();if(e.zip?l.zip=r.cleanNumber(e.zip):MF&&MF.postal_code&&(l.zip=MF.postal_code),l.zipPlaceholder=l.zip,e.depositAmount&&(l.depositAmountNumber=r.cleanNumber(e.depositAmount)),l.depositAmountText=r.numberWithComma(l.depositAmountNumber),e.terms)switch(e.terms.toLowerCase()){case"6 month":l.maxTerm="6";break;case"12 month":l.maxTerm="12";break;case"18 month":l.maxTerm="18";break;case"2 year":l.maxTerm="24";break;case"3 year":l.maxTerm="36";break;case"4 year":l.maxTerm="48";break;case"5 year":l.maxTerm="60";break;default:l.maxTerm="72"}e.perPage&&(l.desktop.pagination=parseInt(e.perPage)||l.desktop.pagination),e.perPageMobile&&(l.mobile.pagination=parseInt(e.perPageMobile)||l.mobile.pagination),e.minDepositAmount&&(l.minDepositAmount=parseInt(e.minDepositAmount)),e.maxDepositAmount&&(l.maxDepositAmount=parseInt(e.maxDepositAmount)),e.showDepositError&&"true"===e.showDepositError.toLowerCase()&&(l.showDepositError=!0)}(),o()}angular.module("app.ui").controller("MfCdsFilterTableController",e),e.$inject=["$scope","productFeedService","$location","mfFilterTableService"]}(),function(){"use strict";function e(){function e(e,t){var n=angular.element(e).parents(".o-mf-flow"),r=new TimelineLite({onComplete:t});r.add(TweenLite.to(n,.25,{height:"30rem",ease:Expo.easeOut})),r.add(TweenLite.to(e,.25,{left:0,ease:Back.easeOut.config(1)})),angular.element(e).hasClass("mf-flow-thanks")&&r.add(TweenLite.to(n,.25,{height:"200px"}))}function t(e,t){TweenLite.to(e,.001,{opacity:0,onComplete:t})}return{enter:e,leave:t}}angular.module("app.ui").animation(".o-mf-flow-step",e)}(),function(){"use strict";function e(e,t,n){function r(e,t,n,r){l.created?(l.updateLocalSubmission(t,n),l.updateSubmission()):e?(l.createSubmission(),l.created=!0):l.updateLocalSubmission(t,n),r||l.stepActive++}function a(){t.create(l.submission).then(function(e){l.submission=e.data,null===l.submission.results&&(l.submission.results={})}).catch(function(e){console.error("Submission creation error.",e)})}function o(){t.update(l.submission.id,l.submission).then(function(e){l.submission=e.data}).catch(function(e){console.error("Submission update error.",e)})}function i(e,t){l.submission.results[e]=t}var l=this;l.handleSubmission=r,l.createSubmission=a,l.updateSubmission=o,l.updateLocalSubmission=i,l.created=!1,"None"!==MF.user_email&&null!==MF.user_email&&(l.auth=!0),l.stepActive=-1,n.get({slug:l.flowSlug},function(e){l.flow=e,l.count=l.flow.steps.length,"email"===l.flow.steps[0].type&&(l.stepActive=0),l.submission={flow:l.flow.id,results:{}}}),e.$on("doNext",function(e,t,n,r){l.handleSubmission(!1,t,n,r)}),e.$on("emailCaptured",function(){l.handleSubmission(!0)})}angular.module("app.ui").controller("MfFlowController",e),e.$inject=["$scope","submissionService","flowService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"/static/app/ng/ui/mf-flow/mf-flow.html",scope:{type:"@"},bindToController:{flowSlug:"@flow"},controller:"MfFlowController",controllerAs:"vm"}}angular.module("app.ui").directive("mfFlow",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{vm:"="},templateUrl:"/static/app/ng/ui/mf-mortgage-rate-table/mf-mortgage-rate-table.html"}}angular.module("app.ui").directive("mfMortgageRateTable",e)}(),function(){"use strict";function e(){return{restrict:"E",transclude:!0,scope:{type:"@",product:"=",placement:"@"},templateUrl:function(){return"/static/app/ng/ui/cta-button/cta-button.html"}}}angular.module("app.ui").directive("ctaButton",e)}(),function(){"use strict";function e(e,t){function n(e){_.each(e,function(e){e.cd_account_rates&&(_.each(e.cd_account_rates,function(t){(!e.apy||t.apy>e.apy)&&(e.apy=t.apy,e.deposit_term=t.deposit_term,e.deposit_term_display=t.deposit_term_display)}),e.min_balance_open=e.minimum_deposit)})}var r=this;!function(){e.productFeed?(e.source="productFeed",t.get(e.productFeed,"rate-table").then(function(t){var r=t.results;n(r),e.paid=_.filter(r,function(e){return e.reporting_url}),e.free=_.filter(r,function(e){return!e.reporting_url})})):(e.$watch("paid",function(){n(e.paid)}),e.$watch("free",function(){n(e.free)}))}(),r.showTakeover=function(){e.$broadcast("takeover")}}angular.module("app.ui").controller("MfSavingsRateTableController",e),e.$inject=["$scope","productFeedService"]}(),function(){"use strict";function e(){return{restrict:"E",controller:"MfSavingsRateTableController",controllerAs:"vm",scope:{paid:"=?",free:"=?",attribution:"=",disclaimer:"=",source:"=?",tableTitle:"@?",productFeed:"@?"},templateUrl:"/static/app/ng/ui/mf-savings-rate-table/mf-savings-rate-table.html"}}angular.module("app.ui").directive("mfSavingsRateTable",e)}(),function(){"use strict";function e(e){var t=this;t.show=!1,e.$observe("mfTooltip",function(e){t.text=e})}angular.module("app.ui").controller("MfTooltipController",e),e.$inject=["$attrs"]}(),function(){"use strict";function e(){return{restrict:"A",controller:"MfTooltipController",controllerAs:"vm",transclude:!0,templateUrl:"/static/app/ng/ui/mf-tooltip/mf-tooltip.html"}}angular.module("app.ui").directive("mfTooltip",e)}(),function(){"use strict";function e(e,t,n,r,a,o,i){var l=e.placement||"none"
;e.queryString=r.location.search,e.customWidth={width:e.width},t.linkUrl?e.linkUrl=t.linkUrl:(isNaN(e.product)||i.get({id:e.product,placement:l},function(t){e.product=t}),e.analyticsOn=!1,e.$watch("product",function(){if(e.product&&e.product.name&&("thirdPartyImpression"in t&&e.product.imptracker&&(e.thirdPartyImpression=!0),!("analyticsOff"in t))){var r={placement_name:t.placement||"none",product_name:e.product.name,product_display_name:e.product.display_name,product_id:e.product.id,value:e.product.name,placement_id:e.product.placement.id||null,placement_reporting_id:e.product.placement.reporting_id||null};e.analyticsOn||("analyticsClickOnly"in t?o.trackClick(n,r,e.$id):o.trackStandard(n,r,e.$id),"analyticsClickOnly"in t?o.trackClick(n,r,e.$id):o.trackStandard(n,r,e.$id),e.analyticsOn=!0)}}))}angular.module("app.ui").controller("ReportingLinkController",e),e.$inject=["$scope","$attrs","$element","$window","$http","analyticsService","productService"]}(),function(){"use strict";function e(){return{restrict:"AE",transclude:!0,replace:!0,scope:{product:"=",placement:"@",width:"@",linkUrl:"@"},controller:"ReportingLinkController",templateUrl:function(e,t){return t.linkUrl?"/static/app/ng/ui/reporting-link/reporting-standard-non-product.html":["text-link","button","button-block","inline-cta"].indexOf(t.type)>=0?"/static/app/ng/ui/reporting-link/reporting-"+t.type+".html":"/static/app/ng/ui/reporting-link/reporting-text-link.html"}}}angular.module("app.ui").directive("reportingLink",e)}(),function(){"use strict";function e(){return{restrict:"AE",transclude:!0,scope:{product:"=?",productFeed:"@?",buttonText:"@",belowButtonText:"@",placement:"@",titleText:"@"},controller:"MfProductCardController",templateUrl:"/static/app/ng/ui/mf-product-card/mf-product-card.html"}}angular.module("app.ui").directive("mfProductCard",e)}(),function(){"use strict";function e(e,t,n,r){function a(t){e.displayedTitle=e.displayedTitle||t}a(t.titleText),e.productFeed?r.get(e.productFeed,t.placement).then(function(t){e.product=t.results[0],a(e.product.title),e.productObjReady=!0}):isNaN(e.product)?(a(e.product.title),e.productObjReady=!0):n.get({id:e.product,placement:t.placement}).$promise.then(function(t){e.product=t,a(e.product.title),e.productObjReady=!0})}angular.module("app.ui").controller("MfProductCardController",e),e.$inject=["$scope","$attrs","productService","productFeedService"]}(),function(){"use strict";function e(){return{restrict:"A",transclude:!0,template:'<div ng-show="showVariation" ng-transclude></div>',scope:{variationId:"@"},link:function(e,t,n){e.$on("variationSelected",function(t,n){e.showVariation=e.variationId===n})}}}angular.module("app.ui").directive("mfExperimentVariation",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pagination:"=",changePage:"&?",range:"&?",isMobile:"=?"},templateUrl:"/static/app/ng/ui/utils/mf-filter-table/pagination.html"}}angular.module("app.ui").directive("mfFilterTablePagination",e)}(),function(){"use strict";function e(e,t){function n(e){w=e}function r(e){var t=e.cta_image_url,n=e.serp_image_url;return void 0===t||"/media/"===t?n:t}function a(e,n){return e instanceof String&&(e=new Date(e)),t("date")(e,n)}function o(e){return e.toString().replace(/\D/g,"")}function i(e){return e=o(e),t("number")(e.toString())}function l(e,t){var n=w.desktop;t&&(n=w.mobile),n.currentPage=e,n.currentPage>n.totalPages&&(n.currentPage=n.totalPages),n.currentPage<1&&(n.currentPage=1),n.currentPageProducts=n.products.slice((n.currentPage-1)*n.pagination,n.pagination*n.currentPage),f()}function c(){}function u(e,t){return t.split(".").reduce(function(e,t){return e?e[t]:null},e||self)}function s(e){return function(t,n){var r=u(t,e.primary).toString().toLowerCase(),a=u(n,e.primary).toString().toLowerCase(),o=0,i=0;return e.secondary&&(o=u(t,e.secondary).toString().toLowerCase(),i=u(n,e.secondary).toString().toLowerCase()),e.number&&(r=Number(r),a=Number(a),o=Number(o),i=Number(i)),"+"===e.dir?r>a?1:r<a?-1:o>i?1:o<i?-1:0:r<a?1:r>a?-1:o<i?1:o>i?-1:0}}function d(e,t){if(!w.products)return!1;Array.from(document.getElementsByClassName("o-filter-table__sort")).forEach(function(e){e.classList.remove("is-active")}),t.currentTarget.classList.add("is-active"),w.sortField=e,w.sortFields[e].dir=p(w.sortFields[e].dir),b()}function p(e){return"-"===e?"+":"-"}function m(e){return new Array(e)}function f(){for(var e=0;e<w.breakpoints.length;e++){var t=w.breakpoints[e].pagination,n=w.breakpoints[e].currentPage,r=w.breakpoints[e].products,a=t*(n-1)+1,o=t*n;w.breakpoints[e].totalPages=Math.ceil(r.length/t),n===w.breakpoints[e].totalPages&&(o=r.length),w.breakpoints[e].displayResults={min:a,max:o}}}function g(){w.debug=!1,e.search().debug&&(w.debug=!0)}function v(){w.zip=o(w.zip),5===w.zip.length&&(w.getProducts(),w.zipFiltered=!0),4===w.zip.length&&w.zipFiltered&&(w.getProducts(),w.zipFiltered=!1),w.zip.length>5&&(w.zip=w.zip.substr(0,5))}function h(){w.depositAmountNumber=o(w.depositAmountText),w.depositAmountNumber>w.maxDepositAmount&&(w.depositAmountNumber=w.maxDepositAmount),w.depositAmountText=i(w.depositAmountNumber),w.depositAmountNumber<w.minDepositAmount?(w.depositAmountNumber=w.minDepositAmount,w.invalidAmount=w.showDepositError):w.invalidAmount=!1,b(),f()}function b(){w.paid=w.products.filter(function(e){return e.reporting_url}),w.editorial=w.products.filter(function(e){return!e.reporting_url});for(var e=0;e<w.breakpoints.length;e++){w.filterFunction&&(w.paid=w.paid.filter(w.filterFunction),w.editorial=w.editorial.filter(w.filterFunction)),w.sortField&&(w.paid.sort(s(w.sortFields[w.sortField])),w.editorial.sort(s(w.sortFields[w.sortField])));var t=w.breakpoints[e].pagination,n=w.paid.length%t;w.breakpoints[e].products=w.paid,w.breakpoints[e].currentPage=1,(n||0===n)&&(w.breakpoints[e].products=w.breakpoints[e].products.concat(w.editorial.slice(0,t-n))),w.breakpoints[e].currentPageProducts=w.breakpoints[e].products.slice(0,t)}}var y={},w={};return y.setController=n,y.logoURL=r,y.formatDate=a,y.cleanNumber=o,y.numberWithComma=i,y.formatDate=a,y.changePage=l,y.scrollTop=c,y.sort=d,y.toggleDir=p,y.range=m,y.calcDisplayedResults=f,y.setDebug=g,y.filterZip=v,y.filterDeposit=h,y.paginateAndSort=b,y}angular.module("app.ui.utils").factory("mfFilterTableService",e),e.$inject=["$location","$filter"]}(),function(){"use strict";function e(e){function t(e,t,n){e.$watch(function(){return $(t).find("a").length},function(){e.$evalAsync(function(){var e=n.childLinkTarget||"_blank";$(t).find("a").each(function(){var t=$(this);t.hasClass("o-mf-popover__trigger")||t.attr("target",e)})})})}return{restrict:"A",scope:!1,link:t}}angular.module("app.ui.utils").directive("childLinkTarget",e),e.$inject=["$window"]}(),function(){"use strict";function e(e){function t(t,n,r){var a=0;r.$observe("mf-resize",function(t){a=e.parseInt(t||0)}),angular.element(e).on("resize",e._.debounce(function(){t.$broadcast("mf::resize")},a))}return{restrict:"A",scope:!1,link:t}}angular.module("app.ui.utils").directive("mfResize",e),e.$inject=["$window"]}(),function(){"use strict";function e(e){function t(t,n,r){var a=0;r.$observe("mf-scroll",function(t){a=e.parseInt(t||0)}),angular.element(e).on("scroll",e._.debounce(function(){t.$broadcast("mf::scroll")},a))}return{restrict:"A",scope:!1,link:t}}angular.module("app.ui.utils").directive("mfScroll",e),e.$inject=["$window"]}(),function(){"use strict";function e(e){function t(t,r,a){t.$watch(function(){return $(r).find("a").length},function(){t.$evalAsync(function(){$(r).find("a").each(function(){$(this).attr("data-widget-recommendation-click")||$(this).hasClass("o-mf-popover__trigger")||($(this).click(function(){e.parentIFrame&&!e.widgetClickEventFired&&(e.MF&&e.MF.scriptless_integration?e.mf.track("widget-recommendation-click"):e.parentIFrame.sendMessage("widgetClick"),e.widgetClickEventFired=!0)}),$(this).attr("data-widget-recommendation-click","true"))})})}),e.MF?e.MF.scriptless_integration&&n():t.$watch(function(){return e.MF},function(){e.MF.scriptless_integration&&n()})}function n(){e.widgetImpressionEventsFired||(e.mf.track("widget-pageview"),e.widgetImpressionEventsFired=!0)}return{restrict:"A",scope:!1,link:t}}angular.module("app.ui.utils").directive("widgetEvents",e),e.$inject=["$window"]}(),function(){"use strict";function e(e,n){return{restrict:"E",link:function(r,a,o){t(e,n,a,o.flowSlug,250)}}}function t(e,n,r,a,o){o*=1.5,e.get("/api/flows/"+a+"/third_party_result").then(function(i){202==i.status?(n(function(){t(e,n,r,a,o)},o),r.text("Waitng for response...")):200==i.status&&r.text(JSON.stringify(i.data))})}angular.module("app.ui").directive("mfFlowResult",e),e.$inject=["$http","$timeout"]}(),function(){"use strict";function e(e,t,n){function r(e,t,r){var a=t||s.step.data_field.field_name;n.$emit("doNext",a,e,r)}function a(e){5===s.zipcode.length?(s.highlighted=!1,t.validate(s.zipcode)?(s.message="Validating Zip...",t.getLocation(s.zipcode).then(function(t){if(t.data.error)return s.message="Please enter a valid zipcode.",void(s.validZip=!1);s.message=e?t.data.city+", "+t.data.state:"",s.city=t.data.city,s.validZip=!0},function(e){console.log(e),s.message="Unable to validate zipcode.",s.validZip=!0})):s.validZip=!1):s.validZip=!1}function o(){s.validZip?(s.message="",s.highlighted=!1,s.doNext(s.zipcode)):(s.message="Please enter a valid zipcode.",s.highlighted=!0)}function i(){if(!(s.year&&s.month&&s.day&&e.valid(s.year,s.month,s.day)))return s.message="Please enter a valid date.",void(s.highlighted=!0);s.message="",s.highlighted=!1;var t=s.month+"/"+s.day+"/"+s.year;s.doNext(t)}function l(e){if(!s.address||!s.city||!s.zipcode)return s.message="Please enter a valid address.",void(s.highlighted=!0);var t=u(e);s.message="",s.highlighted=!1,s.doNext(s.address,t+"street_address",!0),s.doNext(s.city,t+"city",!0),s.doNext(s.state,t+"state",!0),s.doNext(s.zipcode,t+"zipcode",!1)}function c(e){if(!s.firstName||!s.lastName)return s.message="Please enter your full name.",void(s.highlighted=!0);var t=u(e);s.message="",s.highlighted=!1,s.doNext(s.firstName,t+"first_name",!0),s.doNext(s.lastName,t+"last_name",!1)}function u(e){var t="",n=/(\w+)__\w+/i,r=n.exec(e.label);return r&&(t=r[1]+"__"),t}var s=this;if(s.doNext=r,s.validateZip=a,s.zipNext=o,s.dateNext=i,s.addressNext=l,s.nameNext=c,!s.step||"zipcode"!==s.step.type&&"address"!==s.step.type||(s.zipcode=MF.postal_code||"",s.zipcode&&s.validateZip(!1)),s.step&&"slider"===s.step.type){s.sliderAmount=s.step.start_value;var d={min:s.step.min,max:s.step.max};angular.merge(d,s.step.slider_additional_range_config),s.sliderConfig={start:s.sliderAmount,connect:"lower",range:d,step:s.step.step_value}}s.step&&"birthdate"===s.step.type&&(s.dateData={years:e.years(!0),months:e.months(),days:e.days()}),s.step&&"address"===s.step.type&&n.$watch("vm.address",function(e){if(e&&e.reference){console.log(e);for(var t=s.address.address_components,n=0;n<t.length;n++)"locality"===t[n].types[0]&&(s.city=t[n].long_name),"postal_code"===t[n].types[0]&&(s.zipcode=t[n].long_name),"administrative_area_level_1"===t[n].types[0]&&(s.state=t[n].short_name);s.addressObj=s.address,s.address=s.address.name}})}angular.module("app.ui").controller("MfFlowStepController",e),e.$inject=["dateService","zipcodeService","$scope"]}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,bindToController:{step:"="},scope:!0,controller:"MfFlowStepController",controllerAs:"vm",templateUrl:"/static/app/ng/ui/mf-flow/mf-flow-step/mf-flow-step.html"}}angular.module("app.ui").directive("mfFlowStep",e)}(),function(){"use strict";function e(e,t,n,r,a,o){function i(){o.get(e.productFeed,"autoloan-feed-calculator").then(function(e){t.product=e.results[0],s.offerAPR=t.product.apr&&parseFloat(t.product.apr)||s.offerAPR,s.offerTerm=t.product.term&&parseInt(t.product.term)||s.offerTerm})}function l(){var e={start:15e3,connect:"lower",range:{min:2e3,max:115e3},step:1e3};s.loanAmountSlider={label:"Loan Amount",value:15e3,identifier:"loan-amount-slider",config:e,onChange:function(){s.eventsService.sliderChange("loanAmountSlider")},filter:function(e){return n("abbreviateCurrency")(e)}};var t={start:6,connect:"lower",range:{min:3,max:10},step:.1};s.aprSlider={label:"Current APR",value:6,identifier:"apr-slider",tooltip:"Auto loan APRs typically range from 2-10%, with the national average hovering around 6%",config:t,onChange:function(){s.eventsService.sliderChange("aprSlider")},filter:function(e){return n("percentage")(e,2)}}}function c(){s.monthlySavings={label:"Per Month",filter:function(e){return n("abbreviateCurrency")(e)}},s.interestSaved={label:"In Interest",filter:function(e){return n("abbreviateCurrency")(e)}};var e=function(){s.savingsObj=a.updateSavings({offerAPR:s.offerAPR,offerTerm:s.offerTerm,currentDebt:s.loanAmountSlider.value,currentAPR:s.aprSlider.value}),s.monthlySavings.value=s.savingsObj.monthlySavings,s.interestSaved.value=s.savingsObj.interestSaved};t.$watchGroup(["vm.loanAmountSlider.value","vm.aprSlider.value"],function(){e()}),e()}function u(){var e=function(){var e={debtAmount:s.savingsObj.currentDebt,currentAPR:s.savingsObj.currentAPR,totalSavings:s.savingsObj.interestSaved,monthlySavings:s.savingsObj.monthlySavings};s.eventsService.ctaClicked(t.product,e)};s.calculatorConfig={calculatorName:s.calculatorName,calculatorTitle:t.calculatorTitle||"Refinance Your Auto Loan Debt",sliders:[s.loanAmountSlider,s.aprSlider],resultsTitle:t.resultsTitle||"Potential Savings",results:[s.monthlySavings,s.interestSaved],disclaimerTemplate:"/static/auto_loans/ng/mf-auto-loan-calculator/mf-auto-loan-calculator-disclaimer.html",ctaClicked:e,ctaText:t.ctaText||"Learn More"}}var s=this;s.calculatorName="autoloan",s.eventsService=new r(s.calculatorName),s.offerAPR=parseFloat(t.apr)||2.5,s.offerTerm=parseInt(t.term)||60,s.helpTextIsCollapsed=!0,s.loanAmountSlider={},s.aprSlider={},s.monthlySavings={},s.interestSaved={},s.savingsObj={},s.calculatorConfig={},function(){s.eventsService.calculatorViewed(),e.productFeed&&i(),l(),c(),u()}()}angular.module("app.autoLoan").controller("AutoLoanCalculatorController",e),e.$inject=["$attrs","$scope","$filter","MfCalculatorEventsService","loanCalculationService","productFeedService"]}(),function(){"use strict";function e(){return{restrict:"AE",controller:"AutoLoanCalculatorController",controllerAs:"vm",scope:{calculatorTitle:"@",resultsTitle:"@",ctaText:"@",product:"=?",term:"@?",apr:"@?"},templateUrl:"/static/app/ng/ui/mf-calculator/mf-calculator-general-template.html"}}angular.module("app.autoLoan").directive("mfAutoLoanCalculator",e)}(),function(){"use strict";function e(){return{updateSavings:function(e){var t=.75*Math.min(1,e.yearsWithProvider/10);return e.monthlySavings=e.currentMonthlyPayment*t,e.annualSavings=12*e.monthlySavings,e}}}angular.module("app.carInsurance").factory("carInsuranceCalculatorService",e)}(),function(){"use strict";function e(e,t,n,r,a,o){function i(){o.get(t.productFeed,"car-insurance-feed-calculator").then(function(t){e.product=t.results[0],u()})}function l(){var e={start:125,connect:"lower",range:{min:50,max:400},step:1};d.monthlyPaymentSlider={label:"Current Payment",value:125,identifier:"monthly-payment-slider",config:e,onChange:function(){d.eventsService.sliderChange("monthlyPaymentSlider")},filter:function(e){return n("abbreviateCurrency")(e)}};var t={start:4,connect:"lower",range:{min:.5,max:10},step:.5};d.yearsWithProviderSlider={label:"Years With Provider",value:4,identifier:"years-with-provider-slider",config:t,onChange:function(){d.eventsService.sliderChange("yearsWithProviderSlider")},filter:function(e){return n("number")(e,1)}}}function c(){d.monthlySavings={label:"Per Month",filter:function(e){return n("abbreviateCurrency")(e)}},d.annualSavings={label:"Per Year",filter:function(e){return n("abbreviateCurrency")(e)}};var t=function(){d.savingsObj=a.updateSavings({currentMonthlyPayment:d.monthlyPaymentSlider.value,yearsWithProvider:d.yearsWithProviderSlider.value}),d.monthlySavings.value=d.savingsObj.monthlySavings,d.annualSavings.value=d.savingsObj.annualSavings};e.$watchGroup(["vm.monthlyPaymentSlider.value","vm.yearsWithProviderSlider.value"],function(){t()}),t()}function u(){var n=e.ctaText||"Learn More";t.productFeed&&e.product&&e.product.display_name&&(n=e.ctaText||"Save with "+e.product.display_name),d.calculatorConfig&&(d.calculatorConfig.ctaText=n)}function s(){var t=function(){var t={currentMonthlyPayment:d.savingsObj.currentMonthlyPayment,yearsWithProvider:d.savingsObj.yearsWithProvider,annualSavings:d.savingsObj.annualSavings,monthlySavings:d.savingsObj.monthlySavings};d.eventsService.ctaClicked(e.product,t)};d.calculatorConfig={calculatorName:d.calculatorName,calculatorTitle:e.calculatorTitle||"Calculate Your Car Insurance Savings",sliders:[d.monthlyPaymentSlider,d.yearsWithProviderSlider],resultsTitle:e.resultsTitle||"Potential Savings",results:[d.monthlySavings,d.annualSavings],disclaimerTemplate:"/static/auto_insurance/ng/mf-car-insurance-calculator/mf-car-insurance-calculator-disclaimer.html",ctaClicked:t},u()}var d=this;d.calculatorName="carinsurance",d.eventsService=new r(d.calculatorName),d.helpTextIsCollapsed=!0,d.monthlyPaymentSlider={},d.yearsWithProviderSlider={},d.monthlySavings={},d.annualSavings={},d.savingsObj={},d.calculatorConfig={},function(){d.eventsService.calculatorViewed(),t.productFeed&&i(),l(),c(),s()}()}angular.module("app.carInsurance").controller("CarInsuranceCalculatorController",e),e.$inject=["$scope","$attrs","$filter","MfCalculatorEventsService","carInsuranceCalculatorService","productFeedService"]}(),function(){"use strict";function e(){return{restrict:"AE",controller:"CarInsuranceCalculatorController",controllerAs:"vm",scope:{calculatorTitle:"@",resultsTitle:"@",ctaText:"@",product:"=?"},templateUrl:"/static/app/ng/ui/mf-calculator/mf-calculator-general-template.html"}}angular.module("app.carInsurance").directive("mfCarInsuranceCalculator",e)}(),function(){"use strict";function e(e,t,n,r){function a(){o.balancesObj=r.updateBalances({principal:o.principalSlider.value,termInYears:o.termSlider.value,offerAnnualRate:o.offerAnnualRate,averageAnnualRate:o.averageAnnualRate}),o.offerEndBalance.value=o.balancesObj.offerEndBalance,o.differenceOverAverage.value=o.balancesObj.differenceOverAverage}var o=this;o.calculatorName="investment";var i=new n(o.calculatorName);i.calculatorViewed(),o.offerAnnualRate=parseFloat(e.offerAnnualRate),o.averageAnnualRate=parseFloat(e.averageAnnualRate),o.dateNow=new Date,o.helpTextIsCollapsed=!0;var l={start:5e4,connect:"lower",range:{min:1e3,"80%":1e5,max:1e6},step:500};o.principalSlider={label:"Your Savings",value:5e4,identifier:"principal-slider",config:l,onChange:function(){i.sliderChange("principalSlider")},filter:function(e){return t("abbreviateCurrency")(e)}};var c={start:15,connect:"lower",range:{min:5,max:35},step:1};o.termSlider={label:"Years Invested",value:15,identifier:"term-slider",config:c,onChange:function(){i.sliderChange("termSlider")},filter:function(e){return t("number")(e,0)}},o.offerEndBalance={label:"Total Portfolio Balance",filter:function(e){return t("abbreviateCurrency")(e)}},o.differenceOverAverage={label:"Over National Average",filter:function(e){return t("abbreviateCurrency")(e)}},a(),e.$watchGroup(["vm.principalSlider.value","vm.termSlider.value"],function(){a()});var u=function(){var t={principal:o.balancesObj.principal,termInYears:o.balancesObj.termInYears,offerEndBalance:o.balancesObj.offerEndBalance,averageEndBalance:o.balancesObj.averageEndBalance,differenceOverAverage:o.balancesObj.differenceOverAverage};i.ctaClicked(e.product,t)};o.calculatorConfig={calculatorName:o.calculatorName,calculatorTitle:e.calculatorTitle||"Calculate Your Potential Returns",sliders:[o.principalSlider,o.termSlider],resultsTitle:e.resultsTitle||"Potential Returns",results:[o.offerEndBalance,o.differenceOverAverage],disclaimerTemplate:"/static/brokerages/ng/mf-investment-calculator/mf-investment-calculator-disclaimer.html",ctaClicked:u,ctaText:e.ctaText||"Learn More"}}angular.module("app.brokerage").controller("InvestmentCalculatorController",e),e.$inject=["$scope","$filter","MfCalculatorEventsService","compoundInterestCalculationService"]}(),function(){"use strict";function e(){return{restrict:"AE",controller:"InvestmentCalculatorController",controllerAs:"vm",scope:{calculatorTitle:"@",resultsTitle:"@",ctaText:"@",product:"=",offerAnnualRate:"@",averageAnnualRate:"@"},templateUrl:"/static/app/ng/ui/mf-calculator/mf-calculator-general-template.html"}}angular.module("app.brokerage").directive("mfInvestmentCalculator",e)}(),function(){"use strict";function e(){return{restrict:"AE",controller:"RetirementCalculatorController",controllerAs:"vm",scope:{calculatorTitle:"@",resultsTitle:"@",ctaText:"@",product:"=",offerAnnualRate:"@",averageAnnualRate:"@"},templateUrl:"/static/app/ng/ui/mf-calculator/mf-calculator-general-template.html"}}angular.module("app.brokerage").directive("mfRetirementCalculator",e)}(),function(){"use strict";function e(e,t,n,r){function a(){o.balancesObj=r.updateBalances({principal:o.principalSlider.value,termInYears:o.termSlider.value,offerAnnualRate:o.offerAnnualRate,averageAnnualRate:o.averageAnnualRate}),o.offerEndBalance.value=o.balancesObj.offerEndBalance,o.differenceOverAverage.value=o.balancesObj.differenceOverAverage}var o=this;o.calculatorName="retirement";var i=new n(o.calculatorName);i.calculatorViewed(),o.offerAnnualRate=parseFloat(e.offerAnnualRate),o.averageAnnualRate=parseFloat(e.averageAnnualRate),o.dateNow=new Date,o.helpTextIsCollapsed=!0;var l={start:5e4,connect:"lower",range:{min:1e3,"80%":1e5,max:1e6},step:500};o.principalSlider={label:"Your Savings",value:5e4,identifier:"principal-slider",config:l,onChange:function(){i.sliderChange("principalSlider")},filter:function(e){return t("abbreviateCurrency")(e)}};var c={start:15,connect:"lower",range:{min:5,max:35},step:1};o.termSlider={label:"Years to Retirement",value:15,identifier:"term-slider",config:c,onChange:function(){i.sliderChange("termSlider")},filter:function(e){return t("number")(e,0)}},o.offerEndBalance={label:"Total",filter:function(e){return t("abbreviateCurrency")(e)}},o.differenceOverAverage={label:"Over National Average",filter:function(e){return t("abbreviateCurrency")(e)}},a(),e.$watchGroup(["vm.principalSlider.value","vm.termSlider.value"],function(){a()});var u=function(){var t={principal:o.balancesObj.principal,yearsToRetirement:o.balancesObj.termInYears,offerEndBalance:o.balancesObj.offerEndBalance,averageEndBalance:o.balancesObj.averageEndBalance,differenceOverAverage:o.balancesObj.differenceOverAverage};i.ctaClicked(e.product,t)};o.calculatorConfig={calculatorName:o.calculatorName,calculatorTitle:e.calculatorTitle||"Calculate Your Retirement Savings",sliders:[o.principalSlider,o.termSlider],resultsTitle:e.resultsTitle||"Potential Savings",results:[o.offerEndBalance,o.differenceOverAverage],disclaimerTemplate:"/static/brokerages/ng/mf-investment-calculator/mf-investment-calculator-disclaimer.html",ctaClicked:u,ctaText:e.ctaText||"Learn More"}}angular.module("app.brokerage").controller("RetirementCalculatorController",e),e.$inject=["$scope","$filter","MfCalculatorEventsService","compoundInterestCalculationService"]}(),function(){"use strict";function e(e){function t(){return e.getProductList("cds/regular","cd-app").then(function(e){a.allCDs=e.results,a.disclaimer=e.disclaimer,a.attribution=e.attribution})}function n(){a.paidCDs=_.filter(a.allCDs,function(e){return e.reporting_url}),a.unpaidCDs=_.filter(a.allCDs,function(e){return!e.reporting_url})}function r(){var e=a.paidCDs.slice(0,3);a.highestAPYCD=_.max(e,function(e){var t=_.max(e.cd_account_rates,function(e){return e.interest_rate});return e.display_rate=t.interest_rate,e.display_rate}),a.lowestMinimumCD=_.min(e,function(e){return e.minimum_deposit})}var a=this;!function(){t().then(function(){n(),r()})}()}angular.module("app.cds").controller("CDAppController",e),e.$inject=["productsService"]}(),function(){"use strict";function e(e,t){function n(e,t){function n(e){var t="",n={zipcodeOverride:"zipcode_override",amount:"amount",limit:"limit",offset:"offset"};return _.each(n,function(n,r){e.hasOwnProperty(r)&&e[r]&&(t+="?"+n+"="+encodeURIComponent(e[r]))}),t}this.activate=function(e,n){var r=this;return this.ac.feed=this.makeProductFeedUrl(e,n),this.ac.feed?t.get(this.ac.feed,e.placement).then(function(e){r.ac.allAccounts=r.pickBestRatesFromApi(e.results),r.ac.disclaimer=e.disclaimer,r.ac.attribution=e.attribution,r.ac.source=e.source}).then(function(){return r.allPaidAccounts(),r.allUnpaidAccounts(),r.featuredAccounts(),r}):Promise.resolve(this)},this.pickBestRatesFromApi=function(e){return _.each(e,function(e){e.cd_account_rates&&(_.each(e.cd_account_rates,function(t){(!e.apy||t.apy>e.apy)&&(e.apy=t.apy,e.deposit_term=t.deposit_term,e.deposit_term_display=t.deposit_term_display)}),e.min_balance_open=e.minimum_deposit)}),e},this.allPaidAccounts=function(){return this.ac.allPaidAccounts=this.filterPaid(this.ac.allAccounts),this.ac.allPaidAccounts},this.allUnpaidAccounts=function(){return this.ac.allUnpaidAccounts=this.filterUnpaid(this.ac.allAccounts),this.ac.allUnpaidAccounts=this.orderBy(this.ac.allUnpaidAccounts,["-apy"]),this.ac.allUnpaidAccounts},this.featuredAccounts=function(){return this.ac.featuredAccounts=_.chain(this.ac.allPaidAccounts).sortBy(function(e){return e.min_balance_open}).sortBy(function(e){return-e.apy}).value(),this.ac.featuredAccounts.length>=this.ac.minRequired?this.ac.featuredAccounts:(this.ac.featuredAccounts=this.ac.featuredAccounts.concat(_.chain(this.ac.allUnpaidAccounts).sortBy(function(e){return-e.apy}).sortBy(function(e){return-e.overall_rating}).sortBy(function(e){return!e.reporting_url}).first(this.ac.minRequired).value()),this.ac.featuredAccounts)},this.filterPaid=function(e){return _.filter(e,function(e){return null!==e.reporting_url})},this.filterUnpaid=function(e){return _.filter(e,function(e){return null===e.reporting_url})},this.makeProductFeedUrl=function(e,t){return console.log("makeproductfeed"),console.dir(t.productFeed),t.productFeed||!e.type?t.productFeed:"/api/cds/"+e.type+"/"+e.term+"?api_class="+e.apiClass+n(t)},this.$filter=e,this.orderBy=e("orderBy"),this.ac={minRequired:3,allAccounts:[],allPaidAccounts:[],allUnpaidAccounts:[],featuredAccounts:[]}}return{get:function(){return new n(e,t)}}}angular.module("app.cds").factory("CDSAccountsService",e),e.$inject=["$filter","productFeedService"]}(),function(){"use strict";function e(){return{restrict:"AE",controller:"CashBackCreditCardCalculatorController",controllerAs:"vm",scope:{calculatorTitle:"@",resultsTitle:"@",ctaText:"@",product:"=",rewardsRate:"@",signupBonus:"@"},templateUrl:"/static/app/ng/ui/mf-calculator/mf-calculator-general-template.html"}}angular.module("app.creditCard").directive("mfCashBackCreditCardCalculator",e)}(),function(){"use strict";function e(e,t,n,r){function a(){var e={start:2e3,connect:"lower",range:{min:500,max:1e4},step:100};l.monthlySpendingSlider={label:"Monthly Spending",value:2e3,identifier:"monthly-spending-slider",fullWidth:!0,config:e,onChange:function(){l.eventsService.sliderChange("monthlySpendingSlider")},filter:function(e){return t("abbreviateCurrency")(e)}}}function o(){l.monthlyRewards={label:"Per Month",filter:function(e){return t("abbreviateCurrency")(e)}},l.annualRewards={label:"In First Year",filter:function(e){return t("abbreviateCurrency")(e)}};var n=function(){l.rewardsObj=r.updateRewards({rewardsRate:l.rewardsRate,signupBonus:l.signupBonus,monthlySpending:l.monthlySpendingSlider.value}),l.monthlyRewards.value=l.rewardsObj.monthlyRewards,l.annualRewards.value=l.rewardsObj.annualRewards};e.$watchGroup(["vm.monthlySpendingSlider.value"],function(){n()}),n()}function i(){var t=function(){var t={rewardsRate:l.rewardsRate,signupBonus:l.signupBonus,monthlyRewards:l.rewardsObj.monthlyRewards,annualRewards:l.rewardsObj.annualRewards};l.eventsService.ctaClicked(e.product,t)};l.calculatorConfig={calculatorName:l.calculatorName,calculatorTitle:e.calculatorTitle||"Calculate Your Cash Back Rewards",sliders:[l.monthlySpendingSlider],resultsTitle:e.resultsTitle||"Potential Rewards",results:[l.monthlyRewards,l.annualRewards],disclaimerTemplate:"/static/creditcards/ng/mf-cash-back-credit-card-calculator/mf-cash-back-credit-card-calculator-disclaimer.html",ctaClicked:t,ctaText:e.ctaText||"Learn More"}}var l=this;l.calculatorName="cashBackCreditCard",l.eventsService=new n(l.calculatorName),l.rewardsRate=parseFloat(e.rewardsRate),l.signupBonus=parseInt(e.signupBonus),l.helpTextIsCollapsed=!0,l.monthlySpendingSlider={},l.monthlyRewards={},l.firstYearRewards={},l.rewardsObj={},l.calculatorConfig={},function(){l.eventsService.calculatorViewed(),a(),o(),i()}()}angular.module("app.creditCard").controller("CashBackCreditCardCalculatorController",e),e.$inject=["$scope","$filter","MfCalculatorEventsService","cashBackCreditCardCalculationService"]}(),function(){"use strict";function e(){return{updateRewards:function(e){var t=e.rewardsRate,n=e.signupBonus,r=e.monthlySpending;return e.monthlyRewards=t/100*r,e.annualRewards=12*e.monthlyRewards+n,e}}}angular.module("app.creditCard").factory("cashBackCreditCardCalculationService",e)}(),function(){"use strict";function e(e,t,n,r,a,o){function i(t){g.loading=!0,g.noResults=!1;var r;r="refi"===g.type?"":g.ltv;var a;a=t?n.get(t,"refi-calc"):e.api.get({type:g.type,term:g.term,zipcode:g.zipcode,loan_amount:g.loanAmount,fico_score:g.fico,loan_to_value_ratio:r,points:g.points,placement:"refi-calc"}).$promise,a.then(function(e){if(!e.results.length)return g.noResults=!0,g.mortgages=[],void(g.loading=!1);if(g.mortgages=e.results,g.newMortgage=g.mortgages[0],"Bankrate"===e.source)g.bankrate=!0,g.newMortgage.loanTerm=m(e.loan_term),g.newMortgage.totalLoanValue=g.newMortgage.estimated_payment*(12*g.newMortgage.loanTerm.term);else{g.bankrate=!1;var t=u({apr:parseFloat(g.newMortgage.apr),loanTerm:g.options.terms.fixed[0],loanAmount:g.loanAmount});g.newMortgage.estimated_payment=t.monthlyPayment,g.newMortgage.totalLoanValue=t.totalLoanValue}g.disclaimer=e.disclaimer,g.attribution=e.attribution,g.source=e.source,g.loading=!1},function(e){console.log(e)})}function l(){g.promise&&a.cancel(g.promise),g.promise=a(g.getMortgages,1e3)}function c(e){5===g.zipcode.length&&(t.validate(g.zipcode)?(g.validZip=!0,g.location=g.zipcode,e&&g.getMortgages()):g.validZip=!1)}function u(e){var t=e.apr/100/12,n=12*e.loanTerm.term,r=t*Math.pow(1+t,n),a=Math.pow(1+t,n)-1,o=e.loanAmount*r/a,i=o*n;return e.monthlyPayment=o,e.totalLoanValue=i,e}function s(){g.getMortgages(),r.path("/mortgage/learn-more")}function d(e,t,n){if(e&&t){n&&g.getMortgages();var r=e+"-"+t;if(!g.analytics[r]){var a={page:window.location.pathname.toLowerCase(),placement:e,label:t};dataLayer.push(angular.merge({},MF,a,{event:"filter-change"})),g.analytics[r]=!0}}}function p(){return g.ltv*g.loanAmount*.01}function m(e){for(var t=0;t<g.options.terms.fixed.length;t++)if(g.options.terms.fixed[t].id===e)return g.options.terms.fixed[t];for(var n=0;n<g.options.terms.arm.length;n++)if(g.options.terms.arm[n].id===e)return g.options.terms.arm[n]}function f(){var e=window.location.hash;if(e=e.split("/"),e.length>2)var t=window.setInterval(function(){angular.element(".o-mf-takeover.is-view").length&&(window.clearInterval(t),angular.element(".o-mf-takeover.is-view").css({display:"block",position:"fixed",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",opacity:1,"z-index":1e9}),angular.element(".o-mf-takeover.is-view .o-mf-takeover__container").css("opacity",1),angular.element("body").css("overflow-y","hidden"))},100)}var g=this;o("orderBy");g.getMortgages=i,g.throttle=l,g.validateZip=c,g.monthlyPayment=u,g.updateSearchMobile=s,g.trackClick=d,function(){f(),g.type=g.type||"refi",g.parent="123",g.termType="fixed",g.term="30yr_fixed",g.points="3",g.fico="800",g.validZip=!0,g.loanAmount=2e5,g.zipcode=MF.postal_code||"",g.ltv=20,g.ltvAmount=p(),
g.location=MF.city+", "+MF.state,g.analytics=[],"refi"===g.type?g.typeLabel="Refi":g.typeLabel="Purchase",g.options={terms:e.options.terms,ficos:e.options.ficos,points:e.options.points},g.loanAmountConfig={start:g.loanAmount,connect:"lower",range:{min:5e4,"50%":3e5,"80%":1e6,max:15e5},step:1e4},g.ltvConfig={start:g.ltv,connect:"lower",range:{min:1,max:50},step:1},g.getMortgages()}()}angular.module("app.mortgage").controller("mortgageController",e),e.$inject=["mortgageService","zipcodeService","productFeedService","$location","$timeout","$filter"]}(),function(){"use strict";function e(){return{monthlyPayment:function(e){var t=e.apr/100/12,n=12*e.loanTerm.term,r=t*Math.pow(1+t,n),a=Math.pow(1+t,n)-1,o=e.loanAmount*r/a,i=o*n;return e.monthlyPayment=o,e.totalLoanValue=i,e}}}angular.module("app.mortgage").factory("mortgageCalculatorService",e)}(),function(){"use strict";function e(){return{updateHomeValue:function(e){var t=parseFloat(e.income),n=parseFloat(e.downPayment),r=t/12*.28,a=e.apr/1200,o=r,i=a,l=e.term,c=o*(Math.pow(1+i,l)-1),u=i*Math.pow(1+i,l),s=c/u;return e.totalHomeValue=s+n,e}}}angular.module("app.mortgage").factory("mortgagePurchaseCalculatorService",e)}(),function(){"use strict";function e(){return{restrict:"AE",controller:"MortgagePurchaseCalculatorController",controllerAs:"vm",scope:{calculatorTitle:"@",ctaText:"@",apr:"@?",termInMonths:"@?",product:"=?"},templateUrl:"/static/app/ng/ui/mf-calculator/mf-calculator-general-template.html"}}angular.module("app.mortgage").directive("mfMortgagePurchaseCalculator",e)}(),function(){"use strict";function e(e,t,n,r,a,o){function i(){o.get(t.productFeed,"mortgage-purchase-feed-calculator").then(function(t){e.product=t.results[0],d.apr=e.product.apr&&parseFloat(e.product.apr)||p,d.termInMonths=e.product.loan_term_in_months&&parseInt(e.product.loan_term_in_months)||m,u()})}function l(){var e={start:55e3,connect:"lower",range:{min:25e3,max:2e5},step:5e3};d.incomeSlider={label:"Yearly Income",value:55e3,identifier:"income-slider",config:e,onChange:function(){d.eventsService.sliderChange("incomeSlider")},filter:function(e){return n("abbreviateCurrency")(e)}};var t={start:5e4,connect:"lower",range:{min:5e3,"80%":125e3,max:25e4},step:1e3};d.downPaymentSlider={label:"Down Payment",value:5e4,identifier:"down-payment-slider",config:t,onChange:function(){d.eventsService.sliderChange("downPaymentSlider")},filter:function(e){return n("abbreviateCurrency")(e)}}}function c(){d.totalHomeValue={label:"Total Home Value",filter:function(e){return n("abbreviateCurrency")(e)}};var t=function(){d.resultsObj=a.updateHomeValue({apr:d.apr,term:d.termInMonths,income:d.incomeSlider.value,downPayment:d.downPaymentSlider.value}),d.totalHomeValue.value=d.resultsObj.totalHomeValue};e.$watchGroup(["vm.incomeSlider.value","vm.downPaymentSlider.value"],function(){t()}),t()}function u(){var t="View Your Monthly Payment";e.product&&e.product.display_name&&(t="View Payment with "+e.product.display_name),t=e.ctaText||t,d.calculatorConfig&&(d.calculatorConfig.ctaText=t)}function s(){var t=function(){var t={totalHomeValue:d.resultsObj.totalHomeValue,income:d.resultsObj.income,downPayment:d.resultsObj.downPayment};d.eventsService.ctaClicked(e.product,t)};d.calculatorConfig={calculatorName:d.calculatorName,calculatorTitle:e.calculatorTitle||"How Much Home Can You Afford?",sliders:[d.incomeSlider,d.downPaymentSlider],resultsTitle:"Your New Home",results:[d.totalHomeValue],resultFullWidth:!0,disclaimerTemplate:"/static/mortgages/ng/mf-mortgage-purchase-calculator/mf-mortgage-purchase-calculator-disclaimer.html",ctaClicked:t},u()}var d=this;d.calculatorName="mortgagepurchase",d.eventsService=new r(d.calculatorName),d.helpTextIsCollapsed=!0,d.incomeSlider={},d.downPaymentSlider={},d.totalHomeValue={},d.resultsObj={};var p=4,m=360;d.apr=e.apr&&parseFloat(e.apr)||p,d.termInMonths=e.termInMonths&&parseInt(e.termInMonths)||m,d.calculatorConfig={},function(){d.eventsService.calculatorViewed(),t.productFeed&&i(),l(),c(),s()}()}angular.module("app.mortgage").controller("MortgagePurchaseCalculatorController",e),e.$inject=["$scope","$attrs","$filter","MfCalculatorEventsService","mortgagePurchaseCalculatorService","productFeedService"]}(),function(){"use strict";function e(){return{restrict:"AE",controller:"RefiCalculatorController",controllerAs:"rc",transclude:!0,bindToController:{mobile:"@?"},scope:{vm:"="},templateUrl:"/static/mortgages/ng/refi-calculator/refi-calculator.html"}}angular.module("app.mortgage").directive("refiCalculator",e)}(),function(){"use strict";function e(e,t){function n(){i.loading=!0,i.loadingText="-",e.vm.getMortgages(t.productFeed),e.vm.trackClick("refi-calculator","loan-amount",!1)}function r(e){return e.term==i.loanTerm.term}function a(t){i.loanTerm=t,e.vm.trackClick("refi-calculator","loan-term",!1)}function o(){i.currentMortgage=e.vm.monthlyPayment({loanTerm:i.loanTerm,loanAmount:e.vm.loanAmount,apr:i.currentMortgageApr}),e.vm.currentMortgage=i.currentMortgage}var i=this;i.isCurrentLoan=r,i.setLoanTerm=a,i.getMortgages=n,i.title="Calculate your savings",i.currentMortgageApr=6.75,function(){t.productFeed&&n(),e.vm.calculatorTitle=t.calculatorTitle,e.vm.ctaTextOverride=t.ctaText,e.vm.resultsTitle=t.resultsTitle}(),dataLayer.push({event:"calculatorViewed",calculator:"mortgageRefi"}),i.helpTextIsCollapsed=!0,i.loanTerms=[{term:10,name:"10 years"},{term:15,name:"15 years"},{term:20,name:"20 years"},{term:30,name:"30 years"}],i.loanTerm=i.loanTerms[3],i.loanSliderConfig={start:e.vm.loanAmount,connect:"lower",range:{min:5e4,"50%":3e5,"80%":1e6,max:15e5},step:1e4},i.interestRateSliderConfig={start:i.currentMortgageApr,connect:"lower",range:{min:2,max:8},step:.01},o(),e.$watch("vm.newMortgage",function(){i.loading=!1,o()}),e.$watchGroup(["rc.loanTerm","rc.currentMortgageApr"],function(){o()})}angular.module("app.mortgage").controller("RefiCalculatorController",e),e.$inject=["$scope","$attrs"]}(),function(){"use strict";function e(e){e.vm}angular.module("app.mortgage").controller("MortgageTakeoverController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t){function n(e,n){function r(){var e=window.location.hash;e=e.split("/"),e.length>2&&t(function(){angular.element("body").css("overflow-y","hidden")},10),n()}var a=new TimelineLite({onComplete:r});a.add(TweenLite.to(e,.001,{display:"block",position:"fixed",top:"99%",left:"50%",width:".2rem",height:"3rem",opacity:1,"z-index":1e9})),a.add(TweenLite.to(e,.2,{width:"100%",left:0,right:0,ease:Elastic.easeOut.config(1,1)})),a.add(TweenLite.to(e,.25,{height:"100%",top:0,bottom:0,"border-top":"none",ease:Elastic.easeOut.config(1,1),delay:0}))}function r(e,t){function n(){var e=window.location.hash;e=e.split("/"),e.length<3&&angular.element("body").css("overflow-y","auto"),t()}new TimelineLite({onComplete:n}).add(TweenLite.to(e,.25,{height:"3rem",top:"99%",bottom:"inherit",ease:Elastic.easeIn.config(1,1)}))}return{enter:n,leave:r}}angular.module("app.mortgage").animation(".o-mf-takeover",e),e.$inject=["$route","$timeout"]}(),function(){"use strict";function e(e,t,n,r){function a(){o.savingsObj=r.updateSavings({offerAPR:o.offerAPR,offerTerm:o.offerTerm,currentDebt:o.debtSlider.value,currentAPR:o.aprSlider.value}),o.monthlySavings.value=o.savingsObj.monthlySavings,o.interestSaved.value=o.savingsObj.interestSaved}var o=this;o.calculatorName="personalloan";var i=new n(o.calculatorName);i.calculatorViewed(),o.offerAPR=parseFloat(e.apr),o.offerTerm=parseInt(e.term),o.helpTextIsCollapsed=!0;var l={start:15e3,connect:"lower",range:{min:1e3,max:4e4},step:500};o.debtSlider={label:"Current Debt",value:15e3,identifier:"debt-slider",config:l,onChange:function(){i.sliderChange("debtSlider")},filter:function(e){return t("abbreviateCurrency")(e)}};var c={start:15.5,connect:"lower",range:{min:o.offerAPR,max:25},step:.1},u="Credit card APRs typically range from 14-25%, with the national average hovering around 15%";e.tooltipText&&(u=e.tooltipText),o.aprSlider={label:"Current APR",value:15.5,identifier:"apr-slider",tooltip:u,config:c,onChange:function(){i.sliderChange("aprSlider")},filter:function(e){return t("percentage")(e,2)}},o.monthlySavings={label:"Per Month",filter:function(e){return t("abbreviateCurrency")(e)}},o.interestSaved={label:"In Interest",filter:function(e){return t("abbreviateCurrency")(e)}},a(),e.$watchGroup(["vm.debtSlider.value","vm.aprSlider.value"],function(){a()});var s=function(){var t={debtAmount:o.savingsObj.currentDebt,currentAPR:o.savingsObj.currentAPR,totalSavings:o.savingsObj.interestSaved,monthlySavings:o.savingsObj.monthlySavings};i.ctaClicked(e.product,t)};o.calculatorConfig={calculatorName:o.calculatorName,calculatorTitle:e.calculatorTitle||"Refinance Your Debt",sliders:[o.debtSlider,o.aprSlider],resultsTitle:e.resultsTitle||"Potential Savings",results:[o.monthlySavings,o.interestSaved],disclaimerTemplate:"/static/personal_loans/ng/mf-personal-loan-calculator/mf-personal-loan-calculator-disclaimer.html",additionalDisclaimerText:e.additionalDisclaimerText,ctaDisclaimerText:e.ctaDisclaimerText,ctaClicked:s,ctaText:e.ctaText||"Calculate Your New Loan Payment"}}angular.module("app.personalLoan").controller("PersonalLoanCalculatorController",e),e.$inject=["$scope","$filter","MfCalculatorEventsService","loanCalculationService"]}(),function(){"use strict";function e(){return{restrict:"AE",controller:"PersonalLoanCalculatorController",controllerAs:"vm",scope:{calculatorTitle:"@",resultsTitle:"@",ctaText:"@",additionalDisclaimerText:"@",ctaDisclaimerText:"@",tooltipText:"@",product:"=",term:"@",apr:"@"},templateUrl:"/static/app/ng/ui/mf-calculator/mf-calculator-general-template.html"}}angular.module("app.personalLoan").directive("mfPersonalLoanCalculator",e)}(),function(){"use strict";function e(e,t,n){function r(){return t.getProductList("savings","savings-api").then(function(e){return y.allAccounts=e.results,y.disclaimer=e.disclaimer,y.attribution=e.attribution,y.source=e.source,y.allAccounts})}function a(){return y.allPaidAccounts=n.filterPaid(y.allAccounts),y.allPaidAccounts}function o(){return y.allUnpaidAccounts=n.filterUnpaid(y.allAccounts),y.allUnpaidAccounts=w(y.allUnpaidAccounts,["-apy"]),y.allUnpaidAccounts}function i(){return y.allUnpaidSavingsAccounts=n.filterUnpaid(y.allAccounts),y.allUnpaidSavingsAccounts=n.filterCategory(y.allUnpaidSavingsAccounts,"S"),y.allUnpaidSavingsAccounts=w(y.allUnpaidSavingsAccounts,["-overall_rating"]),y.allUnpaidAccounts}function l(){return y.bankReputations=w(y.featuredAccounts.slice(0,3),["-bank.reputation_rating"]),y.bankReputations=n.filterPaid(y.bankReputations),y.bankReputations=y.bankReputations,y.bankReputations}function c(){return y.customerServiceWinner=w(y.featuredAccounts.slice(0,3),["-bank.customer_service_rating"]),y.customerServiceWinner=n.filterPaid(y.customerServiceWinner),y.customerServiceWinner=y.customerServiceWinner[0],y.overallWinner}function u(){return y.lowMinBalanceAccounts=n.feeAnalysis(y.featuredAccounts.slice(0,3)).lowMinBalanceAccounts,y.lowMinBalanceAccounts}function s(){return y.lowMinDepositAccounts=n.feeAnalysis(y.featuredAccounts.slice(0,3)).lowMinDepositAccounts,y.lowMinDepositAccounts}function d(){var e=n.filterCategory(y.allAccounts,"M");e=_.filter(e,function(e){return e.serp_image_url&&"/media/"!==e.serp_image_url}),e=_.sortBy(e,function(e){return-e.overall_rating}),e=_.sortBy(e,function(e){return!e.reporting_url}),y.allLogoMMAAccounts=e}function p(){return y.mmaAccounts=n.filterCategory(y.allPaidAccounts,"M"),y.mmaAccounts=w(y.mmaAccounts,["-overall_rating"]),y.mmaAccounts}function m(){return y.noFeeAccounts=n.feeAnalysis(y.featuredAccounts.slice(0,3)).noFeeAccounts,y.noFeeAccounts}function f(){return y.overallWinner=w(y.featuredAccounts.slice(0,3),["-overall_rating"]),y.overallWinner=n.filterPaid(y.overallWinner),y.overallWinner=y.overallWinner[0],y.overallWinner}function g(){return y.accountsByApy=w(y.featuredAccounts.slice(0,3),["-apy"]),y.accountsByApy}function v(){return y.savingsAccounts=n.filterCategory(y.allPaidAccounts,"S"),y.savingsAccounts=w(y.savingsAccounts,["-overall_rating"]),y.savingsAccounts}function h(){y.featuredAccounts=n.filterPaid(y.savingsAccounts);var e=3-y.featuredAccounts.length;if(y.featuredAccounts.length>=3||"MyFinance"===y.source&&y.featuredAccounts.length>=3)return y.featuredAccounts;for(;e>0;){var t=3-e;if(y.mmaAccounts.length>0){for(var r=y.mmaAccounts.shift(),a=!1,o=0;o<y.featuredAccounts.length;o++)if(y.featuredAccounts[o].name==r.bank.name){a=!0;break}!1===a&&(y.featuredAccounts[t]=r)}else y.featuredAccounts[t]=y.allUnpaidSavingsAccounts.shift();e--}return y.featuredAccounts=_.sortBy(y.featuredAccounts,function(e){return-e.overall_rating}),y.featuredAccounts=_.sortBy(y.featuredAccounts,function(e){return!e.reporting_url}),y.featuredAccounts}function b(){return y.mmaSavingsCombinedFeaturedAccounts=_.chain(y.allPaidAccounts).sortBy(function(e){return-e.apy}).uniq(function(e){return e.name}).value(),y.mmaSavingsCombinedFeaturedAccounts.length>=3?y.mmaSavingsCombinedFeaturedAccounts:(y.mmaSavingsCombinedFeaturedAccounts=y.mmaSavingsCombinedFeaturedAccounts.concat(_.chain(y.allUnpaidAccounts).sortBy(function(e){return-e.apy}).sortBy(function(e){return-e.overall_rating}).sortBy(function(e){return!e.reporting_url}).value()),_.chain(y.mmaSavingsCombinedFeaturedAccounts).uniq(function(e){return e.name}).first(3).value())}var y=this,w=e("orderBy");e("filter");y.allAccounts=[],y.allPaidAccounts=a,y.allUnpaidAccounts=o,y.allUnpaidSavingsAccounts=i,y.bankReputations=l,y.customerServiceWinner=c,y.mmaAccounts=p,y.lowMinBalanceAccounts=u,y.lowMinDepositAccounts=s,y.savingsAccounts=v,y.noFeeAccounts=m,y.overallWinner=f,y.accountsByApy=g,y.mmaSavingsCombinedFeaturedAccounts=[],function(){r().then(function(){a(),o(),i(),v(),d(),p(),h(),b(),l(),u(),s(),m(),f(),c(),g()})}()}angular.module("app.savings").controller("SavingsAccountsController",e),e.$inject=["$filter","productsService","savingsHelpers","$sce"]}(),function(){function e(e,t){function n(e){return i(e,{reporting_url:""})}function r(e){return i(e,{reporting_url:null})}function a(e,t){return i(e,{category:t},!0)}function o(e){var t,n,r,a,o;return t=i(e,{fee_type:"No Fee"},!0),n=i(e,{fee_type:"Low Minimum Balance"},!0),r=i(e,{fee_type:"Low Opening Deposit"},!0),a=i(e,{fee_type:"High Opening Deposit"},!0),o=i(e,{fee_type:"High Minimum Balance"},!0),{noFeeAccounts:t,lowMinBalanceAccounts:n,lowMinDepositAccounts:r,highOpeningDepositAccounts:a,highMinimumBalanceAccounts:o}}var i=(t("orderBy"),t("filter"));return{filterPaid:n,filterUnpaid:r,filterCategory:a,feeAnalysis:o}}angular.module("app.savings").factory("savingsHelpers",e),e.$inject=["$injector","$filter"]}(),function(){"use strict";function e(e){this.showTakeover=function(){e.$broadcast("takeover")}}angular.module("app.savings").controller("SavingsRatetableController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(){return{templateUrl:"/static/savings/ng/savings-ratetable/rate-table-widget.html",restrict:"E",replace:!0,controller:"SavingsRatetableController",controllerAs:"vm",scope:{paid:"=",free:"=",attribution:"=",disclaimer:"="}}}angular.module("app.savings").directive("savingsRateTable",e)}(),function(){"use strict";function e(e,t,n,r){function a(){o.balancesObj=r.updateBalances({principal:o.principalSlider.value,termInYears:o.termInYears,monthlyContribution:o.monthlyContributionSlider.value,offerAnnualRate:o.offerAnnualRate,averageAnnualRate:o.averageAnnualRate}),o.offerEndBalance.value=o.balancesObj.offerEndBalance,o.differenceOverAverage.value=o.balancesObj.differenceOverAverage}var o=this;o.calculatorName="savingsaccount";var i=new n(o.calculatorName);i.calculatorViewed(),o.offerAnnualRate=parseFloat(e.offerAnnualRate),o.averageAnnualRate=parseFloat(e.averageAnnualRate),o.termInYears=15,o.dateNow=new Date,o.helpTextIsCollapsed=!0;var l={start:15e3,connect:"lower",range:{min:1e3,"80%":5e4,max:25e4},step:500};o.principalSlider={label:"Your Savings",value:15e3,identifier:"principal-slider",config:l,onChange:function(){i.sliderChange("principalSlider")},filter:function(e){return t("abbreviateCurrency")(e)}};var c={start:200,connect:"lower",range:{min:50,"80%":1e3,max:5e3},step:50};o.monthlyContributionSlider={label:"Monthly Contribution",value:200,identifier:"monthly-contribution-slider",config:c,onChange:function(){i.sliderChange("monthlyContributionSlider")},filter:function(e){return t("abbreviateCurrency")(e)}},o.offerEndBalance={label:"Total Balance",filter:function(e){return t("abbreviateCurrency")(e)}},o.differenceOverAverage={label:"Additional Interest",filter:function(e){return t("abbreviateCurrency")(e)}},a(),e.$watchGroup(["vm.principalSlider.value","vm.monthlyContributionSlider.value"],function(){a()});var u=function(){var t={principal:o.balancesObj.principal,monthlyContribution:o.balancesObj.monthlyContribution,termInYears:o.balancesObj.termInYears,offerEndBalance:o.balancesObj.offerEndBalance,averageEndBalance:o.balancesObj.averageEndBalance,differenceOverAverage:o.balancesObj.differenceOverAverage};i.ctaClicked(e.product,t)};o.calculatorConfig={calculatorName:o.calculatorName,calculatorTitle:e.calculatorTitle||"Calculate Your Savings",sliders:[o.principalSlider,o.monthlyContributionSlider],resultsTitle:e.resultsTitle||"Savings in 15 Years",results:[o.offerEndBalance,o.differenceOverAverage],disclaimerTemplate:"/static/savings/ng/mf-savings-account-calculator/mf-savings-account-calculator-disclaimer.html",ctaClicked:u,ctaText:e.ctaText||"Learn More"}}angular.module("app.savings").controller("SavingsAccountCalculatorController",e),e.$inject=["$scope","$filter","MfCalculatorEventsService","compoundInterestCalculationService"]}(),function(){"use strict";function e(){return{restrict:"AE",controller:"SavingsAccountCalculatorController",controllerAs:"vm",scope:{calculatorTitle:"@",resultsTitle:"@",ctaText:"@",product:"=",offerAnnualRate:"@",averageAnnualRate:"@"},templateUrl:"/static/app/ng/ui/mf-calculator/mf-calculator-general-template.html"}}angular.module("app.savings").directive("mfSavingsAccountCalculator",e)}(),function(){"use strict";function e(e,t,n,r){function a(){o.savingsObj=r.updateSavings({offerAPR:o.offerAPR,offerTerm:o.offerTerm,currentDebt:o.debtSlider.value,currentAPR:o.aprSlider.value}),o.monthlySavings.value=o.savingsObj.monthlySavings,o.interestSaved.value=o.savingsObj.interestSaved}var o=this;o.calculatorName="studentloan";var i=new n(o.calculatorName);i.calculatorViewed(),o.offerAPR=parseFloat(e.apr),o.offerTerm=parseInt(e.term),o.helpTextIsCollapsed=!0;var l={start:25e3,connect:"lower",range:{min:5e3,"80%":1e5,max:2e5},step:1e3};o.debtSlider={label:"Total Debt",value:25e3,identifier:"debt-slider",config:l,onChange:function(){i.sliderChange("debtSlider")},filter:function(e){return t("abbreviateCurrency")(e)}};var c={start:6.5,connect:"lower",range:{min:o.offerAPR,max:10},step:.1};o.aprSlider={label:"Current APR",value:6.5,identifier:"apr-slider",tooltip:"Student loan APRs typically range from 3.5-10%, with the national average hovering around 6.5%",config:c,onChange:function(){i.sliderChange("aprSlider")},filter:function(e){return t("percentage")(e,2)}},o.monthlySavings={label:"Per Month",filter:function(e){return t("abbreviateCurrency")(e)}},o.interestSaved={label:"In Interest",filter:function(e){return t("abbreviateCurrency")(e)}},a(),e.$watchGroup(["vm.debtSlider.value","vm.aprSlider.value"],function(){a()});var u=function(){var t={debtAmount:o.savingsObj.currentDebt,currentAPR:o.savingsObj.currentAPR,totalSavings:o.savingsObj.interestSaved,monthlySavings:o.savingsObj.monthlySavings};i.ctaClicked(e.product,t)};o.calculatorConfig={calculatorName:o.calculatorName,calculatorTitle:e.calculatorTitle||"Refinance Your Student Loan Debt",sliders:[o.debtSlider,o.aprSlider],resultsTitle:e.resultsTitle||"Potential Savings",results:[o.monthlySavings,o.interestSaved],disclaimerTemplate:"/static/student_loans/ng/mf-student-loan-calculator/mf-student-loan-calculator-disclaimer.html",ctaClicked:u,ctaText:e.ctaText||"Learn More"}}angular.module("app.studentLoan").controller("StudentLoanCalculatorController",e),e.$inject=["$scope","$filter","MfCalculatorEventsService","loanCalculationService"]}(),function(){"use strict";function e(){return{restrict:"AE",controller:"StudentLoanCalculatorController",controllerAs:"vm",scope:{calculatorTitle:"@",resultsTitle:"@",ctaText:"@",product:"=",term:"@",apr:"@"},templateUrl:"/static/app/ng/ui/mf-calculator/mf-calculator-general-template.html"}}angular.module("app.studentLoan").directive("mfStudentLoanCalculator",e)}();
